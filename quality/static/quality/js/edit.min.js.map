{"version":3,"file":"edit.min.js","sources":["peerinst/static/peerinst/js/_ajax/utils.js","quality/static/quality/js/_edit/index.js","quality/static/quality/js/edit.js"],"sourcesContent":["\"use strict\";\n\nexport function getCsrfToken() {\n  const name = \"csrftoken\";\n  if (document.cookie && document.cookie !== \"\") {\n    return document.cookie\n      .split(\";\")\n      .map(c => c.trim())\n      .filter(c => c.substring(0, name.length + 1) === name + \"=\")\n      .map(c => decodeURIComponent(c.substring(name.length + 1)))[0];\n  } else {\n    return null;\n  }\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n","\"use strict\";\n\nimport { buildReq } from \"../../../../../peerinst/static/peerinst/js/_ajax/utils.js\"; // eslint-disable-line\n\n/*********/\n/* model */\n/*********/\n\nlet model;\n\nfunction initModel(data) {\n  model = {\n    quality: {\n      pk: data.quality.pk,\n      qualityType: data.quality.quality_type,\n    },\n    next: data.next,\n    available: data.available.map(c => ({\n      name: c.name,\n      fullName: c.full_name,\n      description: c.description,\n    })),\n    criterions: data.criterions,\n    urls: {\n      addCriterion: data.urls.add_criterion,\n    },\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction addCriterion(criterion) {\n  const data = {\n    quality: model.quality.pk,\n    criterion: criterion,\n  };\n\n  const req = buildReq(data, \"post\");\n  fetch(model.urls.addCriterion, req)\n    .then(resp => resp.json())\n    .then(json => console.log(json))\n    .catch(err => console.log(err));\n}\n\n/********/\n/* view */\n/********/\n\nfunction view() {\n  returnLinkView();\n  criterionsView();\n  newCriterionsView();\n}\n\nfunction returnLinkView() {\n  const link = document.querySelector(\"#back-link\");\n  if (model.next) {\n    link.href = model.next;\n    link.textContent = `Back to ${model.quality.qualityType}`;\n  } else {\n    link.parentNode.removeChild(link);\n  }\n}\n\nfunction criterionsView() {\n  const div = document.querySelector(\"#criterions\");\n  model.criterions.forEach(criterion => {\n    div.appendChild(criterionView(criterion));\n  });\n}\n\nfunction criterionView(criterion) {\n  const div = document.createElement(\"div\");\n  div.classList.add(\"criterion\");\n\n  const name = document.createElement(\"div\");\n  name.classList.add(\"criterion--name\");\n  name.textContent = criterion.name;\n  div.appendChild(name);\n\n  const options = document.createElement(\"div\");\n  options.classList.add(\"criterion--options\");\n  div.appendChild(options);\n\n  return div;\n}\n\nfunction newCriterionsView() {\n  const button = document.querySelector(\".add-criterion button\");\n  if (model.available.length) {\n    const ul = document.querySelector(\".available-criterions ul\");\n    model.available.forEach(criterion => {\n      ul.appendChild(newCriterionView(criterion));\n    });\n    button.disabled = false;\n    button.title = \"Add a new criterion\";\n  } else {\n    button.disabled = true;\n    button.title = \"There are no new criterions to add\";\n  }\n}\n\nfunction newCriterionView(criterion) {\n  const li = document.createElement(\"li\");\n  li.title = criterion.description;\n  li.textContent = criterion.fullName;\n  li.addEventListener(\"click\", () => addCriterion(criterion.name));\n  return li;\n}\n\nfunction toggleShowAddCriterion(event) {\n  const div = event.currentTarget.parentNode;\n  if (div.classList.contains(\"add-criterion__showing\")) {\n    div.classList.remove(\"add-criterion__showing\");\n  } else {\n    if (model.available.length) {\n      div.classList.add(\"add-criterion__showing\");\n    }\n  }\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initEventListeners() {\n  initAddCriterionListeners();\n}\n\nfunction initAddCriterionListeners() {\n  document\n    .querySelector(\".add-criterion button\")\n    .addEventListener(\"click\", toggleShowAddCriterion);\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(data) {\n  initModel(data);\n  view();\n  initEventListeners();\n}\n","\"use strict\";\n\nexport { init } from \"./_edit/index.js\";\n"],"names":["getCsrfToken","name","document","cookie","split","map","c","trim","filter","substring","length","decodeURIComponent","buildReq","data","method","toLowerCase","toUpperCase","headers","body","JSON","stringify","Error","model","initModel","quality","pk","qualityType","quality_type","next","available","fullName","full_name","description","criterions","urls","addCriterion","add_criterion","criterion","req","fetch","then","resp","json","console","log","catch","err","view","returnLinkView","criterionsView","newCriterionsView","link","querySelector","href","textContent","parentNode","removeChild","div","forEach","appendChild","criterionView","createElement","classList","add","options","button","ul","newCriterionView","disabled","title","li","addEventListener","toggleShowAddCriterion","event","currentTarget","contains","remove","initEventListeners","initAddCriterionListeners","init"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy9fYWpheC91dGlscy5qcyIsIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3F1YWxpdHkvc3RhdGljL3F1YWxpdHkvanMvX2VkaXQvaW5kZXguanMiLCIvaG9tZS9hbnRvaW5lL2RvY3VtZW50cy93b3JrL3NjaXZlcm8vcHJvamVjdHMvZGFsaXRlL2RhbGl0ZS9xdWFsaXR5L3N0YXRpYy9xdWFsaXR5L2pzL2VkaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDc3JmVG9rZW4oKSB7XG4gIGNvbnN0IG5hbWUgPSBcImNzcmZ0b2tlblwiO1xuICBpZiAoZG9jdW1lbnQuY29va2llICYmIGRvY3VtZW50LmNvb2tpZSAhPT0gXCJcIikge1xuICAgIHJldHVybiBkb2N1bWVudC5jb29raWVcbiAgICAgIC5zcGxpdChcIjtcIilcbiAgICAgIC5tYXAoYyA9PiBjLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoYyA9PiBjLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCArIDEpID09PSBuYW1lICsgXCI9XCIpXG4gICAgICAubWFwKGMgPT4gZGVjb2RlVVJJQ29tcG9uZW50KGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoICsgMSkpKVswXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRSZXEoZGF0YSwgbWV0aG9kKSB7XG4gIGlmIChtZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gXCJnZXRcIikge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJYLUNTUkZUb2tlblwiOiBnZXRDc3JmVG9rZW4oKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBlbHNlIGlmIChtZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gXCJwb3N0XCIpIHtcbiAgICBjb25zdCBib2R5ID0gZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogXCJcIjtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIlgtQ1NSRlRva2VuXCI6IGdldENzcmZUb2tlbigpLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKGBNZXRob2QgJHttZXRob2R9IG5vdCBpbXBsZW1lbnRlZCB5ZXQuYCk7XG4gIH1cbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBidWlsZFJlcSB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9wZWVyaW5zdC9zdGF0aWMvcGVlcmluc3QvanMvX2FqYXgvdXRpbHMuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4vKioqKioqKioqL1xuLyogbW9kZWwgKi9cbi8qKioqKioqKiovXG5cbmxldCBtb2RlbDtcblxuZnVuY3Rpb24gaW5pdE1vZGVsKGRhdGEpIHtcbiAgbW9kZWwgPSB7XG4gICAgcXVhbGl0eToge1xuICAgICAgcGs6IGRhdGEucXVhbGl0eS5wayxcbiAgICAgIHF1YWxpdHlUeXBlOiBkYXRhLnF1YWxpdHkucXVhbGl0eV90eXBlLFxuICAgIH0sXG4gICAgbmV4dDogZGF0YS5uZXh0LFxuICAgIGF2YWlsYWJsZTogZGF0YS5hdmFpbGFibGUubWFwKGMgPT4gKHtcbiAgICAgIG5hbWU6IGMubmFtZSxcbiAgICAgIGZ1bGxOYW1lOiBjLmZ1bGxfbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBjLmRlc2NyaXB0aW9uLFxuICAgIH0pKSxcbiAgICBjcml0ZXJpb25zOiBkYXRhLmNyaXRlcmlvbnMsXG4gICAgdXJsczoge1xuICAgICAgYWRkQ3JpdGVyaW9uOiBkYXRhLnVybHMuYWRkX2NyaXRlcmlvbixcbiAgICB9LFxuICB9O1xufVxuXG4vKioqKioqKioqKi9cbi8qIHVwZGF0ZSAqL1xuLyoqKioqKioqKiovXG5cbmZ1bmN0aW9uIGFkZENyaXRlcmlvbihjcml0ZXJpb24pIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBxdWFsaXR5OiBtb2RlbC5xdWFsaXR5LnBrLFxuICAgIGNyaXRlcmlvbjogY3JpdGVyaW9uLFxuICB9O1xuXG4gIGNvbnN0IHJlcSA9IGJ1aWxkUmVxKGRhdGEsIFwicG9zdFwiKTtcbiAgZmV0Y2gobW9kZWwudXJscy5hZGRDcml0ZXJpb24sIHJlcSlcbiAgICAudGhlbihyZXNwID0+IHJlc3AuanNvbigpKVxuICAgIC50aGVuKGpzb24gPT4gY29uc29sZS5sb2coanNvbikpXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbn1cblxuLyoqKioqKioqL1xuLyogdmlldyAqL1xuLyoqKioqKioqL1xuXG5mdW5jdGlvbiB2aWV3KCkge1xuICByZXR1cm5MaW5rVmlldygpO1xuICBjcml0ZXJpb25zVmlldygpO1xuICBuZXdDcml0ZXJpb25zVmlldygpO1xufVxuXG5mdW5jdGlvbiByZXR1cm5MaW5rVmlldygpIHtcbiAgY29uc3QgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYmFjay1saW5rXCIpO1xuICBpZiAobW9kZWwubmV4dCkge1xuICAgIGxpbmsuaHJlZiA9IG1vZGVsLm5leHQ7XG4gICAgbGluay50ZXh0Q29udGVudCA9IGBCYWNrIHRvICR7bW9kZWwucXVhbGl0eS5xdWFsaXR5VHlwZX1gO1xuICB9IGVsc2Uge1xuICAgIGxpbmsucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcml0ZXJpb25zVmlldygpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcml0ZXJpb25zXCIpO1xuICBtb2RlbC5jcml0ZXJpb25zLmZvckVhY2goY3JpdGVyaW9uID0+IHtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoY3JpdGVyaW9uVmlldyhjcml0ZXJpb24pKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyaXRlcmlvblZpZXcoY3JpdGVyaW9uKSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5jbGFzc0xpc3QuYWRkKFwiY3JpdGVyaW9uXCIpO1xuXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBuYW1lLmNsYXNzTGlzdC5hZGQoXCJjcml0ZXJpb24tLW5hbWVcIik7XG4gIG5hbWUudGV4dENvbnRlbnQgPSBjcml0ZXJpb24ubmFtZTtcbiAgZGl2LmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvcHRpb25zLmNsYXNzTGlzdC5hZGQoXCJjcml0ZXJpb24tLW9wdGlvbnNcIik7XG4gIGRpdi5hcHBlbmRDaGlsZChvcHRpb25zKTtcblxuICByZXR1cm4gZGl2O1xufVxuXG5mdW5jdGlvbiBuZXdDcml0ZXJpb25zVmlldygpIHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtY3JpdGVyaW9uIGJ1dHRvblwiKTtcbiAgaWYgKG1vZGVsLmF2YWlsYWJsZS5sZW5ndGgpIHtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXZhaWxhYmxlLWNyaXRlcmlvbnMgdWxcIik7XG4gICAgbW9kZWwuYXZhaWxhYmxlLmZvckVhY2goY3JpdGVyaW9uID0+IHtcbiAgICAgIHVsLmFwcGVuZENoaWxkKG5ld0NyaXRlcmlvblZpZXcoY3JpdGVyaW9uKSk7XG4gICAgfSk7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uLnRpdGxlID0gXCJBZGQgYSBuZXcgY3JpdGVyaW9uXCI7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBidXR0b24udGl0bGUgPSBcIlRoZXJlIGFyZSBubyBuZXcgY3JpdGVyaW9ucyB0byBhZGRcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiBuZXdDcml0ZXJpb25WaWV3KGNyaXRlcmlvbikge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgbGkudGl0bGUgPSBjcml0ZXJpb24uZGVzY3JpcHRpb247XG4gIGxpLnRleHRDb250ZW50ID0gY3JpdGVyaW9uLmZ1bGxOYW1lO1xuICBsaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYWRkQ3JpdGVyaW9uKGNyaXRlcmlvbi5uYW1lKSk7XG4gIHJldHVybiBsaTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlU2hvd0FkZENyaXRlcmlvbihldmVudCkge1xuICBjb25zdCBkaXYgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChkaXYuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWRkLWNyaXRlcmlvbl9fc2hvd2luZ1wiKSkge1xuICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKFwiYWRkLWNyaXRlcmlvbl9fc2hvd2luZ1wiKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAobW9kZWwuYXZhaWxhYmxlLmxlbmd0aCkge1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJhZGQtY3JpdGVyaW9uX19zaG93aW5nXCIpO1xuICAgIH1cbiAgfVxufVxuXG4vKioqKioqKioqKioqKi9cbi8qIGxpc3RlbmVycyAqL1xuLyoqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGluaXRFdmVudExpc3RlbmVycygpIHtcbiAgaW5pdEFkZENyaXRlcmlvbkxpc3RlbmVycygpO1xufVxuXG5mdW5jdGlvbiBpbml0QWRkQ3JpdGVyaW9uTGlzdGVuZXJzKCkge1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1jcml0ZXJpb24gYnV0dG9uXCIpXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVTaG93QWRkQ3JpdGVyaW9uKTtcbn1cblxuLyoqKioqKioqL1xuLyogaW5pdCAqL1xuLyoqKioqKioqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdChkYXRhKSB7XG4gIGluaXRNb2RlbChkYXRhKTtcbiAgdmlldygpO1xuICBpbml0RXZlbnRMaXN0ZW5lcnMoKTtcbn1cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnQgeyBpbml0IH0gZnJvbSBcIi4vX2VkaXQvaW5kZXguanNcIjtcbiJdLCJuYW1lcyI6WyJnZXRDc3JmVG9rZW4iLCJuYW1lIiwiZG9jdW1lbnQiLCJjb29raWUiLCJzcGxpdCIsIm1hcCIsImMiLCJ0cmltIiwiZmlsdGVyIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYnVpbGRSZXEiLCJkYXRhIiwibWV0aG9kIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIkVycm9yIiwibW9kZWwiLCJpbml0TW9kZWwiLCJxdWFsaXR5IiwicGsiLCJxdWFsaXR5VHlwZSIsInF1YWxpdHlfdHlwZSIsIm5leHQiLCJhdmFpbGFibGUiLCJmdWxsTmFtZSIsImZ1bGxfbmFtZSIsImRlc2NyaXB0aW9uIiwiY3JpdGVyaW9ucyIsInVybHMiLCJhZGRDcml0ZXJpb24iLCJhZGRfY3JpdGVyaW9uIiwiY3JpdGVyaW9uIiwicmVxIiwiZmV0Y2giLCJ0aGVuIiwicmVzcCIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnIiLCJ2aWV3IiwicmV0dXJuTGlua1ZpZXciLCJjcml0ZXJpb25zVmlldyIsIm5ld0NyaXRlcmlvbnNWaWV3IiwibGluayIsInF1ZXJ5U2VsZWN0b3IiLCJocmVmIiwidGV4dENvbnRlbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJkaXYiLCJmb3JFYWNoIiwiYXBwZW5kQ2hpbGQiLCJjcml0ZXJpb25WaWV3IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIm9wdGlvbnMiLCJidXR0b24iLCJ1bCIsIm5ld0NyaXRlcmlvblZpZXciLCJkaXNhYmxlZCIsInRpdGxlIiwibGkiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlU2hvd0FkZENyaXRlcmlvbiIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiaW5pdEV2ZW50TGlzdGVuZXJzIiwiaW5pdEFkZENyaXRlcmlvbkxpc3RlbmVycyIsImluaXQiXSwibWFwcGluZ3MiOiI7OztBQUFBOztBQUVBLEFBQU8sU0FBU0EsWUFBVCxHQUF3QjtNQUN2QkMsSUFBSSxHQUFHLFdBQWI7O01BQ0lDLFFBQVEsQ0FBQ0MsTUFBVCxJQUFtQkQsUUFBUSxDQUFDQyxNQUFULEtBQW9CLEVBQTNDLEVBQStDO1dBQ3RDRCxRQUFRLENBQUNDLE1BQVQsQ0FDSkMsS0FESSxDQUNFLEdBREYsRUFFSkMsR0FGSSxDQUVBLFVBQUFDLENBQUM7YUFBSUEsQ0FBQyxDQUFDQyxJQUFGLEVBQUo7S0FGRCxFQUdKQyxNQUhJLENBR0csVUFBQUYsQ0FBQzthQUFJQSxDQUFDLENBQUNHLFNBQUYsQ0FBWSxDQUFaLEVBQWVSLElBQUksQ0FBQ1MsTUFBTCxHQUFjLENBQTdCLE1BQW9DVCxJQUFJLEdBQUcsR0FBL0M7S0FISixFQUlKSSxHQUpJLENBSUEsVUFBQUMsQ0FBQzthQUFJSyxrQkFBa0IsQ0FBQ0wsQ0FBQyxDQUFDRyxTQUFGLENBQVlSLElBQUksQ0FBQ1MsTUFBTCxHQUFjLENBQTFCLENBQUQsQ0FBdEI7S0FKRCxFQUl1RCxD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"}