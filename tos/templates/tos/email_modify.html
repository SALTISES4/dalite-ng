{% extends 'peerinst/base.html' %}

{% load staticfiles i18n compress %}

{% block stylesheets %}
  {% compress css %}
    <link rel="stylesheet" href="{% static 'tos/css/styles.min.css' %}"></link>
  {% endcompress %}
{% endblock %}

{% block body %}
  <main>
    <section class='mdc-typography'>
      <h1 class="mdc-typography--display3">{% trans 'Email Settings' %}
        <svg class="underline" width=150 height=4></svg>
      </h1>

      <form id="email-settings-form" action="{% url 'tos:email_update' role %}" method="post">
        {% csrf_token %}

        <ul class="mdc-list mdc-list--two-line mdc-list--non-interactive">
          {% for email_type in email_types %}
          <li role="separator" class="mdc-list-divider"></li>
          <li class="mdc-list-item email-consent">
            <span class="mdc-list-item__text mdc-theme--secondary bold">
              {{ email_type.title }}
              <span class="mdc-list-item__secondary-text">
                {{ email_type.description }}
              </span>
            </span>
            <span class="mdc-list-item__meta">
              {% if email_type.type == 'all' %}
              <div id="btn-toggle-all" class="btn-toggle">
              {% elif all_accepted %}
              <div class="btn-toggle">
              {% else %}
              <div class="btn-toggle btn-toggle--disabled">
              {% endif %}
                {% if email_type.accepted %}
                <input type="checkbox" name="{{ email_type.type }}-consent" checked></input>
                <div class="btn-toggle--selected">{% trans 'Yes' %}</div>
                <div >{% trans 'No' %}</div>
                {% else %}
                <input type="checkbox" name="{{ email_type.type }}-consent"></input>
                <div>{% trans 'Yes' %}</div>
                <div class="btn-toggle--selected">{% trans 'No' %}</div>
                {% endif %}
              </div>
            </span>
          </li>
          {% endfor %}
          <li role="separator" class="mdc-list-divider"></li>
          <input type="submit" class="mdc-button mdc-button--raised padded-top" value='{% trans 'Save' %}'></input>
        </form>

    </section>
  </main>
{% endblock %}

{% block scripts %}
  <script src="{% static 'tos/js/email.min.js' %}" type="text/javascript"></script>
{% endblock %}
