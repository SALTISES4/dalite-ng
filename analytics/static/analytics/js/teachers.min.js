!function(e){"use strict";function t(){return document.getElementsByName("csrfmiddlewaretoken")[0].getAttribute("value")}function a(e,a){if("get"===a.toLowerCase())return{method:a.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":t()}};if("post"===a.toLowerCase()){const n=e?JSON.stringify(e):"";return{method:a.toUpperCase(),body:n,headers:{"Content-Type":"application/json","X-CSRFToken":t()}}}throw Error("Method ".concat(a," not implemented yet."))}let n;async function i(){await Promise.all([r(),o()]),n.teachers.forEach(e=>{!async function(e){const t=a({},"get"),i="".concat(n.urls.getTeacherInformation,"?id=").concat(e.id),r=await fetch(i,t),o=await r.json();e.username=o.username,e.lastLogin=o.last_login?new Date(o.last_login):null,e.reputations=o.reputations.map(e=>({name:e.name,reputation:e.reputation})),function(e){var t;$("#teacher-list").DataTable().row.add([e.username,e.lastLogin?(t=e.lastLogin,t.toLocaleString("en-ca",{year:"numeric"})+"-"+t.toLocaleString("en-ca",{month:"2-digit"})+"-"+t.toLocaleString("en-ca",{day:"2-digit"})+" "+t.toLocaleString("en-ca",{hour:"2-digit",hour12:!1})+":"+t.toLocaleString("en-ca",{minute:"2-digit"})):"",...n.criteria.map(t=>e.reputations.find(e=>e.name==t.name).reputation)]).draw(!1)}(e)}(e)})}async function r(){const e=a({},"get"),t=await fetch(n.urls.getCriteria,e),i=await t.json();n.criteria=i.criteria.map(e=>({name:e.name,full_name:e.full_name,description:e.description})),function(){!function(){const e=document.querySelector("#teacher-list thead tr");n.criteria.forEach(t=>{const a=document.createElement("th");a.title=t.description,a.textContent=t.full_name,e.appendChild(a)})}();const e=document.getElementById("teacher-list");$(e).DataTable({pageLength:50,dom:'<"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-tl ui-corner-tr"Bf>t<"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix ui-corner-tl ui-corner-tr"ip>',buttons:["csv","colvis"]}),e.removeAttribute("hidden")}()}async function o(){const e=a({},"get"),t=await fetch(n.urls.getTeachers,e),i=await t.json();n.teachers=i.teachers.map(e=>({id:e,username:null,lastLogin:null,reputations:[]}))}e.initTable=async function(e){!function(e){n={criteria:[],teachers:[],urls:{getCriteria:e.getCriteria,getTeachers:e.getTeachers,getTeacherInformation:e.getTeacherInformation}}}(e),await i()}}(this.teachers=this.teachers||{});
//# sourceMappingURL=teachers.min.js.map
