{% extends 'teacher/base.html' %}

{% load static %}

{% block apps %}
  {{ block.super }}
  <script
    src="{% static 'components/js/build/updateGroup.min.js' %}"
    defer="true"
  ></script>
{% endblock %}

{% block injected_apps %}
  {{ block.super }}
  <div id="group-update-app"></div>
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script nonce="{{ request.csp_nonce }}">
    window.addEventListener("load", function (){
      const groupUpdateApp = () => {
        return updateGroup.h(updateGroup.App, {
          gettext: gettext,
          nonce : "{{ request.csp_nonce }}",
          group: {
            name: "{{ object.name }}",
            title: "{{ object.title }}",
            semester: "{{ object.semester }}",
            year: "{{ object.year }}",
          },
          urls: {
            group: "{% url 'REST:teacher-group-detail' object.hash %}"
          }
        });
      };
      updateGroup.render(
        groupUpdateApp(),
        document.getElementById("group-update-app")
      );
    });
  </script>
{% endblock %}
