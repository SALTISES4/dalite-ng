{"version":3,"file":"thread.min.js","sources":["peerinst/static/pinax/forums/js/thread.js"],"sourcesContent":["export function showReplyForm(id) {\n  $(\"#\" + id).toggle();\n}\n\n// Setup ajax call and attach a submit handler to the form\n$.ajaxSetup({\n  beforeSend: function(xhr, settings) {\n    if (!bundle.csrfSafeMethod(settings.type) && !this.crossDomain) {\n      xhr.setRequestHeader(\"X-CSRFToken\", bundle.getCookie(\"csrftoken\"));\n    }\n  },\n});\n\nexport function toggleFollow(el, subscribe, unsubscribe) {\n  console.info(el.getAttribute(\"aria-pressed\") == \"false\");\n  if (el.getAttribute(\"aria-pressed\") == \"false\") {\n    console.info(\"Subscribing to thread\");\n    const posting = $.post(subscribe);\n    posting.done(function(data) {\n      //console.info(data);\n    });\n  } else {\n    console.info(\"Unsubscribing from thread\");\n    const posting = $.post(unsubscribe);\n    posting.done(function(data) {\n      //console.info(data);\n    });\n  }\n}\n\nfunction initFollows() {\n  [].forEach.call(document.querySelectorAll(\".mdc-icon-toggle\"), el => {\n    bundle.iconToggle.MDCIconToggle.attachTo(el);\n  });\n}\n\ninitFollows();\n\nfunction sizeEmbeddedContent() {\n  document.querySelectorAll(\".embedded-object\").forEach(function(el) {\n    const aspectRatio = +el.getAttribute(\"width\") / +el.getAttribute(\"height\");\n    const w = Math.min(\n      700,\n      document.querySelector(\"section\").offsetWidth - 30,\n    );\n    el.setAttribute(\"width\", w);\n    el.setAttribute(\"height\", w / aspectRatio);\n  });\n}\n\nsizeEmbeddedContent();\n\nwindow.addEventListener(\"resize\", sizeEmbeddedContent);\n"],"names":["showReplyForm","id","$","toggle","ajaxSetup","beforeSend","xhr","settings","bundle","csrfSafeMethod","type","crossDomain","setRequestHeader","getCookie","toggleFollow","el","subscribe","unsubscribe","console","info","getAttribute","posting","post","done","data","initFollows","forEach","call","document","querySelectorAll","iconToggle","MDCIconToggle","attachTo","sizeEmbeddedContent","aspectRatio","w","Math","min","querySelector","offsetWidth","setAttribute","window","addEventListener"],"mappings":";;;AAAO,SAASA,aAAT,CAAuBC,EAAvB,EAA2B;EAChCC,CAAC,CAAC,MAAMD,EAAP,CAAD,CAAYE,MAAZ;;;AAIFD,CAAC,CAACE,SAAF,CAAY;EACVC,UAAU,EAAE,oBAASC,GAAT,EAAcC,QAAd,EAAwB;QAC9B,CAACC,MAAM,CAACC,cAAP,CAAsBF,QAAQ,CAACG,IAA/B,CAAD,IAAyC,CAAC,KAAKC,WAAnD,EAAgE;MAC9DL,GAAG,CAACM,gBAAJ,CAAqB,aAArB,EAAoCJ,MAAM,CAACK,SAAP,CAAiB,WAAjB,CAApC;;;CAHN;AAQA,AAAO,SAASC,YAAT,CAAsBC,EAAtB,EAA0BC,SAA1B,EAAqCC,WAArC,EAAkD;EACvDC,OAAO,CAACC,IAAR,CAAaJ,EAAE,CAACK,YAAH,CAAgB,cAAhB,KAAmC,OAAhD;;MACIL,EAAE,CAACK,YAAH,CAAgB,cAAhB,KAAmC,OAAvC,EAAgD;IAC9CF,OAAO,CAACC,IAAR,CAAa,uBAAb;QACME,OAAO,GAAGnB,CAAC,CAACoB,IAAF,CAAON,SAAP,CAAhB;IACAK,OAAO,CAACE,IAAR,CAAa,UAASC,IAAT,EAAe;KAA5B;GAHF,MAMO;IACLN,OAAO,CAACC,IAAR,CAAa,2BAAb;;QACME,QAAO,GAAGnB,CAAC,CAACoB,IAAF,CAAOL,WAAP,CAAhB;;IACAI,QAAO,CAACE,IAAR,CAAa,UAASC,IAAT,EAAe;KAA5B;;;;AAMJ,SAASC,WAAT,GAAuB;KAClBC,OAAH,CAAWC,IAAX,CAAgBC,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,CAAhB,EAA+D,UAAAd,EAAE,EAAI;IACnEP,MAAM,CAACsB,UAAP,CAAkBC,aAAlB,CAAgCC,QAAhC,CAAyCjB,EAAzC;GADF;;;AAKFU,WAAW;;AAEX,SAASQ,mBAAT,GAA+B;EAC7BL,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8CH,OAA9C,CAAsD,UAASX,EAAT,EAAa;QAC3DmB,WAAW,GAAG,CAACnB,EAAE,CAACK,YAAH,CAAgB,OAAhB,CAAD,GAA4B,CAACL,EAAE,CAACK,YAAH,CAAgB,QAAhB,CAAjD;QACMe,CAAC,GAAGC,IAAI,CAACC,GAAL,CACR,GADQ,EAERT,QAAQ,CAACU,aAAT,CAAuB,SAAvB,EAAkCC,WAAlC,GAAgD,EAFxC,CAAV;IAIAxB,EAAE,CAACyB,YAAH,CAAgB,OAAhB,EAAyBL,CAAzB;IACApB,EAAE,CAACyB,YAAH,CAAgB,QAAhB,EAA0BL,CAAC,GAAGD,WAA9B;GAPF;;;AAWFD,mBAAmB;AAEnBQ,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCT,mBAAlC;;;;;;;;;;;","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9qc3VtbmVyL0RldmVsb3BtZW50L01ZREFMSVRFL2RhbGl0ZS1uZy9wZWVyaW5zdC9zdGF0aWMvcGluYXgvZm9ydW1zL2pzL3RocmVhZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc2hvd1JlcGx5Rm9ybShpZCkge1xuICAkKFwiI1wiICsgaWQpLnRvZ2dsZSgpO1xufVxuXG4vLyBTZXR1cCBhamF4IGNhbGwgYW5kIGF0dGFjaCBhIHN1Ym1pdCBoYW5kbGVyIHRvIHRoZSBmb3JtXG4kLmFqYXhTZXR1cCh7XG4gIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKHhociwgc2V0dGluZ3MpIHtcbiAgICBpZiAoIWJ1bmRsZS5jc3JmU2FmZU1ldGhvZChzZXR0aW5ncy50eXBlKSAmJiAhdGhpcy5jcm9zc0RvbWFpbikge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJYLUNTUkZUb2tlblwiLCBidW5kbGUuZ2V0Q29va2llKFwiY3NyZnRva2VuXCIpKTtcbiAgICB9XG4gIH0sXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUZvbGxvdyhlbCwgc3Vic2NyaWJlLCB1bnN1YnNjcmliZSkge1xuICBjb25zb2xlLmluZm8oZWwuZ2V0QXR0cmlidXRlKFwiYXJpYS1wcmVzc2VkXCIpID09IFwiZmFsc2VcIik7XG4gIGlmIChlbC5nZXRBdHRyaWJ1dGUoXCJhcmlhLXByZXNzZWRcIikgPT0gXCJmYWxzZVwiKSB7XG4gICAgY29uc29sZS5pbmZvKFwiU3Vic2NyaWJpbmcgdG8gdGhyZWFkXCIpO1xuICAgIGNvbnN0IHBvc3RpbmcgPSAkLnBvc3Qoc3Vic2NyaWJlKTtcbiAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgLy9jb25zb2xlLmluZm8oZGF0YSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5pbmZvKFwiVW5zdWJzY3JpYmluZyBmcm9tIHRocmVhZFwiKTtcbiAgICBjb25zdCBwb3N0aW5nID0gJC5wb3N0KHVuc3Vic2NyaWJlKTtcbiAgICBwb3N0aW5nLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgLy9jb25zb2xlLmluZm8oZGF0YSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5pdEZvbGxvd3MoKSB7XG4gIFtdLmZvckVhY2guY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1kYy1pY29uLXRvZ2dsZVwiKSwgZWwgPT4ge1xuICAgIGJ1bmRsZS5pY29uVG9nZ2xlLk1EQ0ljb25Ub2dnbGUuYXR0YWNoVG8oZWwpO1xuICB9KTtcbn1cblxuaW5pdEZvbGxvd3MoKTtcblxuZnVuY3Rpb24gc2l6ZUVtYmVkZGVkQ29udGVudCgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lbWJlZGRlZC1vYmplY3RcIikuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gK2VsLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpIC8gK2VsLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtcbiAgICBjb25zdCB3ID0gTWF0aC5taW4oXG4gICAgICA3MDAsXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic2VjdGlvblwiKS5vZmZzZXRXaWR0aCAtIDMwLFxuICAgICk7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgdyk7XG4gICAgZWwuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIHcgLyBhc3BlY3RSYXRpbyk7XG4gIH0pO1xufVxuXG5zaXplRW1iZWRkZWRDb250ZW50KCk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHNpemVFbWJlZGRlZENvbnRlbnQpO1xuIl0sIm5hbWVzIjpbInNob3dSZXBseUZvcm0iLCJpZCIsIiQiLCJ0b2dnbGUiLCJhamF4U2V0dXAiLCJiZWZvcmVTZW5kIiwieGhyIiwic2V0dGluZ3MiLCJidW5kbGUiLCJjc3JmU2FmZU1ldGhvZCIsInR5cGUiLCJjcm9zc0RvbWFpbiIsInNldFJlcXVlc3RIZWFkZXIiLCJnZXRDb29raWUiLCJ0b2dnbGVGb2xsb3ciLCJlbCIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwiY29uc29sZSIsImluZm8iLCJnZXRBdHRyaWJ1dGUiLCJwb3N0aW5nIiwicG9zdCIsImRvbmUiLCJkYXRhIiwiaW5pdEZvbGxvd3MiLCJmb3JFYWNoIiwiY2FsbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImljb25Ub2dnbGUiLCJNRENJY29uVG9nZ2xlIiwiYXR0YWNoVG8iLCJzaXplRW1iZWRkZWRDb250ZW50IiwiYXNwZWN0UmF0aW8iLCJ3IiwiTWF0aCIsIm1pbiIsInF1ZXJ5U2VsZWN0b3IiLCJvZmZzZXRXaWR0aCIsInNldEF0dHJpYnV0ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI7OztBQUFPLFNBQVNBLGFBQVQsQ0FBdUJDLEVBQXZCLEVBQTJCO0VBQ2hDQyxDQUFDLENBQUMsTUFBTUQsRUFBUCxDQUFELENBQVlFLE1BQVo7OztBQUlGRCxDQUFDLENBQUNFLFNBQUYsQ0FBWTtFQUNWQyxVQUFVLEVBQUUsb0JBQVNDLEdBQVQsRUFBY0MsUUFBZCxFQUF3QjtRQUM5QixDQUFDQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JGLFFBQVEsQ0FBQ0csSUFBL0IsQ0FBRCxJQUF5QyxDQUFDLEtBQUtDLFdBQW5ELEVBQWdFO01BQzlETCxHQUFHLENBQUNNLGdCQUFKLENBQXFCLGFBQXJCLEVBQW9DSixNQUFNLENBQUNLLFNBQVAsQ0FBaUIsV0FBakIsQ0FBcEM7OztDQUhOO0FBUUEsQUFBTyxTQUFTQyxZQUFULENBQXNCQyxFQUF0QixFQUEwQkMsU0FBMUIsRUFBcUNDLFdBQXJDLEVBQWtEO0VBQ3ZEQyxPQUFPLENBQUNDLElBQVIsQ0FBYUosRUFBRSxDQUFDSyxZQUFILENBQWdCLGNBQWhCLEtBQW1DLE9BQWhEOztNQUNJTCxFQUFFLENBQUNLLFlBQUgsQ0FBZ0IsY0FBaEIsS0FBbUMsT0FBdkMsRUFBZ0Q7SUFDOUNGLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLHVCQUFiO1FBQ01FLE9BQU8sR0FBR25CLENBQUMsQ0FBQ29CLElBQUYsQ0FBT04sU0FBUCxDQUFoQjtJQUNBSyxPQUFPLENBQUNFLElBQVIsQ0FBYSxVQUFTQyxJQUFULEVBQWU7S0FBNUI7R0FIRixNQU1PO0lBQ0xOLE9BQU8sQ0FBQ0MsSUFBUixDQUFhLDJCQUFiOztRQUNNRSxRQUFPLEdBQUduQixDQUFDLENBQUNvQixJQUFGLENBQU9MLFdBQVAsQ0FBaEI7O0lBQ0FJLFFBQU8sQ0FBQ0UsSUFBUixDQUFhLFVBQVNDLElBQVQsRUFBZTtLQUE1Qjs7OztBQU1KLFNBQVNDLFdBQVQsR0FBdUI7S0FDbEJDLE9BQUgsQ0FBV0MsSUFBWCxDQUFnQkMsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixrQkFBMUIsQ0FBaEIsRUFBK0QsVUFBQWQsRUFBRSxFQUFJO0lBQ25FUCxNQUFNLENBQUNzQixVQUFQLENBQWtCQyxhQUFsQixDQUFnQ0MsUUFBaEMsQ0FBeUNqQixFQUF6QztHQURGOzs7QUFLRlUsV0FBVzs7QUFFWCxTQUFTUSxtQkFBVCxHQUErQjtFQUM3QkwsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOENILE9BQTlDLENBQXNELFVBQVNYLEVBQVQsRUFBYTtRQUMzRG1CLFdBQVcsR0FBRyxDQUFDbkIsRUFBRSxDQUFDSyxZQUFILENBQWdCLE9BQWhCLENBQUQsR0FBNEIsQ0FBQ0wsRUFBRSxDQUFDSyxZQUFILENBQWdCLFFBQWhCLENBQWpEO1FBQ01lLENBQUMsR0FBR0MsSUFBSSxDQUFDQyxHQUFMLENBQ1IsR0FEUSxFQUVSVCxRQUFRLENBQUNVLGFBQVQsQ0FBdUIsU0FBdkIsRUFBa0NDLFdBQWxDLEdBQWdELEVBRnhDLENBQVY7SUFJQXhCLEVBQUUsQ0FBQ3lCLFlBQUgsQ0FBZ0IsT0FBaEIsRUFBeUJMLENBQXpCO0lBQ0FwQixFQUFFLENBQUN5QixZQUFILENBQWdCLFFBQWhCLEVBQTBCTCxDQUFDLEdBQUdELFdBQTlCO0dBUEY7OztBQVdGRCxtQkFBbUI7QUFFbkJRLE1BQU0sQ0FBQ0MsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0NULG1CQUFsQzs7Ozs7Ozs7Ozs7In0="}