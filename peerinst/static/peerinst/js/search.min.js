!function(e){"use strict";function t(e,t,c){const i=document.getElementsByName("csrfmiddlewaretoken")[0].getAttribute("value"),s={question_id:t,assignment_identifier:c},n={method:"POST",body:JSON.stringify(s),credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":i}};fetch(e,n).then((function(e){if(e.ok){const e=document.getElementById("question-list"),c=document.getElementById(t);if($.contains(e,c))$("#"+t).remove();else{$("#"+t).find($(".update-questions-btn")).html("delete");$("#"+t).detach().appendTo($("#question-list")),$("#empty-assignment-list").remove(),$(".search-set").each((function(){$(this).find(".filter-count").empty().append($(this).find(".mdc-card:visible").length)})),$(".search-set").each((function(){$(this).find(".filter-count-total").empty().append($(this).find(".mdc-card").length)}))}}else console.log(e)})).catch((function(e){console.log(e)}))}function c(){$(".search-set").each((function(){$(this).find(".filter-count").empty().append($(this).find(".mdc-card:visible").length)}))}function i(e){$(e).hasClass("mdc-chip--selected")?$(e).removeClass("mdc-chip--selected"):$(e).addClass("mdc-chip--selected"),0==$(".mdc-chip--selected").length&&$("#reset-filters").attr("disabled",!0),$("#search_results .mdc-card").css("display","block"),$("#search_results .mdc-card").each((function(){const e=this;$("#filter-on-category").find(".mdc-chip--selected").each((function(){e.getAttribute("category").toLowerCase().indexOf(this.getAttribute("c").toLowerCase())<0&&($(e).css("display","none"),$("#reset-filters").attr("disabled",!1))})),$("#filter-on-discipline").find(".mdc-chip--selected").each((function(){e.getAttribute("discipline").slice(1,-1).toLowerCase()!=this.getAttribute("d").toLowerCase()&&($(e).css("display","none"),$("#reset-filters").attr("disabled",!1))}))})),c()}e.filter=i,e.initFavourites=function(){[].forEach.call(document.querySelectorAll(".mdc-icon-toggle"),e=>{bundle.iconToggle.MDCIconToggle.attachTo(e)})},e.processResponse=function(){bundle.toggleImages(),bundle.toggleAnswers(),$("#search-bar").attr("disabled",!1),$("#progressbar").addClass("mdc-linear-progress--closed"),$(".search-nav").each((function(e,t){t.addEventListener("click",(function(){pageNav(t.getAttribute("data-page"))}))})),$(".update-questions-btn").each((function(e,c){c.addEventListener("click",(function(){t(c.getAttribute("data-url"),c.getAttribute("data-id"),c.getAttribute("data-assignment-id"))}))})),$("#filter-on-discipline").empty(),$("#filter-on-category").empty();const e=[];$("#filter-on-discipline").append("<div class='mdc-chip-set mdc-chip-set--filter' data-mdc-auto-init='MDCChipSet'></div>"),$("#search_results .mdc-card").each((function(t){const c=this.getAttribute("discipline");!e.includes(c)&"None"!=c.slice(1,-1)&&e.push(c)})),e.sort();for(let t=0;t<e.length;t++)$("#filter-on-discipline .mdc-chip-set").append("<div d="+e[t]+" class='mdc-chip' tabindex='0' data-mdc-auto-init='MDCChip'><div class='mdc-chip__checkmark' ><svg class='mdc-chip__checkmark-svg' viewBox='-2 -3 30 30'><path class='mdc-chip__checkmark-path' fill='none' stroke='black'd='M1.73,12.91 8.1,19.28 22.79,4.59'/></svg></div><div class='mdc-chip__text'>"+e[t].slice(1,-1)+"</div></div>");$("#filter-on-discipline .mdc-chip").each((function(e,t){t.addEventListener("click",(function(){i(t)}))}));const c=[];$("#filter-on-category").append("<div class='mdc-chip-set mdc-chip-set--filter' data-mdc-auto-init='MDCChipSet'></div>"),$("#search_results .mdc-card").each((function(){const e=this.getAttribute("category").split(",");$(e).each((function(t){!c.includes(e[t].toLowerCase())&""!=e[t]&&c.push(e[t].toLowerCase())}))})),c.sort();for(let e=0;e<c.length;e++)$("#filter-on-category .mdc-chip-set").append("<div c="+c[e]+" class='mdc-chip' tabindex='0' data-mdc-auto-init='MDCChip'><div class='mdc-chip__checkmark' ><svg class='mdc-chip__checkmark-svg' viewBox='-2 -3 30 30'><path class='mdc-chip__checkmark-path' fill='none' stroke='black'd='M1.73,12.91 8.1,19.28 22.79,4.59'/></svg></div><div class='mdc-chip__text'>"+c[e]+"</div></div>");$("#filter-on-category .mdc-chip").each((function(e,t){t.addEventListener("click",(function(){i(t)}))})),(e.length>1||c.length>1)&&$("#search_results .mdc-card").length>1?($("#filters").css("display","block"),window.location.href="#filters"):window.location.href="#search_results",e.length>1&&$("#discipline-filters").css("display","block"),c.length>1&&$("#category-filters").css("display","block"),[].forEach.call(document.querySelectorAll(".mdc-chip"),e=>{bundle.chips.MDCChip.attachTo(e)}),[].forEach.call(document.querySelectorAll(".mdc-chip-set"),e=>{bundle.chips.MDCChipSet.attachTo(e)}),[].forEach.call(document.querySelectorAll(".mdc-icon-toggle"),e=>{bundle.iconToggle.MDCIconToggle.attachTo(e)}),[].forEach.call(document.querySelectorAll("#search_results .mdc-card"),e=>{bundle.difficulty(e.getAttribute("matrix").replace(/'/g,'"'),e.id)})},e.recountResults=c,e.reset=function(){$("#search_results .mdc-card").each((function(){$(this).css("display","block"),$(".mdc-chip").removeClass("mdc-chip--selected"),$("#reset-filters").attr("disabled",!0)})),c()},e.setupSearch=function(){$("#search_results").empty(),$("#filters").css("display","none"),$("#show-discipline-filters").css("display","none"),$("#show-category-filters").css("display","none"),$("#search-bar").attr("disabled",!0),$("#progressbar").removeClass("mdc-linear-progress--closed"),window.location.href="#progressbar"}}(this.search=this.search||{});
//# sourceMappingURL=search.min.js.map
