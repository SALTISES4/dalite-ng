!function(e){"use strict";function t(){return document.getElementsByName("csrfmiddlewaretoken")[0].getAttribute("value")}let n,o;function r(e){if(!document.getElementById("your-rationale")){e.preventDefault();const o=function(e,n){if("get"===n.toLowerCase())return{method:n.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":t()}};if("post"===n.toLowerCase()){const o=e?JSON.stringify(e):"";return{method:n.toUpperCase(),body:o,headers:{"Content-Type":"application/json","X-CSRFToken":t()}}}throw Error("Method ".concat(n," not implemented yet."))}({quality:n.quality,rationale:document.querySelector("#id_rationale").value},"post");fetch(n.urls.submitUrl,o).then(e=>e.json()).then(e=>{e.failed.length?(i(e.failed,e.error_msg),document.querySelector("#answer-form").disabled=!1):(i(),document.querySelector("#answer-form").disabled=!0,document.querySelector("#submit-answer-form").submit())}).catch(e=>console.log(e))}}function i(e,t){if(e){const n=document.querySelector("#submit-answer-form");let o=document.querySelector(".errorlist");o||(o=document.createElement("div")),function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(o),o.classList.add("errorlist"),o.textContent=t;const r=document.createElement("ul");o.append(r),e.forEach(e=>{const t=document.createElement("li");t.textContent=e.name,t.title=e.description,r.append(t)}),n.parentNode.insertBefore(o,n)}else{const e=document.querySelector("errorlist");e&&e.parentNode.removeChild(e)}}function s(){!function(){const e=document.getElementById("answer-form");e&&e.addEventListener("click",e=>{r(e)})}()}function u(){o.submitAllowed=!0,l()}function l(){o.submitAllowed?document.getElementById("answer-form").disabled=!1:document.getElementById("answer-form").disabled=!0}e.initReview=function(){o={submitAllowed:!1},l(),setInterval(u,1e3*5)},e.initStart=function(e,t){!function(e,t){n={urls:{submitUrl:e},quality:t}}(e,t),s()},e.submitForm=function(){document.querySelector("#submit-answer-form").submit()}}(this.question=this.question||{});
//# sourceMappingURL=question.min.js.map
