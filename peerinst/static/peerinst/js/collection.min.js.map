{"version":3,"file":"collection.min.js","sources":["peerinst/static/peerinst/js/_ajax/utils.js","peerinst/static/peerinst/js/_collection/collection.js"],"sourcesContent":["export function getCsrfToken() {\n  const name = \"csrftoken\";\n  if (document.cookie && document.cookie !== \"\") {\n    return document.cookie\n      .split(\";\")\n      .map(c => c.trim())\n      .filter(c => c.substring(0, name.length + 1) === name + \"=\")\n      .map(c => decodeURIComponent(c.substring(name.length + 1)))[0];\n  } else {\n    return null;\n  }\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n","import { buildReq } from \"../_ajax/utils.js\";\n\nlet model;\n\nfunction initModel(followerUrl)\n{\n  model = {\n\n    urls: {\n        followerUrl:followerUrl\n    }\n  }\n}\nexport function init(followerUrl){\n\n  addEventListener();\n  initModel(followerUrl);\n\n}\nfunction addEventListener()\n{\n  document.querySelectorAll(\".follower-button\").forEach(element => element.addEventListener(\"click\", toggleFollower));\n\n\n}\nfunction toggleFollower(event){\n  const button = event.currentTarget;\n  const pk = button.getAttribute(\"data-collection-pk\");\n  const req = buildReq({pk:pk}, \"post\");\n  fetch(model.urls.followerUrl, req).then(resp => {if (resp.ok) {\n    toggleFollowerView(\n      button\n    )\n  } else {\n    console.log(resp);\n  }});\n\n}\nfunction toggleFollowerView(button){\n  if(button.classList.contains(\"follower-button--following\"))\n  {\n    button.classList.remove(\"follower-button--following\");\n  }\n  else {\n    button.classList.add(\"follower-button--following\");\n  }\n}\n"],"names":["getCsrfToken","name","document","cookie","split","map","c","trim","filter","substring","length","decodeURIComponent","buildReq","data","method","toLowerCase","toUpperCase","headers","body","JSON","stringify","Error","model","initModel","followerUrl","urls","init","addEventListener","querySelectorAll","forEach","element","toggleFollower","event","button","currentTarget","pk","getAttribute","req","fetch","then","resp","ok","toggleFollowerView","console","log","classList","contains","remove","add"],"mappings":";;;AAAO,SAASA,YAAT,GAAwB;MACvBC,IAAI,GAAG,WAAb;;MACIC,QAAQ,CAACC,MAAT,IAAmBD,QAAQ,CAACC,MAAT,KAAoB,EAA3C,EAA+C;WACtCD,QAAQ,CAACC,MAAT,CACJC,KADI,CACE,GADF,EAEJC,GAFI,CAEA,UAAAC,CAAC;aAAIA,CAAC,CAACC,IAAF,EAAJ;KAFD,EAGJC,MAHI,CAGG,UAAAF,CAAC;aAAIA,CAAC,CAACG,SAAF,CAAY,CAAZ,EAAeR,IAAI,CAACS,MAAL,GAAc,CAA7B,MAAoCT,IAAI,GAAG,GAA/C;KAHJ,EAIJI,GAJI,CAIA,UAAAC,CAAC;aAAIK,kBAAkB,CAACL,CAAC,CAACG,SAAF,CAAYR,IAAI,CAACS,MAAL,GAAc,CAA1B,CAAD,CAAtB;KAJD,EAIuD,CAJvD,CAAP;GADF,MAMO;WACE,IAAP;;;AAIJ,AAAO,SAASE,QAAT,CAAkBC,IAAlB,EAAwBC,MAAxB,EAAgC;MACjCA,MAAM,CAACC,WAAP,OAAyB,KAA7B,EAAoC;WAC3B;MACLD,MAAM,EAAEA,MAAM,CAACE,WAAP,EADH;MAELC,OAAO,EAAE;wBACS,kBADT;uBAEQjB,YAAY;;KAJ/B;GADF,MAQO,IAAIc,MAAM,CAACC,WAAP,OAAyB,MAA7B,EAAqC;QACpCG,IAAI,GAAGL,IAAI,GAAGM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAH,GAA0B,EAA3C;WACO;MACLC,MAAM,EAAEA,MAAM,CAACE,WAAP,EADH;MAELE,IAAI,EAAEA,IAFD;MAGLD,OAAO,EAAE;wBACS,kBADT;uBAEQjB,YAAY;;KAL/B;GAFK,MAUA;UACCqB,KAAK,kBAAWP,MAAX,2BAAX;;;;AC/BJ,IAAIQ,KAAJ;;AAEA,SAASC,SAAT,CAAmBC,WAAnB,EACA;EACEF,KAAK,GAAG;IAENG,IAAI,EAAE;MACFD,WAAW,EAACA;;GAHlB;;;AAOF,AAAO,SAASE,IAAT,CAAcF,WAAd,EAA0B;EAE/BG,gBAAgB;EAChBJ,SAAS,CAACC,WAAD,CAAT;;;AAGF,SAASG,gBAAT,GACA;EACEzB,QAAQ,CAAC0B,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,UAAAC,OAAO;WAAIA,OAAO,CAACH,gBAAR,CAAyB,OAAzB,EAAkCI,cAAlC,CAAJ;GAA7D;;;AAIF,SAASA,cAAT,CAAwBC,KAAxB,EAA8B;MACtBC,MAAM,GAAGD,KAAK,CAACE,aAArB;MACMC,EAAE,GAAGF,MAAM,CAACG,YAAP,CAAoB,oBAApB,CAAX;MACMC,GAAG,GAAGzB,QAAQ,CAAC;IAACuB,EAAE,EAACA;GAAL,EAAU,MAAV,CAApB;EACAG,KAAK,CAAChB,KAAK,CAACG,IAAN,CAAWD,WAAZ,EAAyBa,GAAzB,CAAL,CAAmCE,IAAnC,CAAwC,UAAAC,IAAI,EAAI;QAAKA,IAAI,CAACC,EAAT,EAAa;MAC5DC,kBAAkB,CAChBT,MADgB,CAAlB;KAD+C,MAI1C;MACLU,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;GALF;;;AASF,SAASE,kBAAT,CAA4BT,MAA5B,EAAmC;MAC9BA,MAAM,CAACY,SAAP,CAAiBC,QAAjB,CAA0B,4BAA1B,CAAH,EACA;IACEb,MAAM,CAACY,SAAP,CAAiBE,MAAjB,CAAwB,4BAAxB;GAFF,MAIK;IACHd,MAAM,CAACY,SAAP,CAAiBG,GAAjB,CAAqB,4BAArB;;;;;;;;;;;;","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYWhpbGdlcnQvRGVza3RvcC9EZXZlbG9wbWVudC9teWRhbGl0ZSBwcm9qZWN0L2RhbGl0ZS1uZy9wZWVyaW5zdC9zdGF0aWMvcGVlcmluc3QvanMvX2FqYXgvdXRpbHMuanMiLCIvVXNlcnMvYWFoaWxnZXJ0L0Rlc2t0b3AvRGV2ZWxvcG1lbnQvbXlkYWxpdGUgcHJvamVjdC9kYWxpdGUtbmcvcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL19jb2xsZWN0aW9uL2NvbGxlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGdldENzcmZUb2tlbigpIHtcbiAgY29uc3QgbmFtZSA9IFwiY3NyZnRva2VuXCI7XG4gIGlmIChkb2N1bWVudC5jb29raWUgJiYgZG9jdW1lbnQuY29va2llICE9PSBcIlwiKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZVxuICAgICAgLnNwbGl0KFwiO1wiKVxuICAgICAgLm1hcChjID0+IGMudHJpbSgpKVxuICAgICAgLmZpbHRlcihjID0+IGMuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoICsgMSkgPT09IG5hbWUgKyBcIj1cIilcbiAgICAgIC5tYXAoYyA9PiBkZWNvZGVVUklDb21wb25lbnQoYy5zdWJzdHJpbmcobmFtZS5sZW5ndGggKyAxKSkpWzBdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFJlcShkYXRhLCBtZXRob2QpIHtcbiAgaWYgKG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSBcImdldFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIlgtQ1NSRlRva2VuXCI6IGdldENzcmZUb2tlbigpLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2UgaWYgKG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSBcInBvc3RcIikge1xuICAgIGNvbnN0IGJvZHkgPSBkYXRhID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiBcIlwiO1xuICAgIHJldHVybiB7XG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogZ2V0Q3NyZlRva2VuKCksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgRXJyb3IoYE1ldGhvZCAke21ldGhvZH0gbm90IGltcGxlbWVudGVkIHlldC5gKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgYnVpbGRSZXEgfSBmcm9tIFwiLi4vX2FqYXgvdXRpbHMuanNcIjtcblxubGV0IG1vZGVsO1xuXG5mdW5jdGlvbiBpbml0TW9kZWwoZm9sbG93ZXJVcmwpXG57XG4gIG1vZGVsID0ge1xuXG4gICAgdXJsczoge1xuICAgICAgICBmb2xsb3dlclVybDpmb2xsb3dlclVybFxuICAgIH1cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoZm9sbG93ZXJVcmwpe1xuXG4gIGFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgaW5pdE1vZGVsKGZvbGxvd2VyVXJsKTtcblxufVxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpXG57XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9sbG93ZXItYnV0dG9uXCIpLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0b2dnbGVGb2xsb3dlcikpO1xuXG5cbn1cbmZ1bmN0aW9uIHRvZ2dsZUZvbGxvd2VyKGV2ZW50KXtcbiAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgY29uc3QgcGsgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiZGF0YS1jb2xsZWN0aW9uLXBrXCIpO1xuICBjb25zdCByZXEgPSBidWlsZFJlcSh7cGs6cGt9LCBcInBvc3RcIik7XG4gIGZldGNoKG1vZGVsLnVybHMuZm9sbG93ZXJVcmwsIHJlcSkudGhlbihyZXNwID0+IHtpZiAocmVzcC5vaykge1xuICAgIHRvZ2dsZUZvbGxvd2VyVmlldyhcbiAgICAgIGJ1dHRvblxuICAgIClcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhyZXNwKTtcbiAgfX0pO1xuXG59XG5mdW5jdGlvbiB0b2dnbGVGb2xsb3dlclZpZXcoYnV0dG9uKXtcbiAgaWYoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImZvbGxvd2VyLWJ1dHRvbi0tZm9sbG93aW5nXCIpKVxuICB7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJmb2xsb3dlci1idXR0b24tLWZvbGxvd2luZ1wiKTtcbiAgfVxuICBlbHNlIHtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImZvbGxvd2VyLWJ1dHRvbi0tZm9sbG93aW5nXCIpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0Q3NyZlRva2VuIiwibmFtZSIsImRvY3VtZW50IiwiY29va2llIiwic3BsaXQiLCJtYXAiLCJjIiwidHJpbSIsImZpbHRlciIsInN1YnN0cmluZyIsImxlbmd0aCIsImRlY29kZVVSSUNvbXBvbmVudCIsImJ1aWxkUmVxIiwiZGF0YSIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJFcnJvciIsIm1vZGVsIiwiaW5pdE1vZGVsIiwiZm9sbG93ZXJVcmwiLCJ1cmxzIiwiaW5pdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJ0b2dnbGVGb2xsb3dlciIsImV2ZW50IiwiYnV0dG9uIiwiY3VycmVudFRhcmdldCIsInBrIiwiZ2V0QXR0cmlidXRlIiwicmVxIiwiZmV0Y2giLCJ0aGVuIiwicmVzcCIsIm9rIiwidG9nZ2xlRm9sbG93ZXJWaWV3IiwiY29uc29sZSIsImxvZyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIl0sIm1hcHBpbmdzIjoiOzs7QUFBTyxTQUFTQSxZQUFULEdBQXdCO01BQ3ZCQyxJQUFJLEdBQUcsV0FBYjs7TUFDSUMsUUFBUSxDQUFDQyxNQUFULElBQW1CRCxRQUFRLENBQUNDLE1BQVQsS0FBb0IsRUFBM0MsRUFBK0M7V0FDdENELFFBQVEsQ0FBQ0MsTUFBVCxDQUNKQyxLQURJLENBQ0UsR0FERixFQUVKQyxHQUZJLENBRUEsVUFBQUMsQ0FBQzthQUFJQSxDQUFDLENBQUNDLElBQUYsRUFBSjtLQUZELEVBR0pDLE1BSEksQ0FHRyxVQUFBRixDQUFDO2FBQUlBLENBQUMsQ0FBQ0csU0FBRixDQUFZLENBQVosRUFBZVIsSUFBSSxDQUFDUyxNQUFMLEdBQWMsQ0FBN0IsTUFBb0NULElBQUksR0FBRyxHQUEvQztLQUhKLEVBSUpJLEdBSkksQ0FJQSxVQUFBQyxDQUFDO2FBQUlLLGtCQUFrQixDQUFDTCxDQUFDLENBQUNHLFNBQUYsQ0FBWVIsSUFBSSxDQUFDUyxNQUFMLEdBQWMsQ0FBMUIsQ0FBRCxDQUF0QjtLQUpELEVBSXVELENBSnZELENBQVA7R0FERixNQU1PO1dBQ0UsSUFBUDs7O0FBSUosQUFBTyxTQUFTRSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsTUFBeEIsRUFBZ0M7TUFDakNBLE1BQU0sQ0FBQ0MsV0FBUCxPQUF5QixLQUE3QixFQUFvQztXQUMzQjtNQUNMRCxNQUFNLEVBQUVBLE1BQU0sQ0FBQ0UsV0FBUCxFQURIO01BRUxDLE9BQU8sRUFBRTt3QkFDUyxrQkFEVDt1QkFFUWpCLFlBQVk7O0tBSi9CO0dBREYsTUFRTyxJQUFJYyxNQUFNLENBQUNDLFdBQVAsT0FBeUIsTUFBN0IsRUFBcUM7UUFDcENHLElBQUksR0FBR0wsSUFBSSxHQUFHTSxJQUFJLENBQUNDLFNBQUwsQ0FBZVAsSUFBZixDQUFILEdBQTBCLEVBQTNDO1dBQ087TUFDTEMsTUFBTSxFQUFFQSxNQUFNLENBQUNFLFdBQVAsRUFESDtNQUVMRSxJQUFJLEVBQUVBLElBRkQ7TUFHTEQsT0FBTyxFQUFFO3dCQUNTLGtCQURUO3VCQUVRakIsWUFBWTs7S0FML0I7R0FGSyxNQVVBO1VBQ0NxQixLQUFLLGtCQUFXUCxNQUFYLDJCQUFYOzs7O0FDL0JKLElBQUlRLEtBQUo7O0FBRUEsU0FBU0MsU0FBVCxDQUFtQkMsV0FBbkIsRUFDQTtFQUNFRixLQUFLLEdBQUc7SUFFTkcsSUFBSSxFQUFFO01BQ0ZELFdBQVcsRUFBQ0E7O0dBSGxCOzs7QUFPRixBQUFPLFNBQVNFLElBQVQsQ0FBY0YsV0FBZCxFQUEwQjtFQUUvQkcsZ0JBQWdCO0VBQ2hCSixTQUFTLENBQUNDLFdBQUQsQ0FBVDs7O0FBR0YsU0FBU0csZ0JBQVQsR0FDQTtFQUNFekIsUUFBUSxDQUFDMEIsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDQyxPQUE5QyxDQUFzRCxVQUFBQyxPQUFPO1dBQUlBLE9BQU8sQ0FBQ0gsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0NJLGNBQWxDLENBQUo7R0FBN0Q7OztBQUlGLFNBQVNBLGNBQVQsQ0FBd0JDLEtBQXhCLEVBQThCO01BQ3RCQyxNQUFNLEdBQUdELEtBQUssQ0FBQ0UsYUFBckI7TUFDTUMsRUFBRSxHQUFHRixNQUFNLENBQUNHLFlBQVAsQ0FBb0Isb0JBQXBCLENBQVg7TUFDTUMsR0FBRyxHQUFHekIsUUFBUSxDQUFDO0lBQUN1QixFQUFFLEVBQUNBO0dBQUwsRUFBVSxNQUFWLENBQXBCO0VBQ0FHLEtBQUssQ0FBQ2hCLEtBQUssQ0FBQ0csSUFBTixDQUFXRCxXQUFaLEVBQXlCYSxHQUF6QixDQUFMLENBQW1DRSxJQUFuQyxDQUF3QyxVQUFBQyxJQUFJLEVBQUk7UUFBS0EsSUFBSSxDQUFDQyxFQUFULEVBQWE7TUFDNURDLGtCQUFrQixDQUNoQlQsTUFEZ0IsQ0FBbEI7S0FEK0MsTUFJMUM7TUFDTFUsT0FBTyxDQUFDQyxHQUFSLENBQVlKLElBQVo7O0dBTEY7OztBQVNGLFNBQVNFLGtCQUFULENBQTRCVCxNQUE1QixFQUFtQztNQUM5QkEsTUFBTSxDQUFDWSxTQUFQLENBQWlCQyxRQUFqQixDQUEwQiw0QkFBMUIsQ0FBSCxFQUNBO0lBQ0ViLE1BQU0sQ0FBQ1ksU0FBUCxDQUFpQkUsTUFBakIsQ0FBd0IsNEJBQXhCO0dBRkYsTUFJSztJQUNIZCxNQUFNLENBQUNZLFNBQVAsQ0FBaUJHLEdBQWpCLENBQXFCLDRCQUFyQjs7Ozs7Ozs7Ozs7OyJ9"}