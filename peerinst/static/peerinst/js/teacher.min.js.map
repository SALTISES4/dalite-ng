{"version":3,"file":"teacher.min.js","sources":["ajax.js","_teacher/dashboard/messages.js","_teacher/custom_report.js","_teacher/header/notifications.js","utils.js","_teacher/gradebooks.js","_teacher/header/messages.js","_teacher/dashboard/questions.js","_teacher/dashboard/rationales.js","_teacher/questions.js","_teacher/dashboard.js","_teacher/dashboard/studentActivity.js"],"sourcesContent":["\"use strict\";\n\nexport function getCsrfToken() {\n  return document\n    .getElementsByName(\"csrfmiddlewaretoken\")[0]\n    .getAttribute(\"value\");\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n\nexport function updateAssignmentQuestionList(\n  url,\n  questionId,\n  assignmentIdentifier,\n) {\n  const token = getCsrfToken();\n  const data = {\n    question_id: questionId,\n    assignment_identifier: assignmentIdentifier,\n  };\n  const req = {\n    method: \"POST\",\n    body: JSON.stringify(data),\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"X-CSRFToken\": token,\n    },\n  };\n  fetch(url, req)\n    .then(function (resp) {\n      if (!resp.ok) {\n        console.log(resp);\n      } else {\n        // Manipulate DOM\n        const list = document.getElementById(\"question-list\");\n        const card = document.getElementById(questionId);\n        if ($.contains(list, card)) {\n          $(\"#\" + questionId).remove();\n        } else {\n          $(\"#\" + questionId)\n            .find($(\".update-questions-btn\"))\n            .html(\"delete\");\n          const q = $(\"#\" + questionId).detach();\n          q.appendTo($(\"#question-list\"));\n          $(\"#empty-assignment-list\").remove();\n          $(\".search-set\").each(function () {\n            $(this) // eslint-disable-line no-invalid-this\n              .find(\".filter-count\")\n              .empty()\n              .append($(this).find(\".mdc-card:visible\").length); // eslint-disable-line no-invalid-this,max-len\n          });\n          $(\".search-set\").each(function () {\n            $(this) // eslint-disable-line no-invalid-this\n              .find(\".filter-count-total\")\n              .empty()\n              .append($(this).find(\".mdc-card\").length); // eslint-disable-line no-invalid-this,max-len\n          });\n        }\n      }\n    })\n    .catch(function (err) {\n      console.log(err);\n    });\n}\n","import { buildReq } from \"../../ajax.js\";\n\n/*********/\n/* model */\n/*********/\n\nlet model;\n\nfunction initModel(data) {\n  model = {\n    urls: {\n      daliteMessages: data.urls.daliteMessages,\n      removeDaliteMessage: data.urls.removeDaliteMessage,\n      saltiseImage: data.urls.saltiseImage,\n    },\n    messages: [],\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nasync function update() {\n  await getMessages();\n}\n\nasync function getMessages() {\n  const req = buildReq({}, \"post\");\n\n  const resp = await fetch(model.urls.daliteMessages, req);\n  const data = await resp.json();\n  model.messages = data.messages.map((message) => ({\n    id: message.id,\n    title: message.title,\n    text: message.text,\n    colour: message.colour,\n    removable: message.removable,\n    date: message.date,\n    link: message.link,\n    authors: message.authors.map((author) => ({\n      name: author.name,\n      picture: author.picture,\n    })),\n  }));\n}\n\nasync function removeMessage(message, div) {\n  const data = {\n    id: message.id,\n  };\n  const req = buildReq(data, \"post\");\n\n  const resp = await fetch(model.urls.removeDaliteMessage, req);\n  if (resp.ok) {\n    removeMessageView(div);\n  }\n}\n\n/********/\n/* view */\n/********/\n\nfunction view() {\n  messagesView();\n}\n\nfunction messagesView() {\n  const messages = document.querySelector(\"#dalite-messages\");\n  if (model.messages.length) {\n    messages.classList.remove(\"hidden\");\n    model.messages.forEach((message) => {\n      messages.appendChild(messageView(message));\n    });\n  } else {\n    messages.remove();\n  }\n}\n\nfunction messageView(message) {\n  const container = document.createElement(\"div\");\n  container.classList.add(\"mdc-card\");\n\n  const content = document.createElement(\"div\");\n  if (message.link) {\n    content.addEventListener(\"click\", () => {\n      window.location.assign(message.link);\n    });\n    content.style.setProperty(\"cursor\", \"pointer\");\n    content.title = message.link;\n  }\n\n  const title = document.createElement(\"div\");\n  title.classList.add(\"mdc-typography--title\", \"bold\");\n  title.textContent = message.title;\n  content.appendChild(title);\n\n  const caption = document.createElement(\"div\");\n  caption.classList.add(\"mdc-typography--caption\");\n  caption.textContent = message.date;\n  content.appendChild(caption);\n\n  const text = document.createElement(\"div\");\n  text.classList.add(\"mdc-typography--body1\");\n  text.innerHTML = message.text;\n  content.appendChild(text);\n\n  container.appendChild(content);\n\n  const actions = document.createElement(\"div\");\n  actions.classList.add(\"mdc-card__actions\");\n\n  const images = document.createElement(\"div\");\n  images.classList.add(\"mdc-card__action-buttons\");\n  if (message.authors.length) {\n    const authorsContainer = document.createElement(\"div\");\n    authorsContainer.classList.add(\"dalite-message__authors\");\n    message.authors.forEach((author) => {\n      const img = document.createElement(\"img\");\n      img.classList.add(\"dalite-message__authors_author\");\n      img.title = author.name;\n      img.setAttribute(\n        \"src\",\n        author.picture ? author.picture : model.urls.saltiseImage,\n      );\n      img.setAttribute(\"alt\", `Picture of ${author.name}`);\n      authorsContainer.appendChild(img);\n    });\n    images.appendChild(authorsContainer);\n  }\n  actions.appendChild(images);\n\n  if (message.removable) {\n    const buttons = document.createElement(\"div\");\n    buttons.classList.add(\"mdc-card__action-icons\");\n    const remove = document.createElement(\"i\");\n    remove.classList.add(\n      \"mdc-icon-toggle\",\n      \"material-icons\",\n      \"mdc-theme--primary\",\n    );\n    remove.textContent = \"clear\";\n    remove.addEventListener(\"click\", async () => {\n      await removeMessage(message, container);\n    });\n    buttons.appendChild(remove);\n    actions.appendChild(buttons);\n  }\n\n  container.appendChild(actions);\n  container.style.setProperty(\"background-color\", message.colour);\n\n  return container;\n}\n\nfunction removeMessageView(node) {\n  if (node.parentNode.childElementCount == 3) {\n    node.parentNode.remove();\n  } else {\n    node.remove();\n  }\n}\n\n/********/\n/* init */\n/********/\n\nexport async function init(data) {\n  initModel(data);\n  await update();\n  view();\n}\n","import { buildReq } from \"../ajax.js\";\n/*********/\n/* model */\n/*********/\n\nlet model;\n\nfunction initModel(urls) {\n  model = {\n    urls: {\n      evaluateRationale: urls.evaluateRationale,\n    },\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction update() {\n  updateRationalesEvaluationAttributes();\n}\n\nfunction updateRationalesEvaluationAttributes() {\n  document\n    .querySelectorAll(\".custom-report__rationale\")\n    .forEach((rationale) => {\n      updateRationaleEvaluationAttributes(rationale);\n    });\n}\n\nfunction updateRationaleEvaluationAttributes(rationale) {\n  const evaluation = rationale.getAttribute(\"data-score\");\n  if (evaluation != \"\") {\n    const evaluation_ = parseInt(evaluation);\n    if (evaluation_ == 0) {\n      rationale.querySelector(\".flag\").setAttribute(\"data-flagged\", \"\");\n      rationale.querySelectorAll(\".star\").forEach((star, i) => {\n        star.removeAttribute(\"data-starred\");\n      });\n    } else {\n      rationale.querySelector(\".flag\").removeAttribute(\"data-flagged\");\n      rationale.querySelectorAll(\".star\").forEach((star, i) => {\n        if (3 - i <= evaluation_) {\n          star.setAttribute(\"data-starred\", \"\");\n        } else {\n          star.removeAttribute(\"data-starred\");\n        }\n      });\n    }\n  }\n}\n\nasync function flagRationale(flag) {\n  const rationale = flag.parentNode.parentNode;\n  const data = {\n    id: flag.parentNode.parentNode.getAttribute(\"data-id\"),\n    score: 0,\n    redirect: false,\n  };\n  const req = buildReq(data, \"post\");\n\n  const resp = await fetch(model.urls.evaluateRationale, req);\n  if (resp.ok) {\n    flag.setAttribute(\"data-flagged\", \"\");\n    rationale.setAttribute(\"data-score\", \"0\");\n  }\n  updateRationaleEvaluationAttributes(rationale);\n  rationaleEvaluationView();\n}\n\nasync function evaluateRationale(star, score) {\n  const rationale = star.parentNode.parentNode;\n  const data = {\n    id: star.parentNode.parentNode.getAttribute(\"data-id\"),\n    score: score,\n    redirect: false,\n  };\n  const req = buildReq(data, \"post\");\n\n  const resp = await fetch(model.urls.evaluateRationale, req);\n  if (resp.ok) {\n    flag.setAttribute(\"data-flagged\", \"\");\n    rationale.setAttribute(\"data-score\", `${score}`);\n  }\n  updateRationaleEvaluationAttributes(rationale);\n  rationaleEvaluationView();\n}\n\n/********/\n/* view */\n/********/\n\nfunction view() {\n  rationaleEvaluationView();\n}\n\nfunction rationaleEvaluationView() {\n  document\n    .querySelectorAll(\".custom-report__rationale__evaluation\")\n    .forEach((rationale) => {\n      toggleFlagHover(rationale.querySelector(\".flag\"));\n      rationale\n        .querySelectorAll(\".star\")\n        .forEach((star) => toggleStarHover(star));\n    });\n}\n\nfunction toggleFlagHover(flag, hovering = false) {\n  if (hovering || flag.hasAttribute(\"data-flagged\")) {\n    flag.textContent = \"flag\";\n  } else {\n    flag.textContent = \"outlined_flag\";\n  }\n}\n\nfunction toggleStarHover(star, hovering = false) {\n  const stars = [...star.parentNode.getElementsByClassName(\"star\")];\n  const idx = stars.indexOf(star);\n  stars.forEach((star, i) => {\n    if (star.hasAttribute(\"data-starred\") || (hovering && i >= idx)) {\n      star.textContent = \"star\";\n    } else {\n      star.textContent = \"star_border\";\n    }\n  });\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initListeners() {\n  addFlagListeners();\n  addEvaluateListeners();\n}\n\nfunction addFlagListeners() {\n  document\n    .querySelectorAll(\".custom-report__rationale__evaluation .flag\")\n    .forEach((flag) => {\n      flag.addEventListener(\"mouseenter\", () => toggleFlagHover(flag, true));\n      flag.addEventListener(\"mouseleave\", () => toggleFlagHover(flag, false));\n      flag.addEventListener(\"click\", () => flagRationale(flag));\n    });\n}\n\nfunction addEvaluateListeners() {\n  document\n    .querySelectorAll(\".custom-report__rationale__evaluation\")\n    .forEach((rationale) => {\n      rationale.querySelectorAll(\".star\").forEach((star, i) => {\n        star.addEventListener(\"mouseenter\", () => toggleStarHover(star, true));\n        star.addEventListener(\"mouseleave\", () =>\n          toggleStarHover(star, false),\n        );\n        star.addEventListener(\"click\", () => evaluateRationale(star, 3 - i));\n      });\n    });\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(urls) {\n  initModel(urls);\n  update();\n  view();\n  initListeners();\n}\n","// @flow\n\nimport { clear, createSvg } from \"../../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\nexport type Notification = {\n  text: string,\n  inProgress: boolean,\n  error: boolean,\n  onClick: () => Promise<void>,\n  onCloseClick: () => Promise<void>,\n};\n\nlet model: {\n  notificationsOpen: boolean,\n  notifications: Array<Notification>,\n};\n\nfunction initModel(): void {\n  model = {\n    notificationsOpen: false,\n    notifications: [],\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction toggleNotifications(): void {\n  const header = document.querySelector(\".notifications\");\n  document.querySelectorAll(\".header--togglable > *\").forEach((header_) => {\n    if (header_ != header && header_.hasAttribute(\"open\")) {\n      if (header_.shadowRoot) {\n        header_.shadowRoot\n          .querySelector(\".header__icon\")\n          .dispatchEvent(new Event(\"click\"));\n      } else {\n        header_\n          .querySelector(\".header__icon\")\n          .dispatchEvent(new Event(\"click\"));\n      }\n    }\n  });\n  model.notificationsOpen = !model.notificationsOpen;\n  notificationsView();\n}\n\nexport function updateNotifications(notifications: Array<Notification>): void {\n  model.notifications = notifications;\n  notificationsView();\n}\n\nfunction clearAll(): void {\n  model.notifications.forEach((notification) => {\n    notification.onCloseClick();\n  });\n}\n\n/********/\n/* view */\n/********/\n\nfunction view(): void {\n  notificationsView();\n}\n\nfunction notificationsView(): void {\n  const notifications = document.querySelector(\".notifications\");\n  const badge = notifications?.querySelector(\".notifications__icon__badge\");\n  const notificationsList = notifications?.querySelector(\n    \".notifications__notifications\",\n  );\n\n  if (!notifications || !badge || !notificationsList) {\n    return;\n  }\n\n  const completedNotifications = model.notifications.filter(\n    (notification) => !notification.inProgress,\n  );\n  if (completedNotifications.length > 0) {\n    badge.textContent = completedNotifications.length.toString();\n    badge.style.display = \"flex\";\n  } else {\n    badge.textContent = \"\";\n    badge.style.display = \"none\";\n  }\n\n  clear(notificationsList);\n\n  if (model.notifications.length) {\n    model.notifications.map(function (notification) {\n      notificationsList.appendChild(notificationView(notification));\n    });\n    document\n      .querySelector(\".notifications__clear-all-btn\")\n      .removeAttribute(\"hidden\");\n  } else {\n    notificationsList.appendChild(noNotificationView());\n    document\n      .querySelector(\".notifications__clear-all-btn\")\n      .setAttribute(\"hidden\", \"\");\n  }\n\n  if (model.notifications.some((notification) => notification.inProgress)) {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.add(\"notifications__spinner--loading\");\n  } else {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.remove(\"notifications__spinner--loading\");\n  }\n\n  if (model.notificationsOpen) {\n    notifications.setAttribute(\"open\", \"\");\n    notifications.classList.add(\"notifications--open\");\n  } else {\n    notifications.removeAttribute(\"open\");\n    notifications.classList.remove(\"notifications--open\");\n  }\n}\n\nfunction notificationView(notification: Notification): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.classList.add(\"notification\");\n  div.addEventListener(\"click\", notification.onClick);\n\n  if (notification.inProgress) {\n    const spinner = document.createElement(\"loading-spinner\");\n    spinner.classList.add(\"notification__spinner\");\n    div.appendChild(spinner);\n  } else {\n    let icon;\n    if (notification.error) {\n      icon = createSvg(\"error\");\n      icon.classList.add(\"notification__icon--error\");\n    } else {\n      div.classList.add(\"notification--completed\");\n      icon = createSvg(\"cloud_download\");\n    }\n    icon.classList.add(\"notification__icon\");\n    div.appendChild(icon);\n  }\n\n  const description = document.createElement(\"span\");\n  description.classList.add(\"notification__description\");\n  description.innerHTML = notification.text;\n  div.appendChild(description);\n  const remove = createSvg(\"close\");\n  remove.classList.add(\"notification__close\");\n  remove.addEventListener(\"click\", notification.onCloseClick);\n  div.appendChild(remove);\n\n  return div;\n}\n\nfunction noNotificationView(): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.textContent = \"No new notifications\";\n  return div;\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initEventListeners(): void {\n  addNotificationsOpenListener();\n  addClearAllListener();\n}\n\nfunction addNotificationsOpenListener(): void {\n  document\n    .querySelector(\".notifications\")\n    ?.addEventListener(\"click\", function (event: MouseEvent) {\n      event.stopPropagation();\n    });\n  document\n    .querySelector(\".notifications__icon\")\n    ?.addEventListener(\"click\", function (event: MouseEvent) {\n      toggleNotifications();\n    });\n  document.body?.addEventListener(\"click\", function (event: MouseEvent) {\n    if (model.notificationsOpen) {\n      event.stopPropagation();\n      toggleNotifications();\n    }\n  });\n}\n\nfunction addClearAllListener(): void {\n  document\n    .querySelector(\".notifications__clear-all-btn\")\n    ?.addEventListener(\"click\", () => clearAll());\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(): void {\n  initModel();\n  view();\n  initEventListeners();\n}\n","// @flow\n\"use strict\";\n\nexport function clear(node: HTMLElement): HTMLElement {\n  while (node.hasChildNodes()) {\n    // $FlowFixMe\n    node.removeChild(node.lastChild);\n  }\n  return node;\n}\n\nexport function formatDatetime(datetime: Date): string {\n  return (\n    datetime.toLocaleString(\"en-ca\", { year: \"numeric\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { month: \"2-digit\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { day: \"2-digit\" }) +\n    \" \" +\n    datetime.toLocaleString(\"en-ca\", { hour: \"2-digit\", hour12: false }) +\n    \":\" +\n    datetime.toLocaleString(\"en-ca\", { minute: \"2-digit\" })\n  );\n}\n\nexport function createSvg(name: string, useSprite: boolean = true): Element {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  const use = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n  use.setAttributeNS(\n    \"http://www.w3.org/1999/xlink\",\n    \"href\",\n    svgLink(name, useSprite),\n  );\n  svg.append(use);\n  return svg;\n}\n\nexport function svgLink(name: string, useSprite: boolean = true): string {\n  if (useSprite) {\n    return `#${name}`;\n  } else {\n    return (\n      window.location.protocol +\n      \"//\" +\n      window.location.host +\n      \"/static/peerinst/icons.svg#\" +\n      name\n    );\n  }\n}\n\nexport function showAlert(msg: string) {\n  const fullPageBox = document.createElement(\"div\");\n  fullPageBox.classList.add(\"alert-box__full-page\");\n  fullPageBox.addEventListener(\"click\", (event: MouseEvent) => {\n    event.stopPropagation();\n    fullPageBox.parentNode?.removeChild(fullPageBox);\n  });\n  document.body?.appendChild(fullPageBox);\n\n  const box = document.createElement(\"div\");\n  box.classList.add(\"alert-box__box\");\n  box.addEventListener(\"click\", (event: MouseEvent) =>\n    event.stopPropagation(),\n  );\n  fullPageBox.appendChild(box);\n\n  const span = document.createElement(\"span\");\n  span.classList.add(\"alert-box__msg\");\n  span.textContent = msg;\n  box.appendChild(span);\n\n  const ok = document.createElement(\"button\");\n  ok.classList.add(\"alert-box__btn\", \"mdc-button\", \"mdc-button--unelevated\");\n  ok.textContent = \"Ok\";\n  box.appendChild(ok);\n}\n\nexport function createElement(tag, text = \"\", attributes = {}) {\n  const elem = document.createElement(tag);\n  if (text) {\n    elem.textContent = text;\n  }\n  Object.entries(attributes).forEach(([key, val]) => {\n    elem.setAttribute(key, val);\n  });\n  return elem;\n}\n","// @flow\nimport { buildReq } from \"../ajax.js\";\nimport { updateNotifications } from \"./header/notifications.js\";\nimport type { Notification } from \"./header/notifications.js\";\n\n/*********/\n/* model */\n/*********/\n\nconst CHECK_EVERY = 1;\n\ntype Task = {\n  id: string,\n  description: string,\n  completed: boolean,\n  datetime: Date,\n  error: boolean,\n};\n\nlet model: {\n  urls: {\n    requestGradebook: string,\n    gradebookResult: string,\n    removeFailedGradebook: string,\n    downloadGradebook: string,\n    tasks: string,\n  },\n  tasks: Array<Task>,\n};\n\nfunction initModel(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  model = {\n    tasks: [],\n    urls: {\n      requestGradebook: urls.requestGradebook,\n      gradebookResult: urls.gradebookResult,\n      removeFailedGradebook: urls.removeFailedGradebook,\n      downloadGradebook: urls.downloadGradebook,\n      tasks: urls.tasks,\n    },\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction update(): void {\n  getTasks();\n}\n\nfunction getTasks(): void {\n  const url = model.urls.tasks;\n  const req = buildReq({}, \"get\");\n\n  fetch(url, req)\n    .then((resp) => resp.json())\n    .then((data) => {\n      initTasks(data.tasks);\n    });\n}\n\nasync function initTasks(\n  data: Array<{\n    id: string,\n    description: string,\n    completed: boolean,\n    datetime: string,\n  }>,\n): Promise<void> {\n  model.tasks = data\n    .map((task) => ({\n      id: task.id,\n      description: task.description,\n      completed: task.completed,\n      datetime: new Date(task.datetime),\n      error: false,\n    }))\n    .sort((a, b) =>\n      a.datetime > b.datetime ? -1 : a.datetime < b.datetime ? 1 : 0,\n    );\n  updateNotifications(getNotifications());\n  Promise.all(\n    model.tasks\n      .filter((task) => !task.completed)\n      .map((task) => getGradebookResult(task)),\n  );\n}\n\nasync function requestGradebook(event: MouseEvent): Promise<void> {\n  event.stopPropagation();\n  const button = event.currentTarget;\n  const groupId = button.getAttribute(\"data-group\");\n  const assignmentId = button.getAttribute(\"data-assignment\");\n\n  const data = {\n    group_id: groupId,\n    assignment_id: assignmentId,\n  };\n\n  const url = model.urls.requestGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.status === 200) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data.split(\"\\n\").slice(1).join(\"\\n\");\n    _downloadGradebook(title, csv);\n  } else if (resp.status === 201) {\n    const data = await resp.json();\n    const task = {\n      id: data.id,\n      description: data.description,\n      completed: data.completed,\n      datetime: new Date(data.datetime),\n      error: false,\n    };\n    model.tasks.unshift(task);\n    setTimeout(() => getGradebookResult(task), 0);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nasync function getGradebookResult(task: Task): Promise<void> {\n  const url = model.urls.gradebookResult;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n\n  if (resp.status == 200) {\n    task.completed = true;\n    updateNotifications(getNotifications());\n  } else if (resp.status == 202) {\n    await new Promise((resolve) =>\n      setTimeout(() => getGradebookResult(task), CHECK_EVERY * 1000),\n    );\n  } else {\n    task.completed = true;\n    task.error = true;\n    updateNotifications(getNotifications());\n  }\n}\n\nasync function removeGradebookError(task: Task): Promise<void> {\n  const url = model.urls.removeFailedGradebook;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n  if (resp.ok) {\n    model.tasks = model.tasks.filter((t) => t.id !== task.id);\n  }\n  updateNotifications(getNotifications());\n}\n\nasync function downloadGradebook(task: Task): Promise<void> {\n  const data = {\n    task_id: task.id,\n  };\n  const url = model.urls.downloadGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.ok) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data.split(\"\\n\").slice(1).join(\"\\n\");\n    _downloadGradebook(title, csv);\n    model.tasks = model.tasks.filter((t) => t.id != task.id);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nfunction _downloadGradebook(title: string, csv: string): void {\n  const a = document.createElement(\"a\");\n  a.href = `data:text/csv;charset=utf-8, ${escape(csv)}`;\n  a.target = \"_blank\";\n  a.download = title;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n}\n\nfunction getNotifications(): Array<Notification> {\n  return model.tasks.map((task) => ({\n    text: task.completed\n      ? task.error\n        ? `There was an error creating the gradebook for ${task.description}.`\n        : `The ${task.description} is ready.`\n      : `Computing the ${task.description}...`,\n    inProgress: !task.completed,\n    error: task.error,\n    onClick:\n      task.completed && !task.error\n        ? async () => await downloadGradebook(task)\n        : async () => undefined,\n    onCloseClick: async () => await removeGradebookError(task),\n  }));\n}\n\n/********/\n/* view */\n/********/\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initListeners(): void {\n  addGradebookListeners();\n}\n\nfunction addGradebookListeners(): void {\n  [...document.getElementsByClassName(\"gradebook-button\")].forEach(\n    (button) => {\n      button.addEventListener(\n        \"click\",\n        async (event: MouseEvent) => await requestGradebook(event),\n      );\n    },\n  );\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  initModel(urls);\n  update();\n  initListeners();\n}\n","// @flow\nimport { buildReq } from \"../../ajax.js\";\nimport { clear } from \"../../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\ntype Thread = {\n  id: number,\n  title: string,\n  lastReply: {\n    author: string,\n    content: string,\n  },\n  nNew: number,\n  link: string,\n};\n\ntype Message = Thread;\n\nlet model: {\n  open: boolean,\n  messages: Array<Message>,\n  urls: {\n    markReadUrl: string,\n    messagesUrl: string,\n  },\n};\n\nfunction initModel(urls: { markReadUrl: string, messagesUrl: string }): void {\n  model = {\n    open: false,\n    messages: [],\n    urls: urls,\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction update(): void {\n  getMessages();\n}\n\nfunction toggleMessages(): void {\n  const header = document.querySelector(\".messages\");\n  document.querySelectorAll(\".header--togglable > *\").forEach((header_) => {\n    if (header_ != header && header_.hasAttribute(\"open\")) {\n      if (header_.shadowRoot) {\n        header_.shadowRoot\n          .querySelector(\".header__icon\")\n          .dispatchEvent(new Event(\"click\"));\n      } else {\n        header_\n          .querySelector(\".header__icon\")\n          .dispatchEvent(new Event(\"click\"));\n      }\n    }\n  });\n  model.open = !model.open;\n  messagesView();\n}\n\nfunction getMessages(): void {\n  const url = model.urls.messagesUrl;\n  const req = buildReq({}, \"get\");\n\n  fetch(url, req)\n    .then((resp) => resp.json())\n    .then((data) => {\n      model.messages = data.threads.map((message) => ({\n        id: message.id,\n        title: message.title,\n        lastReply: {\n          author: message.last_reply.author,\n          content: message.last_reply.content,\n          date: message.last_reply.date,\n        },\n        nNew: message.n_new,\n        link: message.link,\n      }));\n      messagesView();\n    });\n}\n\nasync function markAllRead(): Promise<void> {\n  const req = buildReq({}, \"post\");\n  const resp = await fetch(model.urls.markReadUrl, req);\n  if (resp.ok) {\n    model.messages.forEach((message) => {\n      message.nNew = 0;\n    });\n  }\n  messagesView();\n}\n\nasync function markRead(\n  event: MouseEvent,\n  message: Message,\n  div: HTMLDivElement,\n): Promise<void> {\n  event.stopPropagation();\n  const req = buildReq({ id: message.id }, \"post\");\n  const resp = await fetch(model.urls.markReadUrl, req);\n  if (resp.ok) {\n    message.nNew = 0;\n  }\n  messageView(message, div);\n  badgeView();\n}\n\n/********/\n/* view */\n/********/\n\nfunction view(): void {\n  messagesView();\n}\n\nfunction messagesView(): void {\n  const messages = document.querySelector(\".messages\");\n  const badge = messages?.querySelector(\".messages__icon__badge\");\n  const messagesList = messages?.querySelector(\".messages__messages\");\n\n  if (!messages || !badge || !messagesList) {\n    return;\n  }\n\n  badgeView();\n\n  clear(messagesList);\n\n  document.querySelector(\".messages__read-all-btn\").classList.add(\"hidden\");\n\n  const nNew = model.messages.filter((message) => message.nNew > 0).length;\n  if (nNew) {\n    document\n      .querySelector(\".messages__read-all-btn\")\n      .classList.remove(\"hidden\");\n  }\n\n  if (model.messages.length) {\n    model.messages.map(function (message) {\n      messagesList.appendChild(messageView(message));\n    });\n  } else {\n    messagesList.appendChild(noMessageView());\n  }\n\n  if (model.open) {\n    messages.setAttribute(\"open\", \"\");\n    messages.classList.add(\"messages--open\");\n  } else {\n    messages.removeAttribute(\"open\");\n    messages.classList.remove(\"messages--open\");\n  }\n}\n\nfunction badgeView(): void {\n  const badge = document.querySelector(\".messages__icon__badge\");\n\n  const nNew = model.messages.filter((message) => message.nNew > 0).length;\n  if (nNew) {\n    badge.textContent = nNew.toString();\n    badge.style.display = \"flex\";\n  } else {\n    badge.textContent = \"\";\n    badge.style.display = \"none\";\n  }\n}\n\nfunction messageView(\n  message: Message,\n  div: ?HTMLDivElement = null,\n): HTMLDivElement {\n  if (div) {\n    clear(div);\n  } else {\n    div = document.createElement(\"div\");\n    div.classList.add(\"message\");\n    div.addEventListener(\"click\", () => {\n      window.location.href = message.link;\n    });\n  }\n\n  const title = document.createElement(\"div\");\n  title.classList.add(\"message__title\");\n  title.textContent = message.title;\n  div.appendChild(title);\n\n  if (message.nNew) {\n    div.classList.add(\"message--new\");\n  } else {\n    div.classList.remove(\"message--new\");\n  }\n\n  if (message.nNew) {\n    const new_ = document.createElement(\"div\");\n    new_.classList.add(\"message__new\");\n    new_.textContent = \"New!\";\n    div.appendChild(new_);\n  }\n\n  if (message.lastReply.author) {\n    const lastReply = document.createElement(\"div\");\n    lastReply.classList.add(\"message__last-reply\");\n    div.appendChild(lastReply);\n\n    const content = document.createElement(\"span\");\n    content.classList.add(\"message__last-reply__content\");\n    content.textContent = message.lastReply.content;\n    lastReply.appendChild(content);\n\n    const author = document.createElement(\"div\");\n    author.classList.add(\"message__last-reply__author\");\n    author.innerHTML =\n      message.lastReply.author + \" &middot; \" + message.lastReply.date;\n\n    if (message.nNew) {\n      const markReadBtn = document.createElement(\"span\");\n      markReadBtn.classList.add(\"message__mark-read\");\n      markReadBtn.textContent = \"clear\";\n      markReadBtn.title = \"Mark read\";\n      markReadBtn.addEventListener(\"click\", (event: MouseEvent) =>\n        markRead(event, message, div),\n      );\n      author.appendChild(markReadBtn);\n    }\n\n    lastReply.appendChild(author);\n  }\n\n  return div;\n}\n\nfunction noMessageView(): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.textContent = \"No messages\";\n  return div;\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initEventListeners(): void {\n  addMessagesOpenListener();\n  addMarkAllReadListener();\n}\n\nfunction addMessagesOpenListener(): void {\n  document\n    .querySelector(\".messages\")\n    ?.addEventListener(\"click\", function (event: MouseEvent) {\n      event.stopPropagation();\n    });\n  document\n    .querySelector(\".messages__icon\")\n    ?.addEventListener(\"click\", function (event: MouseEvent) {\n      toggleMessages();\n    });\n  document.body?.addEventListener(\"click\", function (event: MouseEvent) {\n    if (model.open) {\n      event.stopPropagation();\n      toggleMessages();\n    }\n  });\n}\n\nfunction addMarkAllReadListener(): void {\n  document\n    .querySelector(\".messages__read-all-btn\")\n    ?.addEventListener(\"click\", () => markAllRead());\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(urls: {\n  markReadUrl: string,\n  messagesUrl: string,\n}): void {\n  initModel(urls);\n  update();\n  view();\n  initEventListeners();\n}\n","\"use strict\";\nimport { buildReq } from \"../../ajax.js\";\nimport { clear } from \"../../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\nlet model;\n\nfunction initModel(\n  flagQuestionUrl,\n  getFlagQuestionReasonsUrl,\n  getNewQuestionUrl,\n  toggleFavouriteUrl,\n) {\n  model = {\n    flagQuestionReasons: [],\n    urls: {\n      flagQuestion: flagQuestionUrl,\n      getFlagQuestionReasons: getFlagQuestionReasonsUrl,\n      getNewQuestion: getNewQuestionUrl,\n      toggleFavourite: toggleFavouriteUrl,\n    },\n  };\n}\n\nconst transition = {\n  duration: 600,\n  direction: \"right\",\n  easing: \"easeInOutCubic\",\n};\n\n/**********/\n/* update */\n/**********/\n\nasync function update() {\n  await getFlagQuestionReasons();\n}\n\nfunction toggleFlagQuestion(question) {\n  const open = question.getAttribute(\"open\");\n  const id = question.getAttribute(\"data-id\");\n  const form = question.querySelector(\".flag-question__form\");\n  const icon = question.querySelector(\".flag-question__btn\");\n\n  if (id === null) {\n    console.log(\n      \"The flag question div needs a `data-id` attribute representing the \" +\n        \"question pk.\",\n    );\n  }\n\n  if (open === null) {\n    question.setAttribute(\"open\", \"\");\n    form.removeAttribute(\"hidden\");\n    icon.textContent = \"flag\";\n  } else {\n    question.removeAttribute(\"open\");\n    form.setAttribute(\"hidden\", \"\");\n    icon.textContent = \"outlined_flag\";\n  }\n}\n\nasync function getFlagQuestionReasons() {\n  const req = buildReq({}, \"get\");\n  const resp = await fetch(model.urls.getFlagQuestionReasons, req);\n  if (!resp.ok) {\n    console.log(resp);\n  }\n  const data = await resp.json();\n  model.flagQuestionReasons = data.reasons;\n  flagQuestionView();\n}\n\nasync function flagQuestion(question) {\n  const id = question.getAttribute(\"data-id\");\n  const select = question.querySelector(\".flag-question__form__select\");\n  const reason = select.options[select.selectedIndex].value;\n\n  const data = {\n    id: id,\n    reason: reason,\n  };\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(model.urls.flagQuestion, req);\n  if (!resp.ok) {\n    console.log(resp);\n  }\n  toggleFlagQuestion(question);\n  await getNewQuestion(question.parentNode.parentNode.parentNode);\n}\n\nasync function getNewQuestion(question) {\n  const posting = $.get(model.urls.getNewQuestion);\n  posting.done((data) => {\n    $(question).toggle(\"fade\", () => {\n      $(question).remove();\n      $(\"#questions\").append(data);\n      $(\"#questions .mdc-card\").hide().toggle(\"slide\", transition);\n      initNewCard(model.urls.toggleFavourite, model.urls.getNewQuestion);\n      window.location.href = \"#questions\";\n    });\n  });\n  posting.fail(() => {\n    x.innerHTML = \"error\"; // Add snack bar?\n    window.setTimeout(() => {\n      x.innerHTML = \"autorenew\";\n    }, 5000);\n  });\n}\n\n/********/\n/* view */\n/********/\n\nfunction view() {\n  flagQuestionView();\n}\n\nfunction flagQuestionView() {\n  [...document.getElementsByClassName(\"flag-question\")].forEach((question) => {\n    const select = question.querySelector(\".flag-question__form select\");\n    clear(select);\n    model.flagQuestionReasons.forEach((reason) => {\n      const option = document.createElement(\"option\");\n      option.classList.add(\"flag-question__form__option\");\n      option.value = reason;\n      option.textContent = reason;\n      select.appendChild(option);\n    });\n  });\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction addFlagQuestionListeners() {\n  [...document.getElementsByClassName(\"flag-question\")].forEach((question) => {\n    question\n      .querySelector(\".flag-question__close\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n        toggleFlagQuestion(question);\n      });\n    question\n      .querySelector(\".flag-question__btn\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n        toggleFlagQuestion(question);\n      });\n    question\n      .querySelector(\".flag-question__form\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n      });\n    question\n      .querySelector(\".flag-question__form\")\n      .addEventListener(\"submit\", (event) => {\n        event.preventDefault();\n        flagQuestion(question);\n      });\n    document.body.addEventListener(\"click\", () => {\n      if (question.hasAttribute(\"open\")) {\n        toggleFlagQuestion(question);\n      }\n    });\n  });\n}\n\n/********/\n/* init */\n/********/\n\nfunction initNewCard(favUrl, refreshUrl) {\n  $(\"#questions .mdc-card\").each((i, el) => {\n    if (el.getAttribute(\"initialized\") !== \"true\") {\n      el.setAttribute(\"initialized\", \"true\");\n\n      $(el)\n        .find(\".mdc-icon-toggle.favourite-btn\")\n        .each((i, heart) => {\n          bundle.iconToggle.MDCIconToggle.attachTo(heart);\n          heart.addEventListener(\"click\", () => {\n            const posting = $.post(favUrl, {\n              pk: heart.getAttribute(\"data-id\"),\n            });\n            posting.done((data) => {\n              console.log(data);\n            });\n          });\n        });\n\n      $(el)\n        .find(\".remove-btn\")\n        .each((i, x) => {\n          x.addEventListener(\"click\", () => {\n            const posting = $.get(refreshUrl);\n            posting.done((data) => {\n              $(el).toggle(\"fade\", () => {\n                $(el).remove();\n                $(\"#questions\").append(data);\n                $(\"#questions .mdc-card\").hide().toggle(\"slide\", transition);\n                initNewCard(favUrl, refreshUrl);\n                window.location.href = \"#questions\";\n              });\n            });\n            posting.fail(() => {\n              x.innerHTML = \"error\"; // Add snack bar?\n              window.setTimeout(() => {\n                x.innerHTML = \"autorenew\";\n              }, 5000);\n            });\n          });\n        });\n    }\n  });\n  addFlagQuestionListeners();\n  view();\n}\n\nexport async function init(\n  favUrl,\n  refreshUrl,\n  getFlagQuestionReasonsUrl,\n  flagQuestionUrl,\n) {\n  initModel(flagQuestionUrl, getFlagQuestionReasonsUrl, refreshUrl, favUrl);\n  initNewCard(favUrl, refreshUrl);\n  update();\n}\n","\"use strict\";\n\nconst transition = {\n  duration: 600,\n  direction: \"right\",\n  easing: \"easeInOutCubic\",\n};\n\nexport function init(url) {\n  // Rating system\n  $(\"#rationales .mdc-card\").each((i, el) => {\n    const id = el.getAttribute(\"data-id\");\n    let score;\n\n    // Score\n    $(el)\n      .find(\".star\")\n      .each((i, star) => {\n        // Handle hover\n        star.addEventListener(\"mouseover\", () => {\n          score = star.getAttribute(\"data-rank\");\n          $(\".star\").each((i, _star) => {\n            if (_star.getAttribute(\"data-rank\") <= score) {\n              _star.innerHTML = \"star\";\n            } else {\n              _star.innerHTML = \"star_border\";\n            }\n          });\n        });\n        star.addEventListener(\"mouseout\", () => {\n          $(\".star\").each((i, _star) => {\n            _star.innerHTML = \"star_border\";\n          });\n        });\n\n        // Submit score\n        $(star).one(\"click\", () => {\n          const posting = $.post(url, { id: id, score: score });\n          posting.done((data) => {\n            processResponse(data);\n          });\n        });\n      });\n\n    // Flag inappropriate\n    $(el)\n      .find(\".flag\")\n      .each((i, flag) => {\n        flag.addEventListener(\"mouseover\", () => {\n          $(\".flag\").each((i, _flag) => {\n            _flag.innerHTML = \"flag\";\n          });\n        });\n        flag.addEventListener(\"mouseout\", () => {\n          $(\".flag\").each((i, _flag) => {\n            _flag.innerHTML = \"outlined_flag\";\n          });\n        });\n        $(flag).one(\"click\", () => {\n          const posting = $.post(url, { id: id, score: 0 });\n          posting.done((data) => {\n            processResponse(data);\n          });\n        });\n      });\n\n    function processResponse(data) {\n      $(el).toggle(\"fade\", () => {\n        $(el).remove();\n        $(\"#rationales\").append(data);\n        $(\"#rationales .mdc-card\").hide().toggle(\"slide\", transition);\n        init(url);\n        // Refresh reputation score\n        document\n          .getElementsByTagName(\"teacher-reputation-header\")[0]\n          .setAttribute(\"stale\", \"\");\n      });\n    }\n  });\n}\n","\"use strict\";\nimport { buildReq } from \"../ajax.js\";\nimport { clear } from \"../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\nlet model;\n\nfunction initModel(flagQuestionUrl, getFlagQuestionReasonsUrl) {\n  model = {\n    flagQuestionReasons: [],\n    urls: {\n      flagQuestion: flagQuestionUrl,\n      getFlagQuestionReasons: getFlagQuestionReasonsUrl,\n    },\n  };\n  getFlagQuestionReasons();\n}\n\nfunction toggleFlagQuestion(question) {\n  const open = question.getAttribute(\"open\");\n  const id = question.getAttribute(\"data-id\");\n  const form = question.querySelector(\".flag-question__form\");\n  const icon = question.querySelector(\".flag-question__btn\");\n\n  if (id === null) {\n    console.log(\n      \"The flag question div needs a `data-id` attribute representing the \" +\n        \"question pk.\",\n    );\n  }\n\n  if (open === null) {\n    question.setAttribute(\"open\", \"\");\n    form.removeAttribute(\"hidden\");\n    icon.textContent = \"flag\";\n  } else {\n    question.removeAttribute(\"open\");\n    form.setAttribute(\"hidden\", \"\");\n    icon.textContent = \"outlined_flag\";\n  }\n}\n\nasync function getFlagQuestionReasons() {\n  const req = buildReq({}, \"get\");\n  const resp = await fetch(model.urls.getFlagQuestionReasons, req);\n  if (!resp.ok) {\n    console.log(resp);\n  }\n  const data = await resp.json();\n  model.flagQuestionReasons = data.reasons;\n  flagQuestionView();\n}\n\nasync function flagQuestion(question) {\n  const id = question.getAttribute(\"data-id\");\n  const select = question.querySelector(\".flag-question__form__select\");\n  const reason = select.options[select.selectedIndex].value;\n\n  const data = {\n    id: id,\n    reason: reason,\n  };\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(model.urls.flagQuestion, req);\n  if (!resp.ok) {\n    console.log(resp);\n  }\n  toggleFlagQuestion(question);\n}\n\nfunction flagQuestionView() {\n  [...document.getElementsByClassName(\"flag-question\")].forEach((question) => {\n    const select = question.querySelector(\".flag-question__form select\");\n    clear(select);\n    model.flagQuestionReasons.forEach((reason) => {\n      const option = document.createElement(\"option\");\n      option.classList.add(\"flag-question__form__option\");\n      option.value = reason;\n      option.textContent = reason;\n      select.appendChild(option);\n    });\n  });\n}\n\nfunction addFlagQuestionListeners() {\n  [...document.getElementsByClassName(\"flag-question\")].forEach((question) => {\n    question\n      .querySelector(\".flag-question__close\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n        toggleFlagQuestion(question);\n      });\n    question\n      .querySelector(\".flag-question__btn\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n        toggleFlagQuestion(question);\n      });\n    question\n      .querySelector(\".flag-question__form\")\n      .addEventListener(\"click\", (event) => {\n        event.stopPropagation();\n      });\n    question\n      .querySelector(\".flag-question__form\")\n      .addEventListener(\"submit\", (event) => {\n        event.preventDefault();\n        flagQuestion(question);\n      });\n    document.body.addEventListener(\"click\", () => {\n      if (question.hasAttribute(\"open\")) {\n        toggleFlagQuestion(question);\n      }\n    });\n  });\n}\n\nexport async function init(getFlagQuestionReasonsUrl, flagQuestionUrl) {\n  await initModel(flagQuestionUrl, getFlagQuestionReasonsUrl);\n  addFlagQuestionListeners();\n}\n","import { init as initMessages } from \"./dashboard/messages.js\";\n\n/********/\n/* init */\n/********/\n\nexport async function init(data) {\n  initMessages({\n    urls: {\n      daliteMessages: data.urls.dalite_messages,\n      removeDaliteMessage: data.urls.remove_dalite_message,\n      saltiseImage: data.urls.saltise_image,\n    },\n  });\n}\n","\"use strict\";\n\nexport function init(data) {\n  function draw() {\n    $(\".progress-chart\").each((i, el) => {\n      const dataset =\n        data[el.getAttribute(\"group\")][el.getAttribute(\"assignment\")];\n      bundle.plotTimeSeries(el, dataset);\n    });\n  }\n  draw();\n  window.addEventListener(\"resize\", draw);\n}\n"],"names":["getCsrfToken","document","getElementsByName","getAttribute","buildReq","data","method","toLowerCase","toUpperCase","headers","body","JSON","stringify","Error","model","async","update","req","resp","fetch","urls","daliteMessages","json","messages","map","message","id","title","text","colour","removable","date","link","authors","author","name","picture","getMessages","view","querySelector","length","classList","remove","forEach","appendChild","container","createElement","add","content","addEventListener","window","location","assign","style","setProperty","textContent","caption","innerHTML","actions","images","authorsContainer","img","setAttribute","saltiseImage","buttons","div","node","removeDaliteMessage","ok","parentNode","childElementCount","removeMessage","messageView","messagesView","init","initModel","querySelectorAll","rationale","updateRationaleEvaluationAttributes","evaluation","evaluation_","parseInt","star","i","removeAttribute","rationaleEvaluationView","toggleFlagHover","toggleStarHover","flag","hovering","hasAttribute","stars","getElementsByClassName","idx","indexOf","initListeners","score","redirect","evaluateRationale","flagRationale","clear","hasChildNodes","removeChild","lastChild","createSvg","useSprite","svg","createElementNS","use","setAttributeNS","protocol","host","svgLink","append","toggleNotifications","header","header_","shadowRoot","dispatchEvent","Event","notificationsOpen","notificationsView","updateNotifications","notifications","badge","notificationsList","completedNotifications","filter","notification","inProgress","toString","display","onClick","spinner","icon","error","description","onCloseClick","notificationView","noNotificationView","some","initEventListeners","event","stopPropagation","url","tasks","then","task","completed","datetime","Date","sort","a","b","getNotifications","Promise","all","getGradebookResult","initTasks","getTasks","gradebookResult","task_id","status","resolve","setTimeout","CHECK_EVERY","_downloadGradebook","csv","href","escape","target","download","click","downloadGradebook","split","slice","join","t","console","log","removeFailedGradebook","removeGradebookError","button","currentTarget","group_id","assignment_id","requestGradebook","unshift","messagesUrl","threads","lastReply","last_reply","nNew","n_new","toggleMessages","open","messagesList","badgeView","noMessageView","new_","markReadBtn","markReadUrl","markRead","markAllRead","transition","duration","direction","easing","getFlagQuestionReasons","flagQuestionReasons","reasons","flagQuestionView","toggleFlagQuestion","question","form","flagQuestion","select","reason","options","selectedIndex","value","posting","$","get","getNewQuestion","done","toggle","hide","initNewCard","toggleFavourite","fail","x","option","favUrl","refreshUrl","each","el","find","heart","bundle","iconToggle","MDCIconToggle","attachTo","post","pk","preventDefault","flagQuestionUrl","getFlagQuestionReasonsUrl","addFlagQuestionListeners","initMessages","dalite_messages","remove_dalite_message","saltise_image","getNewQuestionUrl","toggleFavouriteUrl","processResponse","getElementsByTagName","_star","one","_flag","draw","dataset","plotTimeSeries"],"mappings":"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"}