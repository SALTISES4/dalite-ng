{"version":3,"file":"teacher.min.js","sources":["peerinst/static/peerinst/js/utils.js","peerinst/static/peerinst/js/_teacher/notifications.js","peerinst/static/peerinst/js/ajax.js","peerinst/static/peerinst/js/_teacher/gradebooks.js","peerinst/static/peerinst/js/teacher.js"],"sourcesContent":["// @flow\n\"use strict\";\n\nexport function clear(node: HTMLElement): HTMLElement {\n  while (node.hasChildNodes()) {\n    // $FlowFixMe\n    node.removeChild(node.lastChild);\n  }\n  return node;\n}\n\nexport function formatDatetime(datetime: Date): string {\n  return (\n    datetime.toLocaleString(\"en-ca\", { year: \"numeric\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { month: \"2-digit\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { day: \"2-digit\" }) +\n    \" \" +\n    datetime.toLocaleString(\"en-ca\", { hour: \"2-digit\", hour12: false }) +\n    \":\" +\n    datetime.toLocaleString(\"en-ca\", { minute: \"2-digit\" })\n  );\n}\n\nexport function createSvg(name: string): Element {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  const use = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n  use.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", `#${name}`);\n  svg.append(use);\n  return svg;\n}\n\nexport function showAlert(msg: string) {\n  const fullPageBox = document.createElement(\"div\");\n  fullPageBox.classList.add(\"alert-box__full-page\");\n  fullPageBox.addEventListener(\"click\", (event: MouseEvent) => {\n    event.stopPropagation();\n    fullPageBox.parentNode?.removeChild(fullPageBox);\n  });\n  document.body?.appendChild(fullPageBox);\n\n  const box = document.createElement(\"div\");\n  box.classList.add(\"alert-box__box\");\n  box.addEventListener(\"click\", (event: MouseEvent) =>\n    event.stopPropagation(),\n  );\n  fullPageBox.appendChild(box);\n\n  const span = document.createElement(\"span\");\n  span.classList.add(\"alert-box__msg\");\n  span.textContent = msg;\n  box.appendChild(span);\n\n  const ok = document.createElement(\"button\");\n  ok.classList.add(\"alert-box__btn\", \"mdc-button\", \"mdc-button--unelevated\");\n  ok.textContent = \"Ok\";\n  box.appendChild(ok);\n}\n","// @flow\n\nimport { clear, createSvg } from \"../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\nexport type Notification = {\n  text: string,\n  inProgress: boolean,\n  error: boolean,\n  onClick: () => Promise<void>,\n  onCloseClick: () => Promise<void>,\n};\n\nlet model: {\n  notificationsOpen: boolean,\n  notifications: Array<Notification>,\n};\n\nfunction initModel(): void {\n  model = {\n    notificationsOpen: false,\n    notifications: [],\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction toggleNotifications(): void {\n  model.notificationsOpen = !model.notificationsOpen;\n  notificationsView();\n}\n\nexport function updateNotifications(notifications: Array<Notification>): void {\n  model.notifications = notifications;\n  notificationsView();\n}\n\n/********/\n/* view */\n/********/\n\nfunction view(): void {\n  notificationsView();\n}\n\nfunction notificationsView(): void {\n  const notifications = document.querySelector(\".notifications\");\n  const badge = notifications?.querySelector(\".notifications__icon__badge\");\n  const notificationsList = notifications?.querySelector(\n    \".notifications__notifications\",\n  );\n\n  if (!notifications || !badge || !notificationsList) {\n    return;\n  }\n\n  if (model.notifications.length) {\n    badge.textContent = model.notifications\n      .filter(notification => !notification.inProgress)\n      .length.toString();\n    badge.style.display = \"flex\";\n  } else {\n    badge.textContent = \"\";\n    badge.style.display = \"none\";\n  }\n\n  clear(notificationsList);\n\n  if (model.notifications.length) {\n    model.notifications.map(function(notification) {\n      notificationsList.appendChild(notificationView(notification));\n    });\n  } else {\n    notificationsList.appendChild(noNotificationView());\n  }\n\n  if (model.notifications.some(notification => notification.inProgress)) {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.add(\"notifications__spinner--loading\");\n  } else {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.remove(\"notifications__spinner--loading\");\n  }\n\n  if (model.notificationsOpen) {\n    notifications.classList.add(\"notifications--open\");\n  } else {\n    notifications.classList.remove(\"notifications--open\");\n  }\n}\n\nfunction notificationView(notification: Notification): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.classList.add(\"notification\");\n  div.addEventListener(\"click\", notification.onClick);\n\n  if (notification.inProgress) {\n    const spinner = document.createElement(\"loading-spinner\");\n    spinner.classList.add(\"notification__spinner\");\n    div.appendChild(spinner);\n  } else {\n    let icon;\n    if (notification.error) {\n      icon = createSvg(\"error\");\n      icon.classList.add(\"notification__icon--error\");\n      const remove = createSvg(\"close\");\n      remove.classList.add(\"notification__close\");\n      remove.addEventListener(\"click\", notification.onCloseClick);\n      div.appendChild(remove);\n    } else {\n      div.classList.add(\"notification--completed\");\n      icon = createSvg(\"cloud_download\");\n    }\n    icon.classList.add(\"notification__icon\");\n    div.appendChild(icon);\n  }\n\n  const description = document.createElement(\"span\");\n  description.classList.add(\"notification__description\");\n  description.textContent = notification.text;\n  div.appendChild(description);\n\n  return div;\n}\n\nfunction noNotificationView(): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.textContent = \"No new notifications\";\n  return div;\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initEventListeners(): void {\n  addNotificationsOpenListener();\n}\n\nfunction addNotificationsOpenListener(): void {\n  document\n    .querySelector(\".notifications\")\n    ?.addEventListener(\"click\", function(event: MouseEvent) {\n      event.stopPropagation();\n    });\n  document\n    .querySelector(\".notifications__icon\")\n    ?.addEventListener(\"click\", function(event: MouseEvent) {\n      toggleNotifications();\n    });\n  document.body?.addEventListener(\"click\", function(event: MouseEvent) {\n    if (model.notificationsOpen) {\n      event.stopPropagation();\n      toggleNotifications();\n    }\n  });\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(): void {\n  initModel();\n  view();\n  initEventListeners();\n}\n","export function getCsrfToken() {\n  const name = \"csrftoken\";\n  if (document.cookie && document.cookie !== \"\") {\n    return document.cookie\n      .split(\";\")\n      .map(c => c.trim())\n      .filter(c => c.substring(0, name.length + 1) === name + \"=\")\n      .map(c => decodeURIComponent(c.substring(name.length + 1)))[0];\n  } else {\n    return null;\n  }\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n","// @flow\nimport { buildReq } from \"../ajax.js\";\nimport { updateNotifications } from \"./notifications.js\";\nimport type { Notification } from \"./notifications.js\";\n\n/*********/\n/* model */\n/*********/\n\nconst CHECK_EVERY = 0.5;\n\ntype Task = {\n  id: string,\n  description: string,\n  completed: boolean,\n  datetime: Date,\n  error: boolean,\n};\n\nlet model: {\n  urls: {\n    requestGradebook: string,\n    gradebookResult: string,\n    removeFailedGradebook: string,\n    downloadGradebook: string,\n    tasks: string,\n  },\n  tasks: Array<Task>,\n};\n\nfunction initModel(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  model = {\n    tasks: [],\n    urls: {\n      requestGradebook: urls.requestGradebook,\n      gradebookResult: urls.gradebookResult,\n      removeFailedGradebook: urls.removeFailedGradebook,\n      downloadGradebook: urls.downloadGradebook,\n      tasks: urls.tasks,\n    },\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction update(): void {\n  getTasks();\n}\n\nfunction getTasks(): void {\n  const url = model.urls.tasks;\n  const req = buildReq({}, \"get\");\n\n  fetch(url, req)\n    .then(resp => resp.json())\n    .then(data => {\n      initTasks(data.tasks);\n    });\n}\n\nasync function initTasks(\n  data: Array<{\n    id: string,\n    description: string,\n    completed: boolean,\n    datetime: string,\n  }>,\n): Promise<void> {\n  model.tasks = data\n    .map(task => ({\n      id: task.id,\n      description: task.description,\n      completed: task.completed,\n      datetime: new Date(task.datetime),\n      error: false,\n    }))\n    .sort((a, b) =>\n      a.datetime > b.datetime ? -1 : a.datetime < b.datetime ? 1 : 0,\n    );\n  updateNotifications(getNotifications());\n  Promise.all(\n    model.tasks\n      .filter(task => !task.completed)\n      .map(task => getGradebookResult(task)),\n  );\n}\n\nasync function requestGradebook(event: MouseEvent): Promise<void> {\n  event.stopPropagation();\n  const button = event.currentTarget;\n  const groupId = button.getAttribute(\"data-group\");\n  const assignmentId = button.getAttribute(\"data-assignment\");\n\n  const data = {\n    group_id: groupId,\n    assignment_id: assignmentId,\n  };\n\n  const url = model.urls.requestGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.status === 200) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data\n      .split(\"\\n\")\n      .slice(1)\n      .join(\"\\n\");\n    _downloadGradebook(title, csv);\n  } else if (resp.status === 201) {\n    const data = await resp.json();\n    const task = {\n      id: data.id,\n      description: data.description,\n      completed: data.completed,\n      datetime: new Date(data.datetime),\n      error: false,\n    };\n    model.tasks.unshift(task);\n    setTimeout(() => getGradebookResult(task), 0);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nasync function getGradebookResult(task: Task): Promise<void> {\n  const url = model.urls.gradebookResult;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n\n  if (resp.ok) {\n    task.completed = true;\n    updateNotifications(getNotifications());\n  } else if (resp.status == 102) {\n    await new Promise(resolve =>\n      setTimeout(() => getGradebookResult(task), CHECK_EVERY * 1000),\n    );\n  } else {\n    task.completed = true;\n    task.error = true;\n    updateNotifications(getNotifications());\n  }\n}\n\nasync function removeGradebookError(task: Task): Promise<void> {\n  const url = model.urls.removeFailedGradebook;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n  if (resp.ok) {\n    model.tasks = model.tasks.filter(t => t.id !== task.id);\n  }\n  updateNotifications(getNotifications());\n}\n\nasync function downloadGradebook(task: Task): Promise<void> {\n  const data = {\n    task_id: task.id,\n  };\n  const url = model.urls.downloadGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.ok) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data\n      .split(\"\\n\")\n      .slice(1)\n      .join(\"\\n\");\n    _downloadGradebook(title, csv);\n    model.tasks = model.tasks.filter(t => t.id != task.id);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nfunction _downloadGradebook(title: string, csv: string): void {\n  const a = document.createElement(\"a\");\n  a.href = `data:text/csv;charset=utf-8, ${escape(csv)}`;\n  a.target = \"_blank\";\n  a.download = title;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n}\n\nfunction getNotifications(): Array<Notification> {\n  return model.tasks.map(task => ({\n    text: task.completed\n      ? task.error\n        ? `There was an error creating the gradebook for ${task.description}.`\n        : `The gradebook for ${task.description} is ready.`\n      : `Computing the gradebook for ${task.description}...`,\n    inProgress: !task.completed,\n    error: task.error,\n    onClick:\n      task.completed && !task.error\n        ? async () => await downloadGradebook(task)\n        : async () => undefined,\n    onCloseClick: async () => await removeGradebookError(task),\n  }));\n}\n\n/********/\n/* view */\n/********/\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initListeners(): void {\n  addGradebookListeners();\n}\n\nfunction addGradebookListeners(): void {\n  [...document.getElementsByClassName(\"gradebook-button\")].forEach(button => {\n    button.addEventListener(\n      \"click\",\n      async (event: MouseEvent) => await requestGradebook(event),\n    );\n  });\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  initModel(urls);\n  update();\n  initListeners();\n}\n","// @flow\n\"use strict\";\n\nexport { init as initNotifications } from \"./_teacher/notifications.js\";\nexport { init as initGradebooks } from \"./_teacher/gradebooks.js\";\n"],"names":["clear","node","hasChildNodes","removeChild","lastChild","createSvg","name","svg","document","createElementNS","use","setAttributeNS","append","model","initModel","notificationsOpen","notifications","toggleNotifications","notificationsView","updateNotifications","view","querySelector","badge","notificationsList","length","textContent","filter","notification","inProgress","toString","style","display","map","appendChild","notificationView","noNotificationView","some","classList","add","remove","div","createElement","addEventListener","onClick","spinner","icon","error","onCloseClick","description","text","initEventListeners","addNotificationsOpenListener","event","stopPropagation","body","init","getCsrfToken","cookie","split","c","trim","substring","decodeURIComponent","buildReq","data","method","toLowerCase","toUpperCase","headers","JSON","stringify","Error","CHECK_EVERY","urls","tasks","requestGradebook","gradebookResult","removeFailedGradebook","downloadGradebook","update","getTasks","url","req","fetch","then","resp","json","initTasks","task","id","completed","datetime","Date","sort","a","b","getNotifications","Promise","all","getGradebookResult","button","currentTarget","groupId","getAttribute","assignmentId","group_id","assignment_id","status","title","csv","slice","join","_downloadGradebook","unshift","setTimeout","console","log","task_id","ok","resolve","removeGradebookError","t","href","escape","target","download","click","undefined","initListeners","addGradebookListeners","getElementsByClassName","forEach"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy91dGlscy5qcyIsIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy9fdGVhY2hlci9ub3RpZmljYXRpb25zLmpzIiwiL2hvbWUvYW50b2luZS9kb2N1bWVudHMvd29yay9zY2l2ZXJvL3Byb2plY3RzL2RhbGl0ZS9kYWxpdGUvcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL2FqYXguanMiLCIvaG9tZS9hbnRvaW5lL2RvY3VtZW50cy93b3JrL3NjaXZlcm8vcHJvamVjdHMvZGFsaXRlL2RhbGl0ZS9wZWVyaW5zdC9zdGF0aWMvcGVlcmluc3QvanMvX3RlYWNoZXIvZ3JhZGVib29rcy5qcyIsIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy90ZWFjaGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG5vZGU6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICB3aGlsZSAobm9kZS5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRldGltZShkYXRldGltZTogRGF0ZSk6IHN0cmluZyB7XG4gIHJldHVybiAoXG4gICAgZGF0ZXRpbWUudG9Mb2NhbGVTdHJpbmcoXCJlbi1jYVwiLCB7IHllYXI6IFwibnVtZXJpY1wiIH0pICtcbiAgICBcIi1cIiArXG4gICAgZGF0ZXRpbWUudG9Mb2NhbGVTdHJpbmcoXCJlbi1jYVwiLCB7IG1vbnRoOiBcIjItZGlnaXRcIiB9KSArXG4gICAgXCItXCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBkYXk6IFwiMi1kaWdpdFwiIH0pICtcbiAgICBcIiBcIiArXG4gICAgZGF0ZXRpbWUudG9Mb2NhbGVTdHJpbmcoXCJlbi1jYVwiLCB7IGhvdXI6IFwiMi1kaWdpdFwiLCBob3VyMTI6IGZhbHNlIH0pICtcbiAgICBcIjpcIiArXG4gICAgZGF0ZXRpbWUudG9Mb2NhbGVTdHJpbmcoXCJlbi1jYVwiLCB7IG1pbnV0ZTogXCIyLWRpZ2l0XCIgfSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN2ZyhuYW1lOiBzdHJpbmcpOiBFbGVtZW50IHtcbiAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gIGNvbnN0IHVzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidXNlXCIpO1xuICB1c2Uuc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsIFwiaHJlZlwiLCBgIyR7bmFtZX1gKTtcbiAgc3ZnLmFwcGVuZCh1c2UpO1xuICByZXR1cm4gc3ZnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZzogc3RyaW5nKSB7XG4gIGNvbnN0IGZ1bGxQYWdlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZnVsbFBhZ2VCb3guY2xhc3NMaXN0LmFkZChcImFsZXJ0LWJveF9fZnVsbC1wYWdlXCIpO1xuICBmdWxsUGFnZUJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZnVsbFBhZ2VCb3gucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQoZnVsbFBhZ2VCb3gpO1xuICB9KTtcbiAgZG9jdW1lbnQuYm9keT8uYXBwZW5kQ2hpbGQoZnVsbFBhZ2VCb3gpO1xuXG4gIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJveC5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtYm94X19ib3hcIik7XG4gIGJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PlxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpLFxuICApO1xuICBmdWxsUGFnZUJveC5hcHBlbmRDaGlsZChib3gpO1xuXG4gIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgc3Bhbi5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtYm94X19tc2dcIik7XG4gIHNwYW4udGV4dENvbnRlbnQgPSBtc2c7XG4gIGJveC5hcHBlbmRDaGlsZChzcGFuKTtcblxuICBjb25zdCBvayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIG9rLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1ib3hfX2J0blwiLCBcIm1kYy1idXR0b25cIiwgXCJtZGMtYnV0dG9uLS11bmVsZXZhdGVkXCIpO1xuICBvay50ZXh0Q29udGVudCA9IFwiT2tcIjtcbiAgYm94LmFwcGVuZENoaWxkKG9rKTtcbn1cbiIsIi8vIEBmbG93XG5cbmltcG9ydCB7IGNsZWFyLCBjcmVhdGVTdmcgfSBmcm9tIFwiLi4vdXRpbHMuanNcIjtcblxuLyoqKioqKioqKi9cbi8qIG1vZGVsICovXG4vKioqKioqKioqL1xuXG5leHBvcnQgdHlwZSBOb3RpZmljYXRpb24gPSB7XG4gIHRleHQ6IHN0cmluZyxcbiAgaW5Qcm9ncmVzczogYm9vbGVhbixcbiAgZXJyb3I6IGJvb2xlYW4sXG4gIG9uQ2xpY2s6ICgpID0+IFByb21pc2U8dm9pZD4sXG4gIG9uQ2xvc2VDbGljazogKCkgPT4gUHJvbWlzZTx2b2lkPixcbn07XG5cbmxldCBtb2RlbDoge1xuICBub3RpZmljYXRpb25zT3BlbjogYm9vbGVhbixcbiAgbm90aWZpY2F0aW9uczogQXJyYXk8Tm90aWZpY2F0aW9uPixcbn07XG5cbmZ1bmN0aW9uIGluaXRNb2RlbCgpOiB2b2lkIHtcbiAgbW9kZWwgPSB7XG4gICAgbm90aWZpY2F0aW9uc09wZW46IGZhbHNlLFxuICAgIG5vdGlmaWNhdGlvbnM6IFtdLFxuICB9O1xufVxuXG4vKioqKioqKioqKi9cbi8qIHVwZGF0ZSAqL1xuLyoqKioqKioqKiovXG5cbmZ1bmN0aW9uIHRvZ2dsZU5vdGlmaWNhdGlvbnMoKTogdm9pZCB7XG4gIG1vZGVsLm5vdGlmaWNhdGlvbnNPcGVuID0gIW1vZGVsLm5vdGlmaWNhdGlvbnNPcGVuO1xuICBub3RpZmljYXRpb25zVmlldygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTm90aWZpY2F0aW9ucyhub3RpZmljYXRpb25zOiBBcnJheTxOb3RpZmljYXRpb24+KTogdm9pZCB7XG4gIG1vZGVsLm5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25zO1xuICBub3RpZmljYXRpb25zVmlldygpO1xufVxuXG4vKioqKioqKiovXG4vKiB2aWV3ICovXG4vKioqKioqKiovXG5cbmZ1bmN0aW9uIHZpZXcoKTogdm9pZCB7XG4gIG5vdGlmaWNhdGlvbnNWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIG5vdGlmaWNhdGlvbnNWaWV3KCk6IHZvaWQge1xuICBjb25zdCBub3RpZmljYXRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ub3RpZmljYXRpb25zXCIpO1xuICBjb25zdCBiYWRnZSA9IG5vdGlmaWNhdGlvbnM/LnF1ZXJ5U2VsZWN0b3IoXCIubm90aWZpY2F0aW9uc19faWNvbl9fYmFkZ2VcIik7XG4gIGNvbnN0IG5vdGlmaWNhdGlvbnNMaXN0ID0gbm90aWZpY2F0aW9ucz8ucXVlcnlTZWxlY3RvcihcbiAgICBcIi5ub3RpZmljYXRpb25zX19ub3RpZmljYXRpb25zXCIsXG4gICk7XG5cbiAgaWYgKCFub3RpZmljYXRpb25zIHx8ICFiYWRnZSB8fCAhbm90aWZpY2F0aW9uc0xpc3QpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAobW9kZWwubm90aWZpY2F0aW9ucy5sZW5ndGgpIHtcbiAgICBiYWRnZS50ZXh0Q29udGVudCA9IG1vZGVsLm5vdGlmaWNhdGlvbnNcbiAgICAgIC5maWx0ZXIobm90aWZpY2F0aW9uID0+ICFub3RpZmljYXRpb24uaW5Qcm9ncmVzcylcbiAgICAgIC5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICBiYWRnZS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gIH0gZWxzZSB7XG4gICAgYmFkZ2UudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGJhZGdlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxuXG4gIGNsZWFyKG5vdGlmaWNhdGlvbnNMaXN0KTtcblxuICBpZiAobW9kZWwubm90aWZpY2F0aW9ucy5sZW5ndGgpIHtcbiAgICBtb2RlbC5ub3RpZmljYXRpb25zLm1hcChmdW5jdGlvbihub3RpZmljYXRpb24pIHtcbiAgICAgIG5vdGlmaWNhdGlvbnNMaXN0LmFwcGVuZENoaWxkKG5vdGlmaWNhdGlvblZpZXcobm90aWZpY2F0aW9uKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbm90aWZpY2F0aW9uc0xpc3QuYXBwZW5kQ2hpbGQobm9Ob3RpZmljYXRpb25WaWV3KCkpO1xuICB9XG5cbiAgaWYgKG1vZGVsLm5vdGlmaWNhdGlvbnMuc29tZShub3RpZmljYXRpb24gPT4gbm90aWZpY2F0aW9uLmluUHJvZ3Jlc3MpKSB7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbnNfX3NwaW5uZXJcIilcbiAgICAgID8uY2xhc3NMaXN0LmFkZChcIm5vdGlmaWNhdGlvbnNfX3NwaW5uZXItLWxvYWRpbmdcIik7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbnNfX3NwaW5uZXJcIilcbiAgICAgID8uY2xhc3NMaXN0LnJlbW92ZShcIm5vdGlmaWNhdGlvbnNfX3NwaW5uZXItLWxvYWRpbmdcIik7XG4gIH1cblxuICBpZiAobW9kZWwubm90aWZpY2F0aW9uc09wZW4pIHtcbiAgICBub3RpZmljYXRpb25zLmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25zLS1vcGVuXCIpO1xuICB9IGVsc2Uge1xuICAgIG5vdGlmaWNhdGlvbnMuY2xhc3NMaXN0LnJlbW92ZShcIm5vdGlmaWNhdGlvbnMtLW9wZW5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm90aWZpY2F0aW9uVmlldyhub3RpZmljYXRpb246IE5vdGlmaWNhdGlvbik6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25cIik7XG4gIGRpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbm90aWZpY2F0aW9uLm9uQ2xpY2spO1xuXG4gIGlmIChub3RpZmljYXRpb24uaW5Qcm9ncmVzcykge1xuICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibG9hZGluZy1zcGlubmVyXCIpO1xuICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZChcIm5vdGlmaWNhdGlvbl9fc3Bpbm5lclwiKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoc3Bpbm5lcik7XG4gIH0gZWxzZSB7XG4gICAgbGV0IGljb247XG4gICAgaWYgKG5vdGlmaWNhdGlvbi5lcnJvcikge1xuICAgICAgaWNvbiA9IGNyZWF0ZVN2ZyhcImVycm9yXCIpO1xuICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKFwibm90aWZpY2F0aW9uX19pY29uLS1lcnJvclwiKTtcbiAgICAgIGNvbnN0IHJlbW92ZSA9IGNyZWF0ZVN2ZyhcImNsb3NlXCIpO1xuICAgICAgcmVtb3ZlLmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25fX2Nsb3NlXCIpO1xuICAgICAgcmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBub3RpZmljYXRpb24ub25DbG9zZUNsaWNrKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChyZW1vdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXYuY2xhc3NMaXN0LmFkZChcIm5vdGlmaWNhdGlvbi0tY29tcGxldGVkXCIpO1xuICAgICAgaWNvbiA9IGNyZWF0ZVN2ZyhcImNsb3VkX2Rvd25sb2FkXCIpO1xuICAgIH1cbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25fX2ljb25cIik7XG4gICAgZGl2LmFwcGVuZENoaWxkKGljb24pO1xuICB9XG5cbiAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgZGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcIm5vdGlmaWNhdGlvbl9fZGVzY3JpcHRpb25cIik7XG4gIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbm90aWZpY2F0aW9uLnRleHQ7XG4gIGRpdi5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XG5cbiAgcmV0dXJuIGRpdjtcbn1cblxuZnVuY3Rpb24gbm9Ob3RpZmljYXRpb25WaWV3KCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZGl2LnRleHRDb250ZW50ID0gXCJObyBuZXcgbm90aWZpY2F0aW9uc1wiO1xuICByZXR1cm4gZGl2O1xufVxuXG4vKioqKioqKioqKioqKi9cbi8qIGxpc3RlbmVycyAqL1xuLyoqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGluaXRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcbiAgYWRkTm90aWZpY2F0aW9uc09wZW5MaXN0ZW5lcigpO1xufVxuXG5mdW5jdGlvbiBhZGROb3RpZmljYXRpb25zT3Blbkxpc3RlbmVyKCk6IHZvaWQge1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbnNcIilcbiAgICA/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudDogTW91c2VFdmVudCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gIGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIubm90aWZpY2F0aW9uc19faWNvblwiKVxuICAgID8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICB0b2dnbGVOb3RpZmljYXRpb25zKCk7XG4gICAgfSk7XG4gIGRvY3VtZW50LmJvZHk/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmIChtb2RlbC5ub3RpZmljYXRpb25zT3Blbikge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0b2dnbGVOb3RpZmljYXRpb25zKCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqKioqKioqL1xuLyogaW5pdCAqL1xuLyoqKioqKioqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpOiB2b2lkIHtcbiAgaW5pdE1vZGVsKCk7XG4gIHZpZXcoKTtcbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0Q3NyZlRva2VuKCkge1xuICBjb25zdCBuYW1lID0gXCJjc3JmdG9rZW5cIjtcbiAgaWYgKGRvY3VtZW50LmNvb2tpZSAmJiBkb2N1bWVudC5jb29raWUgIT09IFwiXCIpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY29va2llXG4gICAgICAuc3BsaXQoXCI7XCIpXG4gICAgICAubWFwKGMgPT4gYy50cmltKCkpXG4gICAgICAuZmlsdGVyKGMgPT4gYy5zdWJzdHJpbmcoMCwgbmFtZS5sZW5ndGggKyAxKSA9PT0gbmFtZSArIFwiPVwiKVxuICAgICAgLm1hcChjID0+IGRlY29kZVVSSUNvbXBvbmVudChjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCArIDEpKSlbMF07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUmVxKGRhdGEsIG1ldGhvZCkge1xuICBpZiAobWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09IFwiZ2V0XCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kOiBtZXRob2QudG9VcHBlckNhc2UoKSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogZ2V0Q3NyZlRva2VuKCksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSBpZiAobWV0aG9kLnRvTG93ZXJDYXNlKCkgPT09IFwicG9zdFwiKSB7XG4gICAgY29uc3QgYm9keSA9IGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6IFwiXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJYLUNTUkZUb2tlblwiOiBnZXRDc3JmVG9rZW4oKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBub3QgaW1wbGVtZW50ZWQgeWV0LmApO1xuICB9XG59XG4iLCIvLyBAZmxvd1xuaW1wb3J0IHsgYnVpbGRSZXEgfSBmcm9tIFwiLi4vYWpheC5qc1wiO1xuaW1wb3J0IHsgdXBkYXRlTm90aWZpY2F0aW9ucyB9IGZyb20gXCIuL25vdGlmaWNhdGlvbnMuanNcIjtcbmltcG9ydCB0eXBlIHsgTm90aWZpY2F0aW9uIH0gZnJvbSBcIi4vbm90aWZpY2F0aW9ucy5qc1wiO1xuXG4vKioqKioqKioqL1xuLyogbW9kZWwgKi9cbi8qKioqKioqKiovXG5cbmNvbnN0IENIRUNLX0VWRVJZID0gMC41O1xuXG50eXBlIFRhc2sgPSB7XG4gIGlkOiBzdHJpbmcsXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIGNvbXBsZXRlZDogYm9vbGVhbixcbiAgZGF0ZXRpbWU6IERhdGUsXG4gIGVycm9yOiBib29sZWFuLFxufTtcblxubGV0IG1vZGVsOiB7XG4gIHVybHM6IHtcbiAgICByZXF1ZXN0R3JhZGVib29rOiBzdHJpbmcsXG4gICAgZ3JhZGVib29rUmVzdWx0OiBzdHJpbmcsXG4gICAgcmVtb3ZlRmFpbGVkR3JhZGVib29rOiBzdHJpbmcsXG4gICAgZG93bmxvYWRHcmFkZWJvb2s6IHN0cmluZyxcbiAgICB0YXNrczogc3RyaW5nLFxuICB9LFxuICB0YXNrczogQXJyYXk8VGFzaz4sXG59O1xuXG5mdW5jdGlvbiBpbml0TW9kZWwodXJsczoge1xuICByZXF1ZXN0R3JhZGVib29rOiBzdHJpbmcsXG4gIGdyYWRlYm9va1Jlc3VsdDogc3RyaW5nLFxuICByZW1vdmVGYWlsZWRHcmFkZWJvb2s6IHN0cmluZyxcbiAgZG93bmxvYWRHcmFkZWJvb2s6IHN0cmluZyxcbiAgdGFza3M6IHN0cmluZyxcbn0pOiB2b2lkIHtcbiAgbW9kZWwgPSB7XG4gICAgdGFza3M6IFtdLFxuICAgIHVybHM6IHtcbiAgICAgIHJlcXVlc3RHcmFkZWJvb2s6IHVybHMucmVxdWVzdEdyYWRlYm9vayxcbiAgICAgIGdyYWRlYm9va1Jlc3VsdDogdXJscy5ncmFkZWJvb2tSZXN1bHQsXG4gICAgICByZW1vdmVGYWlsZWRHcmFkZWJvb2s6IHVybHMucmVtb3ZlRmFpbGVkR3JhZGVib29rLFxuICAgICAgZG93bmxvYWRHcmFkZWJvb2s6IHVybHMuZG93bmxvYWRHcmFkZWJvb2ssXG4gICAgICB0YXNrczogdXJscy50YXNrcyxcbiAgICB9LFxuICB9O1xufVxuXG4vKioqKioqKioqKi9cbi8qIHVwZGF0ZSAqL1xuLyoqKioqKioqKiovXG5cbmZ1bmN0aW9uIHVwZGF0ZSgpOiB2b2lkIHtcbiAgZ2V0VGFza3MoKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGFza3MoKTogdm9pZCB7XG4gIGNvbnN0IHVybCA9IG1vZGVsLnVybHMudGFza3M7XG4gIGNvbnN0IHJlcSA9IGJ1aWxkUmVxKHt9LCBcImdldFwiKTtcblxuICBmZXRjaCh1cmwsIHJlcSlcbiAgICAudGhlbihyZXNwID0+IHJlc3AuanNvbigpKVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgaW5pdFRhc2tzKGRhdGEudGFza3MpO1xuICAgIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0VGFza3MoXG4gIGRhdGE6IEFycmF5PHtcbiAgICBpZDogc3RyaW5nLFxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgY29tcGxldGVkOiBib29sZWFuLFxuICAgIGRhdGV0aW1lOiBzdHJpbmcsXG4gIH0+LFxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIG1vZGVsLnRhc2tzID0gZGF0YVxuICAgIC5tYXAodGFzayA9PiAoe1xuICAgICAgaWQ6IHRhc2suaWQsXG4gICAgICBkZXNjcmlwdGlvbjogdGFzay5kZXNjcmlwdGlvbixcbiAgICAgIGNvbXBsZXRlZDogdGFzay5jb21wbGV0ZWQsXG4gICAgICBkYXRldGltZTogbmV3IERhdGUodGFzay5kYXRldGltZSksXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+XG4gICAgICBhLmRhdGV0aW1lID4gYi5kYXRldGltZSA/IC0xIDogYS5kYXRldGltZSA8IGIuZGF0ZXRpbWUgPyAxIDogMCxcbiAgICApO1xuICB1cGRhdGVOb3RpZmljYXRpb25zKGdldE5vdGlmaWNhdGlvbnMoKSk7XG4gIFByb21pc2UuYWxsKFxuICAgIG1vZGVsLnRhc2tzXG4gICAgICAuZmlsdGVyKHRhc2sgPT4gIXRhc2suY29tcGxldGVkKVxuICAgICAgLm1hcCh0YXNrID0+IGdldEdyYWRlYm9va1Jlc3VsdCh0YXNrKSksXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RHcmFkZWJvb2soZXZlbnQ6IE1vdXNlRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gIGNvbnN0IGdyb3VwSWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiZGF0YS1ncm91cFwiKTtcbiAgY29uc3QgYXNzaWdubWVudElkID0gYnV0dG9uLmdldEF0dHJpYnV0ZShcImRhdGEtYXNzaWdubWVudFwiKTtcblxuICBjb25zdCBkYXRhID0ge1xuICAgIGdyb3VwX2lkOiBncm91cElkLFxuICAgIGFzc2lnbm1lbnRfaWQ6IGFzc2lnbm1lbnRJZCxcbiAgfTtcblxuICBjb25zdCB1cmwgPSBtb2RlbC51cmxzLnJlcXVlc3RHcmFkZWJvb2s7XG4gIGNvbnN0IHJlcSA9IGJ1aWxkUmVxKGRhdGEsIFwicG9zdFwiKTtcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHVybCwgcmVxKTtcblxuICBpZiAocmVzcC5zdGF0dXMgPT09IDIwMCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwLnRleHQoKTtcbiAgICBjb25zdCB0aXRsZSA9IGRhdGEuc3BsaXQoXCJcXG5cIilbMF07XG4gICAgY29uc3QgY3N2ID0gZGF0YVxuICAgICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgICAuc2xpY2UoMSlcbiAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgIF9kb3dubG9hZEdyYWRlYm9vayh0aXRsZSwgY3N2KTtcbiAgfSBlbHNlIGlmIChyZXNwLnN0YXR1cyA9PT0gMjAxKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgIGNvbnN0IHRhc2sgPSB7XG4gICAgICBpZDogZGF0YS5pZCxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgY29tcGxldGVkOiBkYXRhLmNvbXBsZXRlZCxcbiAgICAgIGRhdGV0aW1lOiBuZXcgRGF0ZShkYXRhLmRhdGV0aW1lKSxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICB9O1xuICAgIG1vZGVsLnRhc2tzLnVuc2hpZnQodGFzayk7XG4gICAgc2V0VGltZW91dCgoKSA9PiBnZXRHcmFkZWJvb2tSZXN1bHQodGFzayksIDApO1xuICAgIHVwZGF0ZU5vdGlmaWNhdGlvbnMoZ2V0Tm90aWZpY2F0aW9ucygpKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhyZXNwKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRHcmFkZWJvb2tSZXN1bHQodGFzazogVGFzayk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1cmwgPSBtb2RlbC51cmxzLmdyYWRlYm9va1Jlc3VsdDtcbiAgY29uc3QgcmVxID0gYnVpbGRSZXEoeyB0YXNrX2lkOiB0YXNrLmlkIH0sIFwicG9zdFwiKTtcblxuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsLCByZXEpO1xuXG4gIGlmIChyZXNwLm9rKSB7XG4gICAgdGFzay5jb21wbGV0ZWQgPSB0cnVlO1xuICAgIHVwZGF0ZU5vdGlmaWNhdGlvbnMoZ2V0Tm90aWZpY2F0aW9ucygpKTtcbiAgfSBlbHNlIGlmIChyZXNwLnN0YXR1cyA9PSAxMDIpIHtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGdldEdyYWRlYm9va1Jlc3VsdCh0YXNrKSwgQ0hFQ0tfRVZFUlkgKiAxMDAwKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRhc2suY29tcGxldGVkID0gdHJ1ZTtcbiAgICB0YXNrLmVycm9yID0gdHJ1ZTtcbiAgICB1cGRhdGVOb3RpZmljYXRpb25zKGdldE5vdGlmaWNhdGlvbnMoKSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlR3JhZGVib29rRXJyb3IodGFzazogVGFzayk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1cmwgPSBtb2RlbC51cmxzLnJlbW92ZUZhaWxlZEdyYWRlYm9vaztcbiAgY29uc3QgcmVxID0gYnVpbGRSZXEoeyB0YXNrX2lkOiB0YXNrLmlkIH0sIFwicG9zdFwiKTtcblxuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsLCByZXEpO1xuICBpZiAocmVzcC5vaykge1xuICAgIG1vZGVsLnRhc2tzID0gbW9kZWwudGFza3MuZmlsdGVyKHQgPT4gdC5pZCAhPT0gdGFzay5pZCk7XG4gIH1cbiAgdXBkYXRlTm90aWZpY2F0aW9ucyhnZXROb3RpZmljYXRpb25zKCkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBkb3dubG9hZEdyYWRlYm9vayh0YXNrOiBUYXNrKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgdGFza19pZDogdGFzay5pZCxcbiAgfTtcbiAgY29uc3QgdXJsID0gbW9kZWwudXJscy5kb3dubG9hZEdyYWRlYm9vaztcbiAgY29uc3QgcmVxID0gYnVpbGRSZXEoZGF0YSwgXCJwb3N0XCIpO1xuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsLCByZXEpO1xuXG4gIGlmIChyZXNwLm9rKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3AudGV4dCgpO1xuICAgIGNvbnN0IHRpdGxlID0gZGF0YS5zcGxpdChcIlxcblwiKVswXTtcbiAgICBjb25zdCBjc3YgPSBkYXRhXG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5zbGljZSgxKVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgX2Rvd25sb2FkR3JhZGVib29rKHRpdGxlLCBjc3YpO1xuICAgIG1vZGVsLnRhc2tzID0gbW9kZWwudGFza3MuZmlsdGVyKHQgPT4gdC5pZCAhPSB0YXNrLmlkKTtcbiAgICB1cGRhdGVOb3RpZmljYXRpb25zKGdldE5vdGlmaWNhdGlvbnMoKSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2cocmVzcCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2Rvd25sb2FkR3JhZGVib29rKHRpdGxlOiBzdHJpbmcsIGNzdjogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgYS5ocmVmID0gYGRhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCwgJHtlc2NhcGUoY3N2KX1gO1xuICBhLnRhcmdldCA9IFwiX2JsYW5rXCI7XG4gIGEuZG93bmxvYWQgPSB0aXRsZTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcbiAgYS5jbGljaygpO1xuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xufVxuXG5mdW5jdGlvbiBnZXROb3RpZmljYXRpb25zKCk6IEFycmF5PE5vdGlmaWNhdGlvbj4ge1xuICByZXR1cm4gbW9kZWwudGFza3MubWFwKHRhc2sgPT4gKHtcbiAgICB0ZXh0OiB0YXNrLmNvbXBsZXRlZFxuICAgICAgPyB0YXNrLmVycm9yXG4gICAgICAgID8gYFRoZXJlIHdhcyBhbiBlcnJvciBjcmVhdGluZyB0aGUgZ3JhZGVib29rIGZvciAke3Rhc2suZGVzY3JpcHRpb259LmBcbiAgICAgICAgOiBgVGhlIGdyYWRlYm9vayBmb3IgJHt0YXNrLmRlc2NyaXB0aW9ufSBpcyByZWFkeS5gXG4gICAgICA6IGBDb21wdXRpbmcgdGhlIGdyYWRlYm9vayBmb3IgJHt0YXNrLmRlc2NyaXB0aW9ufS4uLmAsXG4gICAgaW5Qcm9ncmVzczogIXRhc2suY29tcGxldGVkLFxuICAgIGVycm9yOiB0YXNrLmVycm9yLFxuICAgIG9uQ2xpY2s6XG4gICAgICB0YXNrLmNvbXBsZXRlZCAmJiAhdGFzay5lcnJvclxuICAgICAgICA/IGFzeW5jICgpID0+IGF3YWl0IGRvd25sb2FkR3JhZGVib29rKHRhc2spXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdW5kZWZpbmVkLFxuICAgIG9uQ2xvc2VDbGljazogYXN5bmMgKCkgPT4gYXdhaXQgcmVtb3ZlR3JhZGVib29rRXJyb3IodGFzayksXG4gIH0pKTtcbn1cblxuLyoqKioqKioqL1xuLyogdmlldyAqL1xuLyoqKioqKioqL1xuXG4vKioqKioqKioqKioqKi9cbi8qIGxpc3RlbmVycyAqL1xuLyoqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGluaXRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gIGFkZEdyYWRlYm9va0xpc3RlbmVycygpO1xufVxuXG5mdW5jdGlvbiBhZGRHcmFkZWJvb2tMaXN0ZW5lcnMoKTogdm9pZCB7XG4gIFsuLi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhZGVib29rLWJ1dHRvblwiKV0uZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhd2FpdCByZXF1ZXN0R3JhZGVib29rKGV2ZW50KSxcbiAgICApO1xuICB9KTtcbn1cblxuLyoqKioqKioqL1xuLyogaW5pdCAqL1xuLyoqKioqKioqL1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCh1cmxzOiB7XG4gIHJlcXVlc3RHcmFkZWJvb2s6IHN0cmluZyxcbiAgZ3JhZGVib29rUmVzdWx0OiBzdHJpbmcsXG4gIHJlbW92ZUZhaWxlZEdyYWRlYm9vazogc3RyaW5nLFxuICBkb3dubG9hZEdyYWRlYm9vazogc3RyaW5nLFxuICB0YXNrczogc3RyaW5nLFxufSk6IHZvaWQge1xuICBpbml0TW9kZWwodXJscyk7XG4gIHVwZGF0ZSgpO1xuICBpbml0TGlzdGVuZXJzKCk7XG59XG4iLCIvLyBAZmxvd1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCB7IGluaXQgYXMgaW5pdE5vdGlmaWNhdGlvbnMgfSBmcm9tIFwiLi9fdGVhY2hlci9ub3RpZmljYXRpb25zLmpzXCI7XG5leHBvcnQgeyBpbml0IGFzIGluaXRHcmFkZWJvb2tzIH0gZnJvbSBcIi4vX3RlYWNoZXIvZ3JhZGVib29rcy5qc1wiO1xuIl0sIm5hbWVzIjpbImNsZWFyIiwibm9kZSIsImhhc0NoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsImNyZWF0ZVN2ZyIsIm5hbWUiLCJzdmciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsInVzZSIsInNldEF0dHJpYnV0ZU5TIiwiYXBwZW5kIiwibW9kZWwiLCJpbml0TW9kZWwiLCJub3RpZmljYXRpb25zT3BlbiIsIm5vdGlmaWNhdGlvbnMiLCJ0b2dnbGVOb3RpZmljYXRpb25zIiwibm90aWZpY2F0aW9uc1ZpZXciLCJ1cGRhdGVOb3RpZmljYXRpb25zIiwidmlldyIsInF1ZXJ5U2VsZWN0b3IiLCJiYWRnZSIsIm5vdGlmaWNhdGlvbnNMaXN0IiwibGVuZ3RoIiwidGV4dENvbnRlbnQiLCJmaWx0ZXIiLCJub3RpZmljYXRpb24iLCJpblByb2dyZXNzIiwidG9TdHJpbmciLCJzdHlsZSIsImRpc3BsYXkiLCJtYXAiLCJhcHBlbmRDaGlsZCIsIm5vdGlmaWNhdGlvblZpZXciLCJub05vdGlmaWNhdGlvblZpZXciLCJzb21lIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkNsaWNrIiwic3Bpbm5lciIsImljb24iLCJlcnJvciIsIm9uQ2xvc2VDbGljayIsImRlc2NyaXB0aW9uIiwidGV4dCIsImluaXRFdmVudExpc3RlbmVycyIsImFkZE5vdGlmaWNhdGlvbnNPcGVuTGlzdGVuZXIiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImJvZHkiLCJpbml0IiwiZ2V0Q3NyZlRva2VuIiwiY29va2llIiwic3BsaXQiLCJjIiwidHJpbSIsInN1YnN0cmluZyIsImRlY29kZVVSSUNvbXBvbmVudCIsImJ1aWxkUmVxIiwiZGF0YSIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwidG9VcHBlckNhc2UiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsIkVycm9yIiwiQ0hFQ0tfRVZFUlkiLCJ1cmxzIiwidGFza3MiLCJyZXF1ZXN0R3JhZGVib29rIiwiZ3JhZGVib29rUmVzdWx0IiwicmVtb3ZlRmFpbGVkR3JhZGVib29rIiwiZG93bmxvYWRHcmFkZWJvb2siLCJ1cGRhdGUiLCJnZXRUYXNrcyIsInVybCIsInJlcSIsImZldGNoIiwidGhlbiIsInJlc3AiLCJqc29uIiwiaW5pdFRhc2tzIiwidGFzayIsImlkIiwiY29tcGxldGVkIiwiZGF0ZXRpbWUiLCJEYXRlIiwic29ydCIsImEiLCJiIiwiZ2V0Tm90aWZpY2F0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJnZXRHcmFkZWJvb2tSZXN1bHQiLCJidXR0b24iLCJjdXJyZW50VGFyZ2V0IiwiZ3JvdXBJZCIsImdldEF0dHJpYnV0ZSIsImFzc2lnbm1lbnRJZCIsImdyb3VwX2lkIiwiYXNzaWdubWVudF9pZCIsInN0YXR1cyIsInRpdGxlIiwiY3N2Iiwic2xpY2UiLCJqb2luIiwiX2Rvd25sb2FkR3JhZGVib29rIiwidW5zaGlmdCIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwibG9nIiwidGFza19pZCIsIm9rIiwicmVzb2x2ZSIsInJlbW92ZUdyYWRlYm9va0Vycm9yIiwidCIsImhyZWYiLCJlc2NhcGUiLCJ0YXJnZXQiLCJkb3dubG9hZCIsImNsaWNrIiwidW5kZWZpbmVkIiwiaW5pdExpc3RlbmVycyIsImFkZEdyYWRlYm9va0xpc3RlbmVycyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJmb3JFYWNoIl0sIm1hcHBpbmdzIjoiOzs7QUFDQTs7QUFFQSxBQUFPLFNBQVNBLEtBQVQsQ0FBZUMsSUFBZixFQUErQztTQUM3Q0EsSUFBSSxDQUFDQyxhQUFMLEVBQVAsRUFBNkI7O0lBRTNCRCxJQUFJLENBQUNFLFdBQUwsQ0FBaUJGLElBQUksQ0FBQ0csU0FBdEI7OztTQUVLSCxJQUFQ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"}