{"version":3,"file":"teacher.min.js","sources":["peerinst/static/peerinst/js/utils.js","peerinst/static/peerinst/js/_teacher/notifications.js","peerinst/static/peerinst/js/_ajax/utils.js","peerinst/static/peerinst/js/_teacher/gradebooks.js","peerinst/static/peerinst/js/teacher.js"],"sourcesContent":["// @flow\n\"use strict\";\n\nexport function clear(node: HTMLElement): HTMLElement {\n  while (node.hasChildNodes()) {\n    // $FlowFixMe\n    node.removeChild(node.lastChild);\n  }\n  return node;\n}\n\nexport function formatDatetime(datetime: Date): string {\n  return (\n    datetime.toLocaleString(\"en-ca\", { year: \"numeric\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { month: \"2-digit\" }) +\n    \"-\" +\n    datetime.toLocaleString(\"en-ca\", { day: \"2-digit\" }) +\n    \" \" +\n    datetime.toLocaleString(\"en-ca\", { hour: \"2-digit\", hour12: false }) +\n    \":\" +\n    datetime.toLocaleString(\"en-ca\", { minute: \"2-digit\" })\n  );\n}\n\nexport function createSvg(name: string): Element {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  const use = document.createElementNS(\"http://www.w3.org/2000/svg\", \"use\");\n  use.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", `#${name}`);\n  svg.append(use);\n  return svg;\n}\n\nexport function showAlert(msg: string) {\n  const fullPageBox = document.createElement(\"div\");\n  fullPageBox.classList.add(\"alert-box__full-page\");\n  fullPageBox.addEventListener(\"click\", (event: MouseEvent) => {\n    event.stopPropagation();\n    fullPageBox.parentNode?.removeChild(fullPageBox);\n  });\n  document.body?.appendChild(fullPageBox);\n\n  const box = document.createElement(\"div\");\n  box.classList.add(\"alert-box__box\");\n  box.addEventListener(\"click\", (event: MouseEvent) =>\n    event.stopPropagation(),\n  );\n  fullPageBox.appendChild(box);\n\n  const span = document.createElement(\"span\");\n  span.classList.add(\"alert-box__msg\");\n  span.textContent = msg;\n  box.appendChild(span);\n\n  const ok = document.createElement(\"button\");\n  ok.classList.add(\"alert-box__btn\", \"mdc-button\", \"mdc-button--unelevated\");\n  ok.textContent = \"Ok\";\n  box.appendChild(ok);\n}\n","// @flow\n\nimport { clear, createSvg } from \"../utils.js\";\n\n/*********/\n/* model */\n/*********/\n\nexport type Notification = {\n  text: string,\n  inProgress: boolean,\n  error: boolean,\n  onClick: () => Promise<void>,\n  onCloseClick: () => Promise<void>,\n};\n\nlet model: {\n  notificationsOpen: boolean,\n  notifications: Array<Notification>,\n};\n\nfunction initModel(): void {\n  model = {\n    notificationsOpen: false,\n    notifications: [],\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction toggleNotifications(): void {\n  model.notificationsOpen = !model.notificationsOpen;\n  notificationsView();\n}\n\nexport function updateNotifications(notifications: Array<Notification>): void {\n  model.notifications = notifications;\n  notificationsView();\n}\n\n/********/\n/* view */\n/********/\n\nfunction view(): void {\n  notificationsView();\n}\n\nfunction notificationsView(): void {\n  const notifications = document.querySelector(\".notifications\");\n  const badge = notifications?.querySelector(\".notifications__icon__badge\");\n  const notificationsList = notifications?.querySelector(\n    \".notifications__notifications\",\n  );\n\n  if (!notifications || !badge || !notificationsList) {\n    return;\n  }\n\n  if (model.notifications.length) {\n    badge.textContent = model.notifications\n      .filter(notification => !notification.inProgress)\n      .length.toString();\n    badge.style.display = \"flex\";\n  } else {\n    badge.textContent = \"\";\n    badge.style.display = \"none\";\n  }\n\n  clear(notificationsList);\n\n  if (model.notifications.length) {\n    model.notifications.map(function(notification) {\n      notificationsList.appendChild(notificationView(notification));\n    });\n  } else {\n    notificationsList.appendChild(noNotificationView());\n  }\n\n  if (model.notifications.some(notification => notification.inProgress)) {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.add(\"notifications__spinner--loading\");\n  } else {\n    document\n      .querySelector(\".notifications__spinner\")\n      ?.classList.remove(\"notifications__spinner--loading\");\n  }\n\n  if (model.notificationsOpen) {\n    notifications.classList.add(\"notifications--open\");\n  } else {\n    notifications.classList.remove(\"notifications--open\");\n  }\n}\n\nfunction notificationView(notification: Notification): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.classList.add(\"notification\");\n  div.addEventListener(\"click\", notification.onClick);\n\n  if (notification.inProgress) {\n    const spinner = document.createElement(\"loading-spinner\");\n    spinner.classList.add(\"notification__spinner\");\n    div.appendChild(spinner);\n  } else {\n    let icon;\n    if (notification.error) {\n      icon = createSvg(\"error\");\n      icon.classList.add(\"notification__icon--error\");\n      const remove = createSvg(\"close\");\n      remove.classList.add(\"notification__close\");\n      remove.addEventListener(\"click\", notification.onCloseClick);\n      div.appendChild(remove);\n    } else {\n      div.classList.add(\"notification--completed\");\n      icon = createSvg(\"cloud_download\");\n    }\n    icon.classList.add(\"notification__icon\");\n    div.appendChild(icon);\n  }\n\n  const description = document.createElement(\"span\");\n  description.classList.add(\"notification__description\");\n  description.textContent = notification.text;\n  div.appendChild(description);\n\n  return div;\n}\n\nfunction noNotificationView(): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.textContent = \"No new notifications\";\n  return div;\n}\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initEventListeners(): void {\n  addNotificationsOpenListener();\n}\n\nfunction addNotificationsOpenListener(): void {\n  document\n    .querySelector(\".notifications\")\n    ?.addEventListener(\"click\", function(event: MouseEvent) {\n      event.stopPropagation();\n    });\n  document\n    .querySelector(\".notifications__icon\")\n    ?.addEventListener(\"click\", function(event: MouseEvent) {\n      toggleNotifications();\n    });\n  document.body?.addEventListener(\"click\", function(event: MouseEvent) {\n    if (model.notificationsOpen) {\n      event.stopPropagation();\n      toggleNotifications();\n    }\n  });\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(): void {\n  initModel();\n  view();\n  initEventListeners();\n}\n","export function getCsrfToken() {\n  const name = \"csrftoken\";\n  if (document.cookie && document.cookie !== \"\") {\n    return document.cookie\n      .split(\";\")\n      .map(c => c.trim())\n      .filter(c => c.substring(0, name.length + 1) === name + \"=\")\n      .map(c => decodeURIComponent(c.substring(name.length + 1)))[0];\n  } else {\n    return null;\n  }\n}\n\nexport function buildReq(data, method) {\n  if (method.toLowerCase() === \"get\") {\n    return {\n      method: method.toUpperCase(),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else if (method.toLowerCase() === \"post\") {\n    const body = data ? JSON.stringify(data) : \"\";\n    return {\n      method: method.toUpperCase(),\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": getCsrfToken(),\n      },\n    };\n  } else {\n    throw Error(`Method ${method} not implemented yet.`);\n  }\n}\n","// @flow\nimport { buildReq } from \"../_ajax/utils.js\";\nimport { updateNotifications } from \"./notifications.js\";\nimport type { Notification } from \"./notifications.js\";\n\n/*********/\n/* model */\n/*********/\n\nconst CHECK_EVERY = 0.5;\n\ntype Task = {\n  id: string,\n  description: string,\n  completed: boolean,\n  datetime: Date,\n  error: boolean,\n};\n\nlet model: {\n  urls: {\n    requestGradebook: string,\n    gradebookResult: string,\n    removeFailedGradebook: string,\n    downloadGradebook: string,\n    tasks: string,\n  },\n  tasks: Array<Task>,\n};\n\nfunction initModel(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  model = {\n    tasks: [],\n    urls: {\n      requestGradebook: urls.requestGradebook,\n      gradebookResult: urls.gradebookResult,\n      removeFailedGradebook: urls.removeFailedGradebook,\n      downloadGradebook: urls.downloadGradebook,\n      tasks: urls.tasks,\n    },\n  };\n}\n\n/**********/\n/* update */\n/**********/\n\nfunction update(): void {\n  getTasks();\n}\n\nfunction getTasks(): void {\n  const url = model.urls.tasks;\n  const req = buildReq({}, \"get\");\n\n  fetch(url, req)\n    .then(resp => resp.json())\n    .then(data => {\n      initTasks(data.tasks);\n    });\n}\n\nasync function initTasks(\n  data: Array<{\n    id: string,\n    description: string,\n    completed: boolean,\n    datetime: string,\n  }>,\n): Promise<void> {\n  model.tasks = data\n    .map(task => ({\n      id: task.id,\n      description: task.description,\n      completed: task.completed,\n      datetime: new Date(task.datetime),\n      error: false,\n    }))\n    .sort((a, b) =>\n      a.datetime > b.datetime ? -1 : a.datetime < b.datetime ? 1 : 0,\n    );\n  updateNotifications(getNotifications());\n  Promise.all(\n    model.tasks\n      .filter(task => !task.completed)\n      .map(task => getGradebookResult(task)),\n  );\n}\n\nasync function requestGradebook(event: MouseEvent): Promise<void> {\n  event.stopPropagation();\n  const button = event.currentTarget;\n  const groupId = button.getAttribute(\"data-group\");\n  const assignmentId = button.getAttribute(\"data-assignment\");\n\n  const data = {\n    group_id: groupId,\n    assignment_id: assignmentId,\n  };\n\n  const url = model.urls.requestGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.status === 200) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data\n      .split(\"\\n\")\n      .slice(1)\n      .join(\"\\n\");\n    _downloadGradebook(title, csv);\n  } else if (resp.status === 201) {\n    const data = await resp.json();\n    const task = {\n      id: data.id,\n      description: data.description,\n      completed: data.completed,\n      datetime: new Date(data.datetime),\n      error: false,\n    };\n    model.tasks.unshift(task);\n    setTimeout(() => getGradebookResult(task), 0);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nasync function getGradebookResult(task: Task): Promise<void> {\n  const url = model.urls.gradebookResult;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n\n  if (resp.ok) {\n    task.completed = true;\n    updateNotifications(getNotifications());\n  } else if (resp.status == 102) {\n    await new Promise(resolve =>\n      setTimeout(() => getGradebookResult(task), CHECK_EVERY * 1000),\n    );\n  } else {\n    task.completed = true;\n    task.error = true;\n    updateNotifications(getNotifications());\n  }\n}\n\nasync function removeGradebookError(task: Task): Promise<void> {\n  const url = model.urls.removeFailedGradebook;\n  const req = buildReq({ task_id: task.id }, \"post\");\n\n  const resp = await fetch(url, req);\n  if (resp.ok) {\n    model.tasks = model.tasks.filter(t => t.id !== task.id);\n  }\n  updateNotifications(getNotifications());\n}\n\nasync function downloadGradebook(task: Task): Promise<void> {\n  const data = {\n    task_id: task.id,\n  };\n  const url = model.urls.downloadGradebook;\n  const req = buildReq(data, \"post\");\n  const resp = await fetch(url, req);\n\n  if (resp.ok) {\n    const data = await resp.text();\n    const title = data.split(\"\\n\")[0];\n    const csv = data\n      .split(\"\\n\")\n      .slice(1)\n      .join(\"\\n\");\n    _downloadGradebook(title, csv);\n    model.tasks = model.tasks.filter(t => t.id != task.id);\n    updateNotifications(getNotifications());\n  } else {\n    console.log(resp);\n  }\n}\n\nfunction _downloadGradebook(title: string, csv: string): void {\n  const a = document.createElement(\"a\");\n  a.href = `data:text/csv;charset=utf-8, ${escape(csv)}`;\n  a.target = \"_blank\";\n  a.download = title;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n}\n\nfunction getNotifications(): Array<Notification> {\n  return model.tasks.map(task => ({\n    text: task.completed\n      ? task.error\n        ? `There was an error creating the gradebook for ${task.description}.`\n        : `The gradebook for ${task.description} is ready.`\n      : `Computing the gradebook for ${task.description}...`,\n    inProgress: !task.completed,\n    error: task.error,\n    onClick:\n      task.completed && !task.error\n        ? async () => await downloadGradebook(task)\n        : async () => undefined,\n    onCloseClick: async () => await removeGradebookError(task),\n  }));\n}\n\n/********/\n/* view */\n/********/\n\n/*************/\n/* listeners */\n/*************/\n\nfunction initListeners(): void {\n  addGradebookListeners();\n}\n\nfunction addGradebookListeners(): void {\n  [...document.getElementsByClassName(\"gradebook-button\")].forEach(button => {\n    button.addEventListener(\n      \"click\",\n      async (event: MouseEvent) => await requestGradebook(event),\n    );\n  });\n}\n\n/********/\n/* init */\n/********/\n\nexport function init(urls: {\n  requestGradebook: string,\n  gradebookResult: string,\n  removeFailedGradebook: string,\n  downloadGradebook: string,\n  tasks: string,\n}): void {\n  initModel(urls);\n  update();\n  initListeners();\n}\n","// @flow\n\"use strict\";\n\nexport { init as initNotifications } from \"./_teacher/notifications.js\";\nexport { init as initGradebooks } from \"./_teacher/gradebooks.js\";\n"],"names":["clear","node","hasChildNodes","removeChild","lastChild","createSvg","name","svg","document","createElementNS","use","setAttributeNS","append","model","initModel","notificationsOpen","notifications","toggleNotifications","notificationsView","updateNotifications","view","querySelector","badge","notificationsList","length","textContent","filter","notification","inProgress","toString","style","display","map","appendChild","notificationView","noNotificationView","some","classList","add","remove","div","createElement","addEventListener","onClick","spinner","icon","error","onCloseClick","description","text","initEventListeners","addNotificationsOpenListener","event","stopPropagation","body","init","getCsrfToken","cookie","split","c","trim","substring","decodeURIComponent","buildReq","data","method","toLowerCase","toUpperCase","headers","JSON","stringify","Error","CHECK_EVERY","urls","tasks","requestGradebook","gradebookResult","removeFailedGradebook","downloadGradebook","update","getTasks","url","req","fetch","then","resp","json","initTasks","task","id","completed","datetime","Date","sort","a","b","getNotifications","Promise","all","getGradebookResult","button","currentTarget","groupId","getAttribute","assignmentId","group_id","assignment_id","status","title","csv","slice","join","_downloadGradebook","unshift","setTimeout","console","log","task_id","ok","resolve","removeGradebookError","t","href","escape","target","download","click","undefined","initListeners","addGradebookListeners","getElementsByClassName","forEach"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy91dGlscy5qcyIsIi9ob21lL2FudG9pbmUvZG9jdW1lbnRzL3dvcmsvc2NpdmVyby9wcm9qZWN0cy9kYWxpdGUvZGFsaXRlL3BlZXJpbnN0L3N0YXRpYy9wZWVyaW5zdC9qcy9fdGVhY2hlci9ub3RpZmljYXRpb25zLmpzIiwiL2hvbWUvYW50b2luZS9kb2N1bWVudHMvd29yay9zY2l2ZXJvL3Byb2plY3RzL2RhbGl0ZS9kYWxpdGUvcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL19hamF4L3V0aWxzLmpzIiwiL2hvbWUvYW50b2luZS9kb2N1bWVudHMvd29yay9zY2l2ZXJvL3Byb2plY3RzL2RhbGl0ZS9kYWxpdGUvcGVlcmluc3Qvc3RhdGljL3BlZXJpbnN0L2pzL190ZWFjaGVyL2dyYWRlYm9va3MuanMiLCIvaG9tZS9hbnRvaW5lL2RvY3VtZW50cy93b3JrL3NjaXZlcm8vcHJvamVjdHMvZGFsaXRlL2RhbGl0ZS9wZWVyaW5zdC9zdGF0aWMvcGVlcmluc3QvanMvdGVhY2hlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihub2RlOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgd2hpbGUgKG5vZGUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZXRpbWUoZGF0ZXRpbWU6IERhdGUpOiBzdHJpbmcge1xuICByZXR1cm4gKFxuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyB5ZWFyOiBcIm51bWVyaWNcIiB9KSArXG4gICAgXCItXCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBtb250aDogXCIyLWRpZ2l0XCIgfSkgK1xuICAgIFwiLVwiICtcbiAgICBkYXRldGltZS50b0xvY2FsZVN0cmluZyhcImVuLWNhXCIsIHsgZGF5OiBcIjItZGlnaXRcIiB9KSArXG4gICAgXCIgXCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBob3VyOiBcIjItZGlnaXRcIiwgaG91cjEyOiBmYWxzZSB9KSArXG4gICAgXCI6XCIgK1xuICAgIGRhdGV0aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW4tY2FcIiwgeyBtaW51dGU6IFwiMi1kaWdpdFwiIH0pXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdmcobmFtZTogc3RyaW5nKTogRWxlbWVudCB7XG4gIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICBjb25zdCB1c2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInVzZVwiKTtcbiAgdXNlLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLCBcImhyZWZcIiwgYCMke25hbWV9YCk7XG4gIHN2Zy5hcHBlbmQodXNlKTtcbiAgcmV0dXJuIHN2Zztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dBbGVydChtc2c6IHN0cmluZykge1xuICBjb25zdCBmdWxsUGFnZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGZ1bGxQYWdlQm94LmNsYXNzTGlzdC5hZGQoXCJhbGVydC1ib3hfX2Z1bGwtcGFnZVwiKTtcbiAgZnVsbFBhZ2VCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGZ1bGxQYWdlQm94LnBhcmVudE5vZGU/LnJlbW92ZUNoaWxkKGZ1bGxQYWdlQm94KTtcbiAgfSk7XG4gIGRvY3VtZW50LmJvZHk/LmFwcGVuZENoaWxkKGZ1bGxQYWdlQm94KTtcblxuICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBib3guY2xhc3NMaXN0LmFkZChcImFsZXJ0LWJveF9fYm94XCIpO1xuICBib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudDogTW91c2VFdmVudCkgPT5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKSxcbiAgKTtcbiAgZnVsbFBhZ2VCb3guYXBwZW5kQ2hpbGQoYm94KTtcblxuICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIHNwYW4uY2xhc3NMaXN0LmFkZChcImFsZXJ0LWJveF9fbXNnXCIpO1xuICBzcGFuLnRleHRDb250ZW50ID0gbXNnO1xuICBib3guYXBwZW5kQ2hpbGQoc3Bhbik7XG5cbiAgY29uc3Qgb2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBvay5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtYm94X19idG5cIiwgXCJtZGMtYnV0dG9uXCIsIFwibWRjLWJ1dHRvbi0tdW5lbGV2YXRlZFwiKTtcbiAgb2sudGV4dENvbnRlbnQgPSBcIk9rXCI7XG4gIGJveC5hcHBlbmRDaGlsZChvayk7XG59XG4iLCIvLyBAZmxvd1xuXG5pbXBvcnQgeyBjbGVhciwgY3JlYXRlU3ZnIH0gZnJvbSBcIi4uL3V0aWxzLmpzXCI7XG5cbi8qKioqKioqKiovXG4vKiBtb2RlbCAqL1xuLyoqKioqKioqKi9cblxuZXhwb3J0IHR5cGUgTm90aWZpY2F0aW9uID0ge1xuICB0ZXh0OiBzdHJpbmcsXG4gIGluUHJvZ3Jlc3M6IGJvb2xlYW4sXG4gIGVycm9yOiBib29sZWFuLFxuICBvbkNsaWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICBvbkNsb3NlQ2xpY2s6ICgpID0+IFByb21pc2U8dm9pZD4sXG59O1xuXG5sZXQgbW9kZWw6IHtcbiAgbm90aWZpY2F0aW9uc09wZW46IGJvb2xlYW4sXG4gIG5vdGlmaWNhdGlvbnM6IEFycmF5PE5vdGlmaWNhdGlvbj4sXG59O1xuXG5mdW5jdGlvbiBpbml0TW9kZWwoKTogdm9pZCB7XG4gIG1vZGVsID0ge1xuICAgIG5vdGlmaWNhdGlvbnNPcGVuOiBmYWxzZSxcbiAgICBub3RpZmljYXRpb25zOiBbXSxcbiAgfTtcbn1cblxuLyoqKioqKioqKiovXG4vKiB1cGRhdGUgKi9cbi8qKioqKioqKioqL1xuXG5mdW5jdGlvbiB0b2dnbGVOb3RpZmljYXRpb25zKCk6IHZvaWQge1xuICBtb2RlbC5ub3RpZmljYXRpb25zT3BlbiA9ICFtb2RlbC5ub3RpZmljYXRpb25zT3BlbjtcbiAgbm90aWZpY2F0aW9uc1ZpZXcoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU5vdGlmaWNhdGlvbnMobm90aWZpY2F0aW9uczogQXJyYXk8Tm90aWZpY2F0aW9uPik6IHZvaWQge1xuICBtb2RlbC5ub3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9ucztcbiAgbm90aWZpY2F0aW9uc1ZpZXcoKTtcbn1cblxuLyoqKioqKioqL1xuLyogdmlldyAqL1xuLyoqKioqKioqL1xuXG5mdW5jdGlvbiB2aWV3KCk6IHZvaWQge1xuICBub3RpZmljYXRpb25zVmlldygpO1xufVxuXG5mdW5jdGlvbiBub3RpZmljYXRpb25zVmlldygpOiB2b2lkIHtcbiAgY29uc3Qgbm90aWZpY2F0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubm90aWZpY2F0aW9uc1wiKTtcbiAgY29uc3QgYmFkZ2UgPSBub3RpZmljYXRpb25zPy5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbnNfX2ljb25fX2JhZGdlXCIpO1xuICBjb25zdCBub3RpZmljYXRpb25zTGlzdCA9IG5vdGlmaWNhdGlvbnM/LnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIubm90aWZpY2F0aW9uc19fbm90aWZpY2F0aW9uc1wiLFxuICApO1xuXG4gIGlmICghbm90aWZpY2F0aW9ucyB8fCAhYmFkZ2UgfHwgIW5vdGlmaWNhdGlvbnNMaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKG1vZGVsLm5vdGlmaWNhdGlvbnMubGVuZ3RoKSB7XG4gICAgYmFkZ2UudGV4dENvbnRlbnQgPSBtb2RlbC5ub3RpZmljYXRpb25zXG4gICAgICAuZmlsdGVyKG5vdGlmaWNhdGlvbiA9PiAhbm90aWZpY2F0aW9uLmluUHJvZ3Jlc3MpXG4gICAgICAubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgYmFkZ2Uuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9IGVsc2Uge1xuICAgIGJhZGdlLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBiYWRnZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH1cblxuICBjbGVhcihub3RpZmljYXRpb25zTGlzdCk7XG5cbiAgaWYgKG1vZGVsLm5vdGlmaWNhdGlvbnMubGVuZ3RoKSB7XG4gICAgbW9kZWwubm90aWZpY2F0aW9ucy5tYXAoZnVuY3Rpb24obm90aWZpY2F0aW9uKSB7XG4gICAgICBub3RpZmljYXRpb25zTGlzdC5hcHBlbmRDaGlsZChub3RpZmljYXRpb25WaWV3KG5vdGlmaWNhdGlvbikpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG5vdGlmaWNhdGlvbnNMaXN0LmFwcGVuZENoaWxkKG5vTm90aWZpY2F0aW9uVmlldygpKTtcbiAgfVxuXG4gIGlmIChtb2RlbC5ub3RpZmljYXRpb25zLnNvbWUobm90aWZpY2F0aW9uID0+IG5vdGlmaWNhdGlvbi5pblByb2dyZXNzKSkge1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5ub3RpZmljYXRpb25zX19zcGlubmVyXCIpXG4gICAgICA/LmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25zX19zcGlubmVyLS1sb2FkaW5nXCIpO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5ub3RpZmljYXRpb25zX19zcGlubmVyXCIpXG4gICAgICA/LmNsYXNzTGlzdC5yZW1vdmUoXCJub3RpZmljYXRpb25zX19zcGlubmVyLS1sb2FkaW5nXCIpO1xuICB9XG5cbiAgaWYgKG1vZGVsLm5vdGlmaWNhdGlvbnNPcGVuKSB7XG4gICAgbm90aWZpY2F0aW9ucy5jbGFzc0xpc3QuYWRkKFwibm90aWZpY2F0aW9ucy0tb3BlblwiKTtcbiAgfSBlbHNlIHtcbiAgICBub3RpZmljYXRpb25zLmNsYXNzTGlzdC5yZW1vdmUoXCJub3RpZmljYXRpb25zLS1vcGVuXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmaWNhdGlvblZpZXcobm90aWZpY2F0aW9uOiBOb3RpZmljYXRpb24pOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi5jbGFzc0xpc3QuYWRkKFwibm90aWZpY2F0aW9uXCIpO1xuICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG5vdGlmaWNhdGlvbi5vbkNsaWNrKTtcblxuICBpZiAobm90aWZpY2F0aW9uLmluUHJvZ3Jlc3MpIHtcbiAgICBjb25zdCBzcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxvYWRpbmctc3Bpbm5lclwiKTtcbiAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25fX3NwaW5uZXJcIik7XG4gICAgZGl2LmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICB9IGVsc2Uge1xuICAgIGxldCBpY29uO1xuICAgIGlmIChub3RpZmljYXRpb24uZXJyb3IpIHtcbiAgICAgIGljb24gPSBjcmVhdGVTdmcoXCJlcnJvclwiKTtcbiAgICAgIGljb24uY2xhc3NMaXN0LmFkZChcIm5vdGlmaWNhdGlvbl9faWNvbi0tZXJyb3JcIik7XG4gICAgICBjb25zdCByZW1vdmUgPSBjcmVhdGVTdmcoXCJjbG9zZVwiKTtcbiAgICAgIHJlbW92ZS5jbGFzc0xpc3QuYWRkKFwibm90aWZpY2F0aW9uX19jbG9zZVwiKTtcbiAgICAgIHJlbW92ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbm90aWZpY2F0aW9uLm9uQ2xvc2VDbGljayk7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQocmVtb3ZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb24tLWNvbXBsZXRlZFwiKTtcbiAgICAgIGljb24gPSBjcmVhdGVTdmcoXCJjbG91ZF9kb3dubG9hZFwiKTtcbiAgICB9XG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKFwibm90aWZpY2F0aW9uX19pY29uXCIpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChpY29uKTtcbiAgfVxuXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJub3RpZmljYXRpb25fX2Rlc2NyaXB0aW9uXCIpO1xuICBkZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG5vdGlmaWNhdGlvbi50ZXh0O1xuICBkaXYuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb24pO1xuXG4gIHJldHVybiBkaXY7XG59XG5cbmZ1bmN0aW9uIG5vTm90aWZpY2F0aW9uVmlldygpOiBIVE1MRGl2RWxlbWVudCB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGRpdi50ZXh0Q29udGVudCA9IFwiTm8gbmV3IG5vdGlmaWNhdGlvbnNcIjtcbiAgcmV0dXJuIGRpdjtcbn1cblxuLyoqKioqKioqKioqKiovXG4vKiBsaXN0ZW5lcnMgKi9cbi8qKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBpbml0RXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gIGFkZE5vdGlmaWNhdGlvbnNPcGVuTGlzdGVuZXIoKTtcbn1cblxuZnVuY3Rpb24gYWRkTm90aWZpY2F0aW9uc09wZW5MaXN0ZW5lcigpOiB2b2lkIHtcbiAgZG9jdW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5ub3RpZmljYXRpb25zXCIpXG4gICAgPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLm5vdGlmaWNhdGlvbnNfX2ljb25cIilcbiAgICA/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudDogTW91c2VFdmVudCkge1xuICAgICAgdG9nZ2xlTm90aWZpY2F0aW9ucygpO1xuICAgIH0pO1xuICBkb2N1bWVudC5ib2R5Py5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAobW9kZWwubm90aWZpY2F0aW9uc09wZW4pIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdG9nZ2xlTm90aWZpY2F0aW9ucygpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKioqKioqKi9cbi8qIGluaXQgKi9cbi8qKioqKioqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKTogdm9pZCB7XG4gIGluaXRNb2RlbCgpO1xuICB2aWV3KCk7XG4gIGluaXRFdmVudExpc3RlbmVycygpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldENzcmZUb2tlbigpIHtcbiAgY29uc3QgbmFtZSA9IFwiY3NyZnRva2VuXCI7XG4gIGlmIChkb2N1bWVudC5jb29raWUgJiYgZG9jdW1lbnQuY29va2llICE9PSBcIlwiKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNvb2tpZVxuICAgICAgLnNwbGl0KFwiO1wiKVxuICAgICAgLm1hcChjID0+IGMudHJpbSgpKVxuICAgICAgLmZpbHRlcihjID0+IGMuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoICsgMSkgPT09IG5hbWUgKyBcIj1cIilcbiAgICAgIC5tYXAoYyA9PiBkZWNvZGVVUklDb21wb25lbnQoYy5zdWJzdHJpbmcobmFtZS5sZW5ndGggKyAxKSkpWzBdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFJlcShkYXRhLCBtZXRob2QpIHtcbiAgaWYgKG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSBcImdldFwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIlgtQ1NSRlRva2VuXCI6IGdldENzcmZUb2tlbigpLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2UgaWYgKG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSBcInBvc3RcIikge1xuICAgIGNvbnN0IGJvZHkgPSBkYXRhID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiBcIlwiO1xuICAgIHJldHVybiB7XG4gICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiWC1DU1JGVG9rZW5cIjogZ2V0Q3NyZlRva2VuKCksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgRXJyb3IoYE1ldGhvZCAke21ldGhvZH0gbm90IGltcGxlbWVudGVkIHlldC5gKTtcbiAgfVxufVxuIiwiLy8gQGZsb3dcbmltcG9ydCB7IGJ1aWxkUmVxIH0gZnJvbSBcIi4uL19hamF4L3V0aWxzLmpzXCI7XG5pbXBvcnQgeyB1cGRhdGVOb3RpZmljYXRpb25zIH0gZnJvbSBcIi4vbm90aWZpY2F0aW9ucy5qc1wiO1xuaW1wb3J0IHR5cGUgeyBOb3RpZmljYXRpb24gfSBmcm9tIFwiLi9ub3RpZmljYXRpb25zLmpzXCI7XG5cbi8qKioqKioqKiovXG4vKiBtb2RlbCAqL1xuLyoqKioqKioqKi9cblxuY29uc3QgQ0hFQ0tfRVZFUlkgPSAwLjU7XG5cbnR5cGUgVGFzayA9IHtcbiAgaWQ6IHN0cmluZyxcbiAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgY29tcGxldGVkOiBib29sZWFuLFxuICBkYXRldGltZTogRGF0ZSxcbiAgZXJyb3I6IGJvb2xlYW4sXG59O1xuXG5sZXQgbW9kZWw6IHtcbiAgdXJsczoge1xuICAgIHJlcXVlc3RHcmFkZWJvb2s6IHN0cmluZyxcbiAgICBncmFkZWJvb2tSZXN1bHQ6IHN0cmluZyxcbiAgICByZW1vdmVGYWlsZWRHcmFkZWJvb2s6IHN0cmluZyxcbiAgICBkb3dubG9hZEdyYWRlYm9vazogc3RyaW5nLFxuICAgIHRhc2tzOiBzdHJpbmcsXG4gIH0sXG4gIHRhc2tzOiBBcnJheTxUYXNrPixcbn07XG5cbmZ1bmN0aW9uIGluaXRNb2RlbCh1cmxzOiB7XG4gIHJlcXVlc3RHcmFkZWJvb2s6IHN0cmluZyxcbiAgZ3JhZGVib29rUmVzdWx0OiBzdHJpbmcsXG4gIHJlbW92ZUZhaWxlZEdyYWRlYm9vazogc3RyaW5nLFxuICBkb3dubG9hZEdyYWRlYm9vazogc3RyaW5nLFxuICB0YXNrczogc3RyaW5nLFxufSk6IHZvaWQge1xuICBtb2RlbCA9IHtcbiAgICB0YXNrczogW10sXG4gICAgdXJsczoge1xuICAgICAgcmVxdWVzdEdyYWRlYm9vazogdXJscy5yZXF1ZXN0R3JhZGVib29rLFxuICAgICAgZ3JhZGVib29rUmVzdWx0OiB1cmxzLmdyYWRlYm9va1Jlc3VsdCxcbiAgICAgIHJlbW92ZUZhaWxlZEdyYWRlYm9vazogdXJscy5yZW1vdmVGYWlsZWRHcmFkZWJvb2ssXG4gICAgICBkb3dubG9hZEdyYWRlYm9vazogdXJscy5kb3dubG9hZEdyYWRlYm9vayxcbiAgICAgIHRhc2tzOiB1cmxzLnRhc2tzLFxuICAgIH0sXG4gIH07XG59XG5cbi8qKioqKioqKioqL1xuLyogdXBkYXRlICovXG4vKioqKioqKioqKi9cblxuZnVuY3Rpb24gdXBkYXRlKCk6IHZvaWQge1xuICBnZXRUYXNrcygpO1xufVxuXG5mdW5jdGlvbiBnZXRUYXNrcygpOiB2b2lkIHtcbiAgY29uc3QgdXJsID0gbW9kZWwudXJscy50YXNrcztcbiAgY29uc3QgcmVxID0gYnVpbGRSZXEoe30sIFwiZ2V0XCIpO1xuXG4gIGZldGNoKHVybCwgcmVxKVxuICAgIC50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpXG4gICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICBpbml0VGFza3MoZGF0YS50YXNrcyk7XG4gICAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRUYXNrcyhcbiAgZGF0YTogQXJyYXk8e1xuICAgIGlkOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICBjb21wbGV0ZWQ6IGJvb2xlYW4sXG4gICAgZGF0ZXRpbWU6IHN0cmluZyxcbiAgfT4sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgbW9kZWwudGFza3MgPSBkYXRhXG4gICAgLm1hcCh0YXNrID0+ICh7XG4gICAgICBpZDogdGFzay5pZCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0YXNrLmRlc2NyaXB0aW9uLFxuICAgICAgY29tcGxldGVkOiB0YXNrLmNvbXBsZXRlZCxcbiAgICAgIGRhdGV0aW1lOiBuZXcgRGF0ZSh0YXNrLmRhdGV0aW1lKSxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICB9KSlcbiAgICAuc29ydCgoYSwgYikgPT5cbiAgICAgIGEuZGF0ZXRpbWUgPiBiLmRhdGV0aW1lID8gLTEgOiBhLmRhdGV0aW1lIDwgYi5kYXRldGltZSA/IDEgOiAwLFxuICAgICk7XG4gIHVwZGF0ZU5vdGlmaWNhdGlvbnMoZ2V0Tm90aWZpY2F0aW9ucygpKTtcbiAgUHJvbWlzZS5hbGwoXG4gICAgbW9kZWwudGFza3NcbiAgICAgIC5maWx0ZXIodGFzayA9PiAhdGFzay5jb21wbGV0ZWQpXG4gICAgICAubWFwKHRhc2sgPT4gZ2V0R3JhZGVib29rUmVzdWx0KHRhc2spKSxcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdEdyYWRlYm9vayhldmVudDogTW91c2VFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgY29uc3QgZ3JvdXBJZCA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLWdyb3VwXCIpO1xuICBjb25zdCBhc3NpZ25tZW50SWQgPSBidXR0b24uZ2V0QXR0cmlidXRlKFwiZGF0YS1hc3NpZ25tZW50XCIpO1xuXG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgZ3JvdXBfaWQ6IGdyb3VwSWQsXG4gICAgYXNzaWdubWVudF9pZDogYXNzaWdubWVudElkLFxuICB9O1xuXG4gIGNvbnN0IHVybCA9IG1vZGVsLnVybHMucmVxdWVzdEdyYWRlYm9vaztcbiAgY29uc3QgcmVxID0gYnVpbGRSZXEoZGF0YSwgXCJwb3N0XCIpO1xuICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2godXJsLCByZXEpO1xuXG4gIGlmIChyZXNwLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3AudGV4dCgpO1xuICAgIGNvbnN0IHRpdGxlID0gZGF0YS5zcGxpdChcIlxcblwiKVswXTtcbiAgICBjb25zdCBjc3YgPSBkYXRhXG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5zbGljZSgxKVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgX2Rvd25sb2FkR3JhZGVib29rKHRpdGxlLCBjc3YpO1xuICB9IGVsc2UgaWYgKHJlc3Auc3RhdHVzID09PSAyMDEpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgY29uc3QgdGFzayA9IHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBjb21wbGV0ZWQ6IGRhdGEuY29tcGxldGVkLFxuICAgICAgZGF0ZXRpbWU6IG5ldyBEYXRlKGRhdGEuZGF0ZXRpbWUpLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgIH07XG4gICAgbW9kZWwudGFza3MudW5zaGlmdCh0YXNrKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGdldEdyYWRlYm9va1Jlc3VsdCh0YXNrKSwgMCk7XG4gICAgdXBkYXRlTm90aWZpY2F0aW9ucyhnZXROb3RpZmljYXRpb25zKCkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKHJlc3ApO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEdyYWRlYm9va1Jlc3VsdCh0YXNrOiBUYXNrKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHVybCA9IG1vZGVsLnVybHMuZ3JhZGVib29rUmVzdWx0O1xuICBjb25zdCByZXEgPSBidWlsZFJlcSh7IHRhc2tfaWQ6IHRhc2suaWQgfSwgXCJwb3N0XCIpO1xuXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcSk7XG5cbiAgaWYgKHJlc3Aub2spIHtcbiAgICB0YXNrLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgdXBkYXRlTm90aWZpY2F0aW9ucyhnZXROb3RpZmljYXRpb25zKCkpO1xuICB9IGVsc2UgaWYgKHJlc3Auc3RhdHVzID09IDEwMikge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gZ2V0R3JhZGVib29rUmVzdWx0KHRhc2spLCBDSEVDS19FVkVSWSAqIDEwMDApLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGFzay5jb21wbGV0ZWQgPSB0cnVlO1xuICAgIHRhc2suZXJyb3IgPSB0cnVlO1xuICAgIHVwZGF0ZU5vdGlmaWNhdGlvbnMoZ2V0Tm90aWZpY2F0aW9ucygpKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZW1vdmVHcmFkZWJvb2tFcnJvcih0YXNrOiBUYXNrKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHVybCA9IG1vZGVsLnVybHMucmVtb3ZlRmFpbGVkR3JhZGVib29rO1xuICBjb25zdCByZXEgPSBidWlsZFJlcSh7IHRhc2tfaWQ6IHRhc2suaWQgfSwgXCJwb3N0XCIpO1xuXG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcSk7XG4gIGlmIChyZXNwLm9rKSB7XG4gICAgbW9kZWwudGFza3MgPSBtb2RlbC50YXNrcy5maWx0ZXIodCA9PiB0LmlkICE9PSB0YXNrLmlkKTtcbiAgfVxuICB1cGRhdGVOb3RpZmljYXRpb25zKGdldE5vdGlmaWNhdGlvbnMoKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkR3JhZGVib29rKHRhc2s6IFRhc2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICB0YXNrX2lkOiB0YXNrLmlkLFxuICB9O1xuICBjb25zdCB1cmwgPSBtb2RlbC51cmxzLmRvd25sb2FkR3JhZGVib29rO1xuICBjb25zdCByZXEgPSBidWlsZFJlcShkYXRhLCBcInBvc3RcIik7XG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh1cmwsIHJlcSk7XG5cbiAgaWYgKHJlc3Aub2spIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcC50ZXh0KCk7XG4gICAgY29uc3QgdGl0bGUgPSBkYXRhLnNwbGl0KFwiXFxuXCIpWzBdO1xuICAgIGNvbnN0IGNzdiA9IGRhdGFcbiAgICAgIC5zcGxpdChcIlxcblwiKVxuICAgICAgLnNsaWNlKDEpXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgICBfZG93bmxvYWRHcmFkZWJvb2sodGl0bGUsIGNzdik7XG4gICAgbW9kZWwudGFza3MgPSBtb2RlbC50YXNrcy5maWx0ZXIodCA9PiB0LmlkICE9IHRhc2suaWQpO1xuICAgIHVwZGF0ZU5vdGlmaWNhdGlvbnMoZ2V0Tm90aWZpY2F0aW9ucygpKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhyZXNwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfZG93bmxvYWRHcmFkZWJvb2sodGl0bGU6IHN0cmluZywgY3N2OiBzdHJpbmcpOiB2b2lkIHtcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICBhLmhyZWYgPSBgZGF0YTp0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04LCAke2VzY2FwZShjc3YpfWA7XG4gIGEudGFyZ2V0ID0gXCJfYmxhbmtcIjtcbiAgYS5kb3dubG9hZCA9IHRpdGxlO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICBhLmNsaWNrKCk7XG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7XG59XG5cbmZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnMoKTogQXJyYXk8Tm90aWZpY2F0aW9uPiB7XG4gIHJldHVybiBtb2RlbC50YXNrcy5tYXAodGFzayA9PiAoe1xuICAgIHRleHQ6IHRhc2suY29tcGxldGVkXG4gICAgICA/IHRhc2suZXJyb3JcbiAgICAgICAgPyBgVGhlcmUgd2FzIGFuIGVycm9yIGNyZWF0aW5nIHRoZSBncmFkZWJvb2sgZm9yICR7dGFzay5kZXNjcmlwdGlvbn0uYFxuICAgICAgICA6IGBUaGUgZ3JhZGVib29rIGZvciAke3Rhc2suZGVzY3JpcHRpb259IGlzIHJlYWR5LmBcbiAgICAgIDogYENvbXB1dGluZyB0aGUgZ3JhZGVib29rIGZvciAke3Rhc2suZGVzY3JpcHRpb259Li4uYCxcbiAgICBpblByb2dyZXNzOiAhdGFzay5jb21wbGV0ZWQsXG4gICAgZXJyb3I6IHRhc2suZXJyb3IsXG4gICAgb25DbGljazpcbiAgICAgIHRhc2suY29tcGxldGVkICYmICF0YXNrLmVycm9yXG4gICAgICAgID8gYXN5bmMgKCkgPT4gYXdhaXQgZG93bmxvYWRHcmFkZWJvb2sodGFzaylcbiAgICAgICAgOiBhc3luYyAoKSA9PiB1bmRlZmluZWQsXG4gICAgb25DbG9zZUNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCByZW1vdmVHcmFkZWJvb2tFcnJvcih0YXNrKSxcbiAgfSkpO1xufVxuXG4vKioqKioqKiovXG4vKiB2aWV3ICovXG4vKioqKioqKiovXG5cbi8qKioqKioqKioqKioqL1xuLyogbGlzdGVuZXJzICovXG4vKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gaW5pdExpc3RlbmVycygpOiB2b2lkIHtcbiAgYWRkR3JhZGVib29rTGlzdGVuZXJzKCk7XG59XG5cbmZ1bmN0aW9uIGFkZEdyYWRlYm9va0xpc3RlbmVycygpOiB2b2lkIHtcbiAgWy4uLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFkZWJvb2stYnV0dG9uXCIpXS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICBhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGF3YWl0IHJlcXVlc3RHcmFkZWJvb2soZXZlbnQpLFxuICAgICk7XG4gIH0pO1xufVxuXG4vKioqKioqKiovXG4vKiBpbml0ICovXG4vKioqKioqKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KHVybHM6IHtcbiAgcmVxdWVzdEdyYWRlYm9vazogc3RyaW5nLFxuICBncmFkZWJvb2tSZXN1bHQ6IHN0cmluZyxcbiAgcmVtb3ZlRmFpbGVkR3JhZGVib29rOiBzdHJpbmcsXG4gIGRvd25sb2FkR3JhZGVib29rOiBzdHJpbmcsXG4gIHRhc2tzOiBzdHJpbmcsXG59KTogdm9pZCB7XG4gIGluaXRNb2RlbCh1cmxzKTtcbiAgdXBkYXRlKCk7XG4gIGluaXRMaXN0ZW5lcnMoKTtcbn1cbiIsIi8vIEBmbG93XG5cInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0IHsgaW5pdCBhcyBpbml0Tm90aWZpY2F0aW9ucyB9IGZyb20gXCIuL190ZWFjaGVyL25vdGlmaWNhdGlvbnMuanNcIjtcbmV4cG9ydCB7IGluaXQgYXMgaW5pdEdyYWRlYm9va3MgfSBmcm9tIFwiLi9fdGVhY2hlci9ncmFkZWJvb2tzLmpzXCI7XG4iXSwibmFtZXMiOlsiY2xlYXIiLCJub2RlIiwiaGFzQ2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwiY3JlYXRlU3ZnIiwibmFtZSIsInN2ZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwidXNlIiwic2V0QXR0cmlidXRlTlMiLCJhcHBlbmQiLCJtb2RlbCIsImluaXRNb2RlbCIsIm5vdGlmaWNhdGlvbnNPcGVuIiwibm90aWZpY2F0aW9ucyIsInRvZ2dsZU5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25zVmlldyIsInVwZGF0ZU5vdGlmaWNhdGlvbnMiLCJ2aWV3IiwicXVlcnlTZWxlY3RvciIsImJhZGdlIiwibm90aWZpY2F0aW9uc0xpc3QiLCJsZW5ndGgiLCJ0ZXh0Q29udGVudCIsImZpbHRlciIsIm5vdGlmaWNhdGlvbiIsImluUHJvZ3Jlc3MiLCJ0b1N0cmluZyIsInN0eWxlIiwiZGlzcGxheSIsIm1hcCIsImFwcGVuZENoaWxkIiwibm90aWZpY2F0aW9uVmlldyIsIm5vTm90aWZpY2F0aW9uVmlldyIsInNvbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2siLCJzcGlubmVyIiwiaWNvbiIsImVycm9yIiwib25DbG9zZUNsaWNrIiwiZGVzY3JpcHRpb24iLCJ0ZXh0IiwiaW5pdEV2ZW50TGlzdGVuZXJzIiwiYWRkTm90aWZpY2F0aW9uc09wZW5MaXN0ZW5lciIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiYm9keSIsImluaXQiLCJnZXRDc3JmVG9rZW4iLCJjb29raWUiLCJzcGxpdCIsImMiLCJ0cmltIiwic3Vic3RyaW5nIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYnVpbGRSZXEiLCJkYXRhIiwibWV0aG9kIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJDSEVDS19FVkVSWSIsInVybHMiLCJ0YXNrcyIsInJlcXVlc3RHcmFkZWJvb2siLCJncmFkZWJvb2tSZXN1bHQiLCJyZW1vdmVGYWlsZWRHcmFkZWJvb2siLCJkb3dubG9hZEdyYWRlYm9vayIsInVwZGF0ZSIsImdldFRhc2tzIiwidXJsIiwicmVxIiwiZmV0Y2giLCJ0aGVuIiwicmVzcCIsImpzb24iLCJpbml0VGFza3MiLCJ0YXNrIiwiaWQiLCJjb21wbGV0ZWQiLCJkYXRldGltZSIsIkRhdGUiLCJzb3J0IiwiYSIsImIiLCJnZXROb3RpZmljYXRpb25zIiwiUHJvbWlzZSIsImFsbCIsImdldEdyYWRlYm9va1Jlc3VsdCIsImJ1dHRvbiIsImN1cnJlbnRUYXJnZXQiLCJncm91cElkIiwiZ2V0QXR0cmlidXRlIiwiYXNzaWdubWVudElkIiwiZ3JvdXBfaWQiLCJhc3NpZ25tZW50X2lkIiwic3RhdHVzIiwidGl0bGUiLCJjc3YiLCJzbGljZSIsImpvaW4iLCJfZG93bmxvYWRHcmFkZWJvb2siLCJ1bnNoaWZ0Iiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJsb2ciLCJ0YXNrX2lkIiwib2siLCJyZXNvbHZlIiwicmVtb3ZlR3JhZGVib29rRXJyb3IiLCJ0IiwiaHJlZiIsImVzY2FwZSIsInRhcmdldCIsImRvd25sb2FkIiwiY2xpY2siLCJ1bmRlZmluZWQiLCJpbml0TGlzdGVuZXJzIiwiYWRkR3JhZGVib29rTGlzdGVuZXJzIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImZvckVhY2giXSwibWFwcGluZ3MiOiI7OztBQUNBOztBQUVBLEFBQU8sU0FBU0EsS0FBVCxDQUFlQyxJQUFmLEVBQStDO1NBQzdDQSxJQUFJLENBQUNDLGFBQUwsRUFBUCxFQUE2Qjs7SUFFM0JELElBQUksQ0FBQ0UsV0FBTCxDQUFpQkYsSUFBSSxDQUFDRyxTQUF0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"}