var bundle=function(e){"use strict";function t(e,t){return{method:t.toUpperCase(),body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-CSRFToken":(n="csrftoken",document.cookie&&""!==document.cookie?document.cookie.split(";").filter(function(e){return e.replace(/^\s+/,"").replace(/\s*$/,"").substring(0,n.length+1)===n+"="}).map(function(e){return decodeURIComponent(e.substring(n.length+1))})[0]:null)}};var n}function n(e,n){var o=document.querySelector("#student-page-add-group--box input"),r=document.querySelector("#student-page-add-group--box select"),u=t(o.value?{username:n,group_link:o.value}:{username:n,group_name:r.value},"post");fetch(e,u).then(function(e){location.reload()}).catch(function(e){console.log(e)})}function o(e){var t=e.currentTarget.parentNode.querySelector("span"),n=e.currentTarget.parentNode.querySelector("input"),o=e.currentTarget.parentNode.querySelector(".student-group--id__copy"),r=e.currentTarget.parentNode.querySelector(".student-group--id__edit"),u=e.currentTarget.parentNode.querySelector(".student-group--id__confirm"),a=e.currentTarget.parentNode.querySelector(".student-group--id__cancel");t.style.display="flex",o.style.display="flex",r.style.display="flex",n.style.display="none",u.style.display="none",a.style.display="none"}function r(e,n,o){e.currentTarget.parentNode.querySelector("span");var r=e.currentTarget.parentNode.querySelector("input"),u=(e.currentTarget.parentNode.querySelector(".student-group--id__copy"),e.currentTarget.parentNode.querySelector(".student-group--id__edit"),e.currentTarget.parentNode.querySelector(".student-group--id__confirm"),e.currentTarget.parentNode.querySelector(".student-group--id__cancel"),t({student_id:r.value,group_name:o},"post"));fetch(n,u).then(function(e){location.reload()}).catch(function(e){console.log(e)})}return e.toggleJoinGroup=function(){var e=document.getElementById("student-page-add-group--box");"none"==e.style.display?e.style.display="flex":e.style.display="none"},e.toggleLeaveGroup=function(e){var t=e.currentTarget,n=void 0;"none"==(n="BUTTON"==t.tagName?t.parentNode.parentNode:t.classList.contains("student-group--remove-confirmation-box")?t:t.nextSibling).style.display?n.style.display="flex":n.style.display="none"},e.joinGroup=n,e.leaveGroup=function(e,n,o,r){var u=e.currentTarget.parentNode.parentNode.parentNode.parentNode.parentNode,a=t({username:o,group_name:r},"post");fetch(n,a).then(function(e){e.ok?u.parentNode.removeChild(u):console.log(e)}).catch(function(e){return console.log(e)})},e.toggleGroupNotifications=function(e,n,o,r){var u=e.currentTarget,a=t({username:o,group_name:r},"post");fetch(n,a).then(function(e){return e.json()}).then(function(e){e.notifications?(u.textContent="notifications",u.classList.remove("student-group--notifications__disabled")):(u.textContent="notifications_off",u.classList.add("student-group--notifications__disabled"))}).catch(function(e){console.log(e)})},e.handleJoinGroupLinkInput=function(e,t,o){var r,u;"Enter"===e.key?(n(t,o),e.currentTarget.value=""):(r=document.querySelector("#student-page-add-group--box input"),u=document.querySelector("#student-page-add-group--box select"),r.value?u.disabled=!0:u.disabled=!1)},e.removeNotification=function(e,n,o,r){var u=e.currentTarget,a=t({notification_pk:o},"post");fetch(n,a).then(function(e){e.ok?r?window.location=r:u.parentNode.removeChild(u):console.log(e)}).catch(function(e){return console.log(e)})},e.editStudentId=function(e){var t=e.currentTarget.parentNode.querySelector("span"),n=e.currentTarget.parentNode.querySelector("input"),o=e.currentTarget.parentNode.querySelector(".student-group--id__copy"),r=e.currentTarget.parentNode.querySelector(".student-group--id__edit"),u=e.currentTarget.parentNode.querySelector(".student-group--id__confirm"),a=e.currentTarget.parentNode.querySelector(".student-group--id__cancel");n.value=t.textContent,t.style.display="none",o.style.display="none",r.style.display="none",n.style.display="block",u.style.display="flex",a.style.display="flex",n.focus()},e.cancelStudentIdEdition=o,e.saveStudentId=r,e.handleStudentIdKeyDown=function(e,t,n){"Enter"===e.key?r(e,t,n):"Escape"===e.key&&o(e)},e}({});
