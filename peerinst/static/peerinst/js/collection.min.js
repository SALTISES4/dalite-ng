!function(t){"use strict";
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class e{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{}}constructor(t={}){this.adapter_=t}init(){}destroy(){}}
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */class i{static attachTo(t){return new i(t,new e)}constructor(t,e,...i){this.root_=t,this.initialize(...i),this.foundation_=void 0===e?this.getDefaultFoundation():e,this.foundation_.init(),this.initialSyncWithDOM()}initialize(){}getDefaultFoundation(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")}initialSyncWithDOM(){}destroy(){this.foundation_.destroy()}listen(t,e){this.root_.addEventListener(t,e)}unlisten(t,e){this.root_.removeEventListener(t,e)}emit(t,e,i=!1){let n;"function"==typeof CustomEvent?n=new CustomEvent(t,{detail:e,bubbles:i}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,i,!1,e)),this.root_.dispatchEvent(n)}}const n={ROOT:"mdc-snackbar",TEXT:"mdc-snackbar__text",ACTION_WRAPPER:"mdc-snackbar__action-wrapper",ACTION_BUTTON:"mdc-snackbar__action-button",ACTIVE:"mdc-snackbar--active",MULTILINE:"mdc-snackbar--multiline",ACTION_ON_BOTTOM:"mdc-snackbar--action-on-bottom"},s={TEXT_SELECTOR:".mdc-snackbar__text",ACTION_WRAPPER_SELECTOR:".mdc-snackbar__action-wrapper",ACTION_BUTTON_SELECTOR:".mdc-snackbar__action-button",SHOW_EVENT:"MDCSnackbar:show",HIDE_EVENT:"MDCSnackbar:hide"},r=2750;class a extends e{static get cssClasses(){return n}static get strings(){return s}static get defaultAdapter(){return{addClass:()=>{},removeClass:()=>{},setAriaHidden:()=>{},unsetAriaHidden:()=>{},setActionAriaHidden:()=>{},unsetActionAriaHidden:()=>{},setActionText:()=>{},setMessageText:()=>{},setFocus:()=>{},visibilityIsHidden:()=>!1,registerCapturedBlurHandler:()=>{},deregisterCapturedBlurHandler:()=>{},registerVisibilityChangeHandler:()=>{},deregisterVisibilityChangeHandler:()=>{},registerCapturedInteractionHandler:()=>{},deregisterCapturedInteractionHandler:()=>{},registerActionClickHandler:()=>{},deregisterActionClickHandler:()=>{},registerTransitionEndHandler:()=>{},deregisterTransitionEndHandler:()=>{},notifyShow:()=>{},notifyHide:()=>{}}}get active(){return this.active_}constructor(t){super(Object.assign(a.defaultAdapter,t)),this.active_=!1,this.actionWasClicked_=!1,this.dismissOnAction_=!0,this.firstFocus_=!0,this.pointerDownRecognized_=!1,this.snackbarHasFocus_=!1,this.snackbarData_=null,this.queue_=[],this.actionClickHandler_=()=>{this.actionWasClicked_=!0,this.invokeAction_()},this.visibilitychangeHandler_=()=>{clearTimeout(this.timeoutId_),this.snackbarHasFocus_=!0,this.adapter_.visibilityIsHidden()||setTimeout(this.cleanup_.bind(this),this.snackbarData_.timeout||r)},this.interactionHandler_=t=>{"touchstart"!=t.type&&"mousedown"!=t.type||(this.pointerDownRecognized_=!0),this.handlePossibleTabKeyboardFocus_(t),"focus"==t.type&&(this.pointerDownRecognized_=!1)},this.blurHandler_=()=>{clearTimeout(this.timeoutId_),this.snackbarHasFocus_=!1,this.timeoutId_=setTimeout(this.cleanup_.bind(this),this.snackbarData_.timeout||r)}}init(){this.adapter_.registerActionClickHandler(this.actionClickHandler_),this.adapter_.setAriaHidden(),this.adapter_.setActionAriaHidden()}destroy(){this.adapter_.deregisterActionClickHandler(this.actionClickHandler_),this.adapter_.deregisterCapturedBlurHandler(this.blurHandler_),this.adapter_.deregisterVisibilityChangeHandler(this.visibilitychangeHandler_),["touchstart","mousedown","focus"].forEach(t=>{this.adapter_.deregisterCapturedInteractionHandler(t,this.interactionHandler_)})}dismissesOnAction(){return this.dismissOnAction_}setDismissOnAction(t){this.dismissOnAction_=!!t}show(t){if(!t)throw new Error("Please provide a data object with at least a message to display.");if(!t.message)throw new Error("Please provide a message to be displayed.");if(t.actionHandler&&!t.actionText)throw new Error("Please provide action text with the handler.");if(this.active)return void this.queue_.push(t);clearTimeout(this.timeoutId_),this.snackbarData_=t,this.firstFocus_=!0,this.adapter_.registerVisibilityChangeHandler(this.visibilitychangeHandler_),this.adapter_.registerCapturedBlurHandler(this.blurHandler_),["touchstart","mousedown","focus"].forEach(t=>{this.adapter_.registerCapturedInteractionHandler(t,this.interactionHandler_)});const{ACTIVE:e,MULTILINE:i,ACTION_ON_BOTTOM:s}=n;this.adapter_.setMessageText(this.snackbarData_.message),this.snackbarData_.multiline&&(this.adapter_.addClass(i),this.snackbarData_.actionOnBottom&&this.adapter_.addClass(s)),this.snackbarData_.actionHandler?(this.adapter_.setActionText(this.snackbarData_.actionText),this.actionHandler_=this.snackbarData_.actionHandler,this.setActionHidden_(!1)):(this.setActionHidden_(!0),this.actionHandler_=null,this.adapter_.setActionText(null)),this.active_=!0,this.adapter_.addClass(e),this.adapter_.unsetAriaHidden(),this.adapter_.notifyShow(),this.timeoutId_=setTimeout(this.cleanup_.bind(this),this.snackbarData_.timeout||r)}handlePossibleTabKeyboardFocus_(){this.firstFocus_&&!this.pointerDownRecognized_&&this.setFocusOnAction_(),this.firstFocus_=!1}setFocusOnAction_(){this.adapter_.setFocus(),this.snackbarHasFocus_=!0,this.firstFocus_=!1}invokeAction_(){try{if(!this.actionHandler_)return;this.actionHandler_()}finally{this.dismissOnAction_&&this.cleanup_()}}cleanup_(){if(!this.snackbarHasFocus_||this.actionWasClicked_){const{ACTIVE:t,MULTILINE:e,ACTION_ON_BOTTOM:i}=n;this.adapter_.removeClass(t);const s=()=>{clearTimeout(this.timeoutId_),this.adapter_.deregisterTransitionEndHandler(s),this.adapter_.removeClass(e),this.adapter_.removeClass(i),this.setActionHidden_(!0),this.adapter_.setAriaHidden(),this.active_=!1,this.snackbarHasFocus_=!1,this.adapter_.notifyHide(),this.showNext_()};this.adapter_.registerTransitionEndHandler(s)}}showNext_(){this.queue_.length&&this.show(this.queue_.shift())}setActionHidden_(t){t?this.adapter_.setActionAriaHidden():this.adapter_.unsetActionAriaHidden()}}
/**
   * @license
   * Copyright 2016 Google Inc. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */const o={animationstart:{noPrefix:"animationstart",webkitPrefix:"webkitAnimationStart",styleProperty:"animation"},animationend:{noPrefix:"animationend",webkitPrefix:"webkitAnimationEnd",styleProperty:"animation"},animationiteration:{noPrefix:"animationiteration",webkitPrefix:"webkitAnimationIteration",styleProperty:"animation"},transitionend:{noPrefix:"transitionend",webkitPrefix:"webkitTransitionEnd",styleProperty:"transition"}},d={animation:{noPrefix:"animation",webkitPrefix:"-webkit-animation"},transform:{noPrefix:"transform",webkitPrefix:"-webkit-transform"},transition:{noPrefix:"transition",webkitPrefix:"-webkit-transition"}};function c(t,e){if(!function(t){return void 0!==t.document&&"function"==typeof t.document.createElement}(t)||!function(t){return t in o||t in d}(e))return e;const i=e in o?o:d,n=t.document.createElement("div");let s="";return s=i===o?function(t,e,i){return e[t].styleProperty in i.style?e[t].noPrefix:e[t].webkitPrefix}(e,i,n):i[e].noPrefix in n.style?i[e].noPrefix:i[e].webkitPrefix,s}function l(t,e){return c(t,e)}class u extends i{static attachTo(t){return new u(t)}show(t){this.foundation_.show(t)}getDefaultFoundation(){const{TEXT_SELECTOR:t,ACTION_BUTTON_SELECTOR:e}=a.strings,i=()=>this.root_.querySelector(t),n=()=>this.root_.querySelector(e);return new a({addClass:t=>this.root_.classList.add(t),removeClass:t=>this.root_.classList.remove(t),setAriaHidden:()=>this.root_.setAttribute("aria-hidden","true"),unsetAriaHidden:()=>this.root_.removeAttribute("aria-hidden"),setActionAriaHidden:()=>n().setAttribute("aria-hidden","true"),unsetActionAriaHidden:()=>n().removeAttribute("aria-hidden"),setActionText:t=>{n().textContent=t},setMessageText:t=>{i().textContent=t},setFocus:()=>n().focus(),visibilityIsHidden:()=>document.hidden,registerCapturedBlurHandler:t=>n().addEventListener("blur",t,!0),deregisterCapturedBlurHandler:t=>n().removeEventListener("blur",t,!0),registerVisibilityChangeHandler:t=>document.addEventListener("visibilitychange",t),deregisterVisibilityChangeHandler:t=>document.removeEventListener("visibilitychange",t),registerCapturedInteractionHandler:(t,e)=>document.body.addEventListener(t,e,!0),deregisterCapturedInteractionHandler:(t,e)=>document.body.removeEventListener(t,e,!0),registerActionClickHandler:t=>n().addEventListener("click",t),deregisterActionClickHandler:t=>n().removeEventListener("click",t),registerTransitionEndHandler:t=>this.root_.addEventListener(l(window,"transitionend"),t),deregisterTransitionEndHandler:t=>this.root_.removeEventListener(l(window,"transitionend"),t),notifyShow:()=>this.emit(a.strings.SHOW_EVENT),notifyHide:()=>this.emit(a.strings.HIDE_EVENT)})}get dismissesOnAction(){return this.foundation_.dismissesOnAction()}set dismissesOnAction(t){this.foundation_.setDismissOnAction(t)}}function h(){let t=1;$(".number-box:visible").each((function(){const e=$(this).children(".number")[0];""==e.innerHTML&&(e.innerHTML=t,t++)}))}t.enumerate=h,t.initCollectionDistribute=function(t,e,i,n,s,r,a,o){const d=new u(document.querySelector(".mdc-snackbar"));$.ajaxSetup({beforeSend:function(t,e){bundle.csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",bundle.getCsrfToken())}}),[].forEach.call(document.querySelectorAll(".collection-toggle-assign"),o=>{o.addEventListener("click",()=>{o.classList.contains("removed")?function(e){const i=$.post(t,{pk:e.getAttribute("id_pk"),ppk:e.getAttribute("id_ppk")});i.done((function(t){console.info(t),document.getElementById(e.getAttribute("id_pk")).innerHTML=n,document.getElementById(e.getAttribute("id_pk")).classList.add("added"),document.getElementById(e.getAttribute("id_pk")).classList.remove("removed");const i={message:s+e.getAttribute("name")};d.show(i)})),i.fail((function(t){console.info(t);const e={message:a};d.show(e)}))}(o):function(t){const n=$.post(e,{pk:t.getAttribute("id_pk"),ppk:t.getAttribute("id_ppk")});n.done((function(e){console.info(e),document.getElementById(t.getAttribute("id_pk")).innerHTML=i,document.getElementById(t.getAttribute("id_pk")).classList.remove("added"),document.getElementById(t.getAttribute("id_pk")).classList.add("removed");const n={message:r+t.getAttribute("name")};d.show(n)})),n.fail((function(t){console.info(t);const e={message:a};d.show(e)}))}(o)})}),[].forEach.call(document.querySelectorAll(".md-48"),t=>{t.addEventListener("click",()=>{const e=t.getAttribute("id");window.location.assign(o.replace("0",e))})})},t.initCollectionList=function(t,e,i){$.ajaxSetup({beforeSend:function(t,e){bundle.csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",bundle.getCsrfToken())}}),[].forEach.call(document.querySelectorAll(".mdc-icon-toggle"),t=>{bundle.iconToggle.MDCIconToggle.attachTo(t)}),[].forEach.call(document.querySelectorAll(".follower-btn"),t=>{t.addEventListener("click",()=>{var n,s,r;n=t.getAttribute("pk"),s=e,r=i,$.post(s,{pk:n}).done((function(t){const e=parseInt(document.getElementById("follower-count-"+n).innerHTML.substring(11));console.log(t),"added"==t.action?document.getElementById("follower-count-"+n).innerHTML=r+(e+1):"removed"==t.action&&(document.getElementById("follower-count-"+n).innerHTML=r+(e-1))}))})}),[].forEach.call(document.querySelectorAll(".detail-view"),e=>{e.addEventListener("click",()=>{window.location.href=t.replace("0",e.getAttribute("id"))})})},t.initCollectionUpdate=function(t){$.ajaxSetup({beforeSend:function(t,e){bundle.csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",bundle.getCsrfToken())}}),[].forEach.call(document.querySelectorAll(".mdc-icon-toggle"),t=>{bundle.iconToggle.MDCIconToggle.attachTo(t)}),[].forEach.call(document.querySelectorAll(".follower-btn"),e=>{e.addEventListener("click",()=>{var i,n,s;i=e.getAttribute("pk"),n=e.getAttribute("ppk"),s=t,$.post(s,{pk:i,ppk:n}).done((function(t){console.info(t)}))})}),h()}}(this.collection=this.collection||{});
//# sourceMappingURL=collection.min.js.map
