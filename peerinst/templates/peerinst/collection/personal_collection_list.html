{% extends 'peerinst/base.html' %}

{% load i18n %}

{% block body %}
<main>
<section>
<h1 class="mdc-typography--display3">{% trans 'Browse Collections' %}
  <svg class="underline" width=150 height=4></svg>
</h1>

  {% if user.is_staff %}
    <div class="admin-link"><a href="{% url 'admin_index_wrapper' %}">Click here to access admin</a></div>
  {% endif %}

<div class="search">
  <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--dense" data-mdc-auto-init="MDCTextField">
    <label class="mdc-floating-label" for="search-bar">{% trans 'Search' %}</label>
    <input class="mdc-text-field__input" id="search-bar" oninput="search()">
    <div class="mdc-notched-outline">
      <svg>
      <path class="mdc-notched-outline__path"/>
      </svg>
    </div>
    <div class="mdc-notched-outline__idle"></div>
  </div>
  <p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent" aria-hidden="true">
    {% trans 'The collection list will be filtered for titles that contain the above string.' %}
  </p>
</div>

<ul>
{% for obj in object_list %}
  <li class="dense-list searchable">

  {{ obj.image }}


    <div class="foldable">
      <h2 class="foldable--title mdc-typography--display1 mdc-theme--secondary">
        {{ obj.title }}
      </h2>
      <div class="foldable--body">
          <ul>
            {% for assignment in obj.assignments.all %}
            <li class="dense-list searchable">
            {{ assignment.identifier }}
            </li>

        {% empty %}
          <li>{% trans 'No assignments have been added.' %}</li>
        {% endfor %}
          </ul>


      </div>
    </div>



  </li>
{% empty %}
  <li>{% trans 'No collections available.' %}</li>
{% endfor %}
</ul>


</section>
</main>
{% endblock %}

{% block scripts %}
<script nonce="{{ request.csp_nonce }}">
const searchBar = document.getElementById('search-bar');
searchBar.oninput = function() {
  bundle.search('.searchable', searchBar);
}
</script>
{% endblock %}
