{% extends 'peerinst/base.html' %}

{% load i18n %}

{% block body %}

<main>

    <section>
    <h1>All Rationales</h1>
    
        
        <ul>
            {% for assignment in data %}
            <li>
                <span>
                <h2>{{ assignment.assignment }}</h2>
                {% for question in assignment.questions %}                 
                    <ul>
                        <li>
                            <span>
                                {{ question.question|striptags }}
                                {% if question.question_image %}
                                    <div>
                                      <img style="display:block;margin:auto;
                                      padding-top:10pt;
                                      padding-bottom:10pt;"  src="{{ question.question_image.url }}"
                                           alt="g.question.image_alt_text">
                                    </div>
                                {% endif %}
                            </span>

                            <span>
                            <h3>Summary</h3>
                                {% for distribution in question.answer_distributions %}
                                <h4>{{ distribution.label }}</h4>
                                <h5>Count:Answer Choice</h5>
                                    <ul>
                                    {% for answer_choice in distribution.data %}
                                        <li> {{ answer_choice.count }} : {{ answer_choice.answer_choice }}
                                            {% if answer_choice.answer_choice_correct %}
                                            <em>(Correct)</em>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                    </ul>
                                {% endfor %}
                            </span>

                            <span>
                            <h3>Student Responses</h3>
                                <ul>
                                {% for student_response in question.student_responses %}
                                    
                                    <ul>
                                        <em><li>Student: {{ student_response.student }}</li></em>
                                        <li>First Answer: {{ student_response.first_answer_choice }}</li>
                                        <li>Rationale: {{ student_response.rationale }}</li>
                                        <li>Second Answer: {{ student_response.second_answer_choice }}</li>
                                        <li>Chosen Rationale: {{ student_response.chosen_rationale }}</li>
                                    </ul>
                                    
                                {% endfor %}
                                </ul>
                            </span>
                        </li>
                    </ul>

                {% endfor %}
                </span>
            </li>

            {% endfor %}
        
        </ul>                        

    </section>

</main>
{% endblock %}